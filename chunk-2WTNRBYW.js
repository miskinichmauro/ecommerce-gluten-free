import{p as te}from"./chunk-M5O47GSH.js";import{$ as ve,$a as ee,Ba as D,C as u,Ca as z,H as ue,Ia as N,J as p,Ka as ye,La as G,M as k,P as J,Ta as w,X as me,Xa as Pe,Ya as Y,Z as ge,_ as fe,_a as A,aa as $,ba as j,ca as U,da as s,db as v,ea as m,eb as Se,fa as M,fb as _e,g as d,ga as y,h as pe,ha as P,i as de,ia as be,ja as F,k as he,ka as Ce,la as S,ma as B,n as l,na as g,p as n,s as f,ta as _,v as o,va as h,w as L,x as O,xa as R,y as T,z as q}from"./chunk-XFI75DOG.js";var xe=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=k({type:r,selectors:[["app-logo"]],decls:5,vars:0,consts:[["id","logo"],["routerLink","/",1,"text-lg","md:text-2xl","font-bold"],[1,"text-amber-500"]],template:function(t,i){t&1&&(s(0,"div",0)(1,"a",1),h(2," Gluten "),s(3,"span",2),h(4," Free"),m()()())},dependencies:[ee],styles:["[_nghost-%COMP%]{display:block}"]})};var C=class r{loading=u(!1);success=u(!1);activateLoading(){this.loading.set(!0),this.success.set(!1)}deactivateLoading(){this.loading.set(!1)}activateSuccess(){this.loading.set(!1),this.success.set(!0),setTimeout(()=>this.success.set(!1),800)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=f({token:r,factory:r.\u0275fac,providedIn:"root"})};var W=`${v.baseUrl}/categories`,je={id:"new",name:""},re=class r{http=o(w);toastService=o(C);categoriesCache=new Map;getAll(){return this.categoriesCache.size?d(Array.from(this.categoriesCache.values())):this.http.get(W).pipe(n(e=>e.forEach(t=>this.categoriesCache.set(t.id,t))))}getById(e){return e==="new"?d(je):this.categoriesCache.has(e)?d(this.categoriesCache.get(e)):this.http.get(`${W}/${e}`).pipe(n(t=>this.categoriesCache.set(e,t)))}create(e){return this.toastService.activateLoading(),this.http.post(W,e).pipe(n(t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}update(e,t){return this.toastService.activateLoading(),this.http.patch(`${W}/${e}`,t).pipe(n(i=>{this.insertOrUpdateCache(i),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}delete(e){return this.toastService.activateLoading(),this.http.delete(`${W}/${e}`).pipe(n(()=>{this.categoriesCache.delete(e),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.categoriesCache.set(e.id,e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=f({token:r,factory:r.\u0275fac,providedIn:"root"})};var Z=`${v.baseUrl}/tags`,Re={id:"new",name:""},ae=class r{http=o(w);toastService=o(C);tagsCache=new Map;getAll(e){let t=e??"all";return this.tagsCache.has(t)?d(this.tagsCache.get(t)):this.http.get(Z,{params:e?{categoryId:e}:void 0,responseType:"json"}).pipe(n(i=>this.tagsCache.set(t,i)))}getById(e){return e==="new"?d(Re):this.http.get(`${Z}/${e}`).pipe(n(t=>{this.tagsCache.clear(),this.tagsCache.set(t.id,[t])}))}create(e){return this.toastService.activateLoading(),this.http.post(Z,e).pipe(n(t=>{this.tagsCache.clear(),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}update(e,t){return this.toastService.activateLoading(),this.http.patch(`${Z}/${e}`,t).pipe(n(i=>{this.tagsCache.clear(),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}delete(e){return this.toastService.activateLoading(),this.http.delete(`${Z}/${e}`).pipe(n(()=>{this.tagsCache.clear(),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=f({token:r,factory:r.\u0275fac,providedIn:"root"})};var ne=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=k({type:r,selectors:[["x-circle"]],decls:3,vars:0,consts:[[1,"x-circle-btn","cursor-pointer","inline-flex","items-center","justify-center","p-2","rounded-full","transition-colors","duration-200","hover:bg-base-200","text-base-content"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"]],template:function(t,i){t&1&&(y(0,"div",0),T(),y(1,"svg",1),be(2,"path",2),P()())},styles:["[_nghost-%COMP%]{display:inline-flex}"]})};var ke=(r,e)=>e.id;function De(r,e){if(r&1){let t=F();y(0,"li")(1,"button",4),B("click",function(){let a=L(t).$implicit,c=g();return O(c.selectCategory(a.id))}),h(2),P()()}if(r&2){let t=e.$implicit,i=g();p(),_("active",i.selectedCategory()===t.id),p(),R(" ",t.name," ")}}function Ne(r,e){if(r&1){let t=F();y(0,"button",8),B("click",function(){let a=L(t).$implicit,c=g();return O(c.toggleTag(a.id))}),h(1),P()}if(r&2){let t=e.$implicit,i=g();_("active",i.selectedTags().has(t.id)),p(),R(" ",t.name," ")}}var oe=class r{categoryService=o(re);tagService=o(ae);route=o(Y);router=o(A);configurationService=o(te);categories=u([]);tags=u([]);selectedCategory=u("all");selectedTags=u(new Set);ngOnInit(){this.categoryService.getAll().subscribe(e=>this.categories.set(e)),this.route.queryParamMap.subscribe(e=>{let t=e.get("categoryId")??"all",i=e.get("tagIds")??"",a=i?i.split(",").filter(Boolean):[];this.selectedCategory.set(t),this.selectedTags.set(new Set(a)),this.loadTags(t==="all"?void 0:t)})}selectCategory(e){this.selectedCategory.set(e),this.selectedTags.set(new Set),this.loadTags(e==="all"?void 0:e),this.updateQueryParams(!0)}toggleTag(e){let t=new Set(this.selectedTags());t.has(e)?t.delete(e):t.add(e),this.selectedTags.set(t),this.updateQueryParams()}resetTags(){this.selectedTags().size&&(this.selectedTags.set(new Set),this.updateQueryParams())}loadTags(e){this.tagService.getAll(e).subscribe(t=>this.tags.set(t))}updateQueryParams(e=!1){let t=Array.from(this.selectedTags());this.router.navigate([],{relativeTo:this.route,queryParams:{categoryId:this.selectedCategory()==="all"?null:this.selectedCategory(),tagIds:t.length?t.join(","):null},queryParamsHandling:"merge"}).then(()=>{e&&(this.configurationService.toggleSidebarItemsStatus("closed"),this.configurationService.toggleSidebarPageStatus("closed"))})}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=k({type:r,selectors:[["mobile-product-filters"]],decls:18,vars:5,consts:[[1,"mobile-filters"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-semibold"],[1,"flex","flex-col","gap-1","mb-4"],["type","button",1,"filter-item","cursor-pointer",3,"click"],["type","button",1,"text-primary","text-xs",3,"click","disabled"],[1,"flex","flex-wrap","gap-2"],["type","button",1,"filter-tag","cursor-pointer",3,"active"],["type","button",1,"filter-tag","cursor-pointer",3,"click"]],template:function(t,i){t&1&&(y(0,"div",0)(1,"div",1)(2,"h4",2),h(3,"Categor\xEDas"),P()(),y(4,"ul",3)(5,"li")(6,"button",4),B("click",function(){return i.selectCategory("all")}),h(7," Todos "),P()(),$(8,De,3,3,"li",null,ke),P(),y(10,"div",1)(11,"h4",2),h(12,"Tags"),P(),y(13,"button",5),B("click",function(){return i.resetTags()}),h(14," Limpiar "),P()(),y(15,"div",6),$(16,Ne,2,3,"button",7,ke),P()()),t&2&&(p(6),_("active",i.selectedCategory()==="all"),p(2),j(i.categories()),p(5),_("opacity-50",!i.selectedTags().size),Ce("disabled",!i.selectedTags().size),p(3),j(i.tags()))},styles:["[_nghost-%COMP%]{display:block}.mobile-filters[_ngcontent-%COMP%]{padding:10px 12px;border-top:1px solid #e5e7eb}.filter-item[_ngcontent-%COMP%]{width:100%;text-align:left;padding:8px 10px;border-radius:8px;background:transparent;border:1px solid transparent;transition:background-color .2s ease,color .2s ease,border-color .2s ease}.filter-item[_ngcontent-%COMP%]:hover{background:var(--fallback-b2, rgba(229, 231, 235, .6));color:var(--fallback-bc, #1f2937)}.filter-item.active[_ngcontent-%COMP%]{background:var(--fallback-b2, rgba(229, 231, 235, .8));border-color:var(--fallback-b2, rgba(229, 231, 235, .8));color:var(--fallback-bc, #1f2937);font-weight:600}.filter-tag[_ngcontent-%COMP%]{background:#eef2f6;border-radius:16px;padding:6px 10px;font-size:12px;transition:background-color .2s ease,color .2s ease}.filter-tag.active[_ngcontent-%COMP%], .filter-tag[_ngcontent-%COMP%]:hover{background:var(--fallback-b2, rgba(229, 231, 235, .8));color:var(--fallback-bc, #1f2937);font-weight:600}"]})};function qe(r,e){if(r&1){let t=F();s(0,"button",5),S("click",function(){L(t);let a=g(3);return O(a.handleProductClick())}),s(1,"span"),h(2,"Productos"),m(),T(),s(3,"svg",6),M(4,"path",7),m()(),q(),s(5,"div",8)(6,"div",9),M(7,"mobile-product-filters",10),m()()}if(r&2){let t=g(3);p(3),_("rotate-90",t.showProductFilters()),p(2),_("open",t.showProductFilters())}}function Ue(r,e){if(r&1){let t=F();s(0,"a",11),S("click",function(){L(t);let a=g(2).$implicit,c=g();return O(c.handleMenuClick(a))}),h(1),m()}if(r&2){let t=g(2).$implicit;p(),R(" ",t.label," ")}}function Ae(r,e){if(r&1&&me(0,qe,8,4)(1,Ue,2,1,"a",4),r&2){let t=g().$implicit;ge(t.routerLink==="/products"?0:1)}}function Ve(r,e){if(r&1&&me(0,Ae,2,1),r&2){let t=e.$implicit,i=g();ge(!t.adminOnly||i.authService.isAdmin()?0:-1)}}var we=class r{menuItems=G.required();configurationService=o(te);router=o(A);authService=o(_e);showProductFilters=u(!1);isOnProducts=u(!1);isMobile=u(!1);constructor(){this.isOnProducts.set(this.router.url.startsWith("/products")),this.isMobile.set(window.innerWidth<1024),this.router.events.pipe(he(e=>e instanceof Pe)).subscribe(e=>{let t=e.urlAfterRedirects.startsWith("/products");this.isOnProducts.set(t),t||this.showProductFilters.set(!1)})}isOpen(){return this.configurationService.sidebarItemsStatus()==="open"}close(){this.configurationService.toggleSidebarItemsStatus("closed")}handleEscape(e){e.key==="Escape"&&this.isOpen()&&this.close()}onResize(){this.isMobile.set(window.innerWidth<1024)}toggleProductFilters(){this.showProductFilters.update(e=>!e)}handleProductClick(){if(this.isMobile()){this.toggleProductFilters();return}if(this.isOnProducts()){this.toggleProductFilters();return}this.showProductFilters.set(!0),this.configurationService.toggleSidebarItemsStatus("closed"),this.configurationService.toggleSidebarPageStatus("closed"),this.router.navigateByUrl("/products")}handleMenuClick(e){e.adminOnly&&!this.authService.isAdmin()||(this.configurationService.toggleSidebarItemsStatus("closed"),this.configurationService.toggleSidebarPageStatus("closed"),typeof e.routerLink=="string"?this.router.navigateByUrl(e.routerLink):this.router.navigate([e.routerLink]))}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=k({type:r,selectors:[["sidebar-items"]],hostBindings:function(t,i){t&1&&S("keydown",function(c){return i.handleEscape(c)},ue)("resize",function(){return i.onResize()},ue)},inputs:{menuItems:[1,"menuItems"]},decls:7,vars:2,consts:[[1,"fixed","inset-0","bg-base-100","z-50","transform","transition-transform","duration-500","flex","flex-col","-translate-x-full"],[1,"flex","justify-end"],[1,"p-2",3,"click"],[1,"flex","flex-col","gap-2","px-4"],[1,"p-2","cursor-pointer","rounded-md","text-base-content","hover:bg-base-200","transition-colors","duration-200"],["type","button",1,"p-2","cursor-pointer","rounded-md","text-base-content","hover:bg-base-200","transition-colors","duration-200","flex","items-center","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-3.5","h-3.5","text-slate-500","transition-transform","duration-300"],["stroke-linecap","round","stroke-linejoin","round","d","M9 5l7 7-7 7"],[1,"submenu-container"],[1,"submenu-inner"],[1,"block","lg:hidden","mt-2"],[1,"p-2","cursor-pointer","rounded-md","text-base-content","hover:bg-base-200","transition-colors","duration-200",3,"click"]],template:function(t,i){t&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),S("click",function(){return i.configurationService.toggleSidebarItemsStatus("closed")}),M(3,"x-circle"),m()(),s(4,"nav",3),$(5,Ve,1,1,null,null,fe),m()()),t&2&&(_("translate-x-0",i.isOpen()),p(5),j(i.menuItems()))},dependencies:[ne,oe],styles:["[_nghost-%COMP%]{display:block}.submenu-container[_ngcontent-%COMP%]{overflow:hidden;max-height:0;opacity:0;transition:max-height .35s ease,opacity .25s ease}.submenu-container.open[_ngcontent-%COMP%]{max-height:1000px;opacity:1}.submenu-inner[_ngcontent-%COMP%]{margin-left:.5rem;padding-left:.25rem}"]})};var Q=`${v.baseUrl}/contacts`,He={id:"new",title:"",phone:"",email:""},Te=class r{http=o(w);contactsCache=new Map;toastService=o(C);getAll(){return this.contactsCache.size?d(Array.from(this.contactsCache.values())):this.http.get(Q).pipe(n(e=>e.forEach(t=>this.contactsCache.set(t.id,t))))}getById(e){return e==="new"?d(He):this.contactsCache.has(e)?d(this.contactsCache.get(e)):this.http.get(`${Q}/${e}`).pipe(n(t=>this.contactsCache.set(e,t)))}create(e){return this.toastService.activateLoading(),this.http.post(Q,e).pipe(n(t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}update(e,t){return this.toastService.activateLoading(),this.http.patch(`${Q}/${e}`,t).pipe(n(async i=>{this.insertOrUpdateCache(i),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}delete(e){return this.toastService.activateLoading(),this.http.delete(`${Q}/${e}`).pipe(n(async()=>{this.contactsCache.delete(e),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.contactsCache.set(e.id,e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=f({token:r,factory:r.\u0275fac,providedIn:"root"})};var Me=class r{activateRoute=o(Y);router=o(A);currentPage=Se(this.activateRoute.queryParamMap.pipe(de(e=>e.get("page")?+e.get("page"):1),de(e=>isNaN(e)?1:e)),{initialValue:1});setCurrentPage(e){this.router.navigate([],{queryParams:{page:e},queryParamsHandling:"merge"})}resetPage(){this.router.navigate([],{queryParams:{page:null},queryParamsHandling:"merge"})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=f({token:r,factory:r.\u0275fac,providedIn:"root"})};var V=`${v.baseUrl}/products`,Be={id:"new",title:"",price:0,description:"",slug:"",stock:0,isFeatured:!1,tags:[],deleteAt:null,images:[],imageIds:[],category:{id:"",name:""},user:{}},se=class r{constructor(){}http=o(w);productsCache=new Map;productCache=new Map;toastService=o(C);getProducts(e={}){let t=v.cantProducts,{limit:i=t,offset:a=0,isFeatured:c=!1,categoryId:x,tagIds:E,query:I}=e,le=c?"isFeatured":`${i}-${a}-${x??"all"}-${(E??[]).join(",")}-${I??""}`;if(this.productsCache.has(le))return d(this.productsCache.get(le));let H={limit:i,offset:a};return c!==void 0&&(H.isFeatured=c),x&&(H.categoryId=x),E&&E.length&&(H.tagIds=E),I&&(H.query=I),this.http.get(V,{params:H,responseType:"json"}).pipe(n($e=>this.productsCache.set(le,$e)))}searchProducts(e={}){let{query:t="",limit:i=v.cantProducts,offset:a=0,categoryId:c,tagIds:x,isFeatured:E}=e,I={query:t,limit:i,offset:a};return c&&(I.categoryId=c),x&&x.length&&(I.tagIds=x),E!==void 0&&(I.isFeatured=E),this.http.get(`${V}/search`,{params:I,responseType:"json"})}getProductByIdSlug(e){return e==="new"?d(Be):this.productCache.has(e)?d(this.productCache.get(e)):this.http.get(`${V}/${e}`,{responseType:"json"}).pipe(n(i=>this.productCache.set(e,i)))}createProduct(e){return this.toastService.activateLoading(),this.http.post(`${V}`,e).pipe(n(t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}updateProduct(e,t){return this.toastService.activateLoading(),this.http.patch(`${V}/${e}`,t).pipe(n(i=>{this.insertOrUpdateCache(i),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}deleteProduct(e){return this.toastService.activateLoading(),this.http.delete(`${V}/${e}`).pipe(n(()=>{this.productCache.delete(e),this.productsCache.clear(),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.productCache.get(e.id)?(this.productCache.set(e.id,e),this.productsCache.forEach(i=>{i.products=i.products.map(a=>a.id===e.id?e:a)})):(this.productCache.set(e.id,e),this.productsCache.clear())}static \u0275fac=function(t){return new(t||r)};static \u0275prov=f({token:r,factory:r.\u0275fac,providedIn:"root"})};function li(){let r=o(se),e=u(null),t=u(!0),i=u(null);async function a(c){t.set(!0),i.set(null);try{let x=c.query?await pe(r.searchProducts(c)):await pe(r.getProducts(c));e.set(x)}catch{i.set("Error al cargar los productos")}finally{t.set(!1)}}return{productResponse:e,loading:t,error:i,loadProducts:a}}var X=()=>[],ze=()=>({page:1}),ce=r=>({page:r});function Ge(r,e){if(r&1){let t=F();s(0,"button",14),S("click",function(){let a=L(t).$implicit,c=g();return O(c.goToPage(a))}),h(1),m()}if(r&2){let t=e.$implicit,i=g();_("btn-primary",t===i.activePage()),U("routerLink",D(5,X))("queryParams",z(6,ce,t)),p(),R(" ",t," ")}}function We(r,e){r&1&&(s(0,"button",8),h(1,"0"),m())}var Ie=class r{pages=G(0);currentPage=G(1);activePage=ye(this.currentPage);totalPages=N(()=>Math.max(0,this.pages()??0));getPagesList=N(()=>{let e=this.totalPages();return e?Array.from({length:e},(t,i)=>i+1):[]});isFirstPage=N(()=>this.activePage()<=1);isLastPage=N(()=>this.activePage()>=this.totalPages()&&this.totalPages()>0);previousPage=N(()=>Math.max(1,this.activePage()-1));nextPage=N(()=>Math.min(this.totalPages(),this.activePage()+1));goToPage(e){if(!this.totalPages())return;let t=Math.min(Math.max(e,1),this.totalPages());this.activePage.set(t)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=k({type:r,selectors:[["pagination"]],inputs:{pages:[1,"pages"],currentPage:[1,"currentPage"]},decls:18,vars:24,consts:[[1,"join","flex","justify-center","items-center"],["type","button","aria-label","Primera p\xE1gina","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"click","disabled","routerLink","queryParams"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-4"],["fill-rule","evenodd","d","M10.72 11.47a.75.75 0 0 0 0 1.06l7.5 7.5a.75.75 0 1 0 1.06-1.06L12.31 12l6.97-6.97a.75.75 0 0 0-1.06-1.06l-7.5 7.5Z","clip-rule","evenodd"],["fill-rule","evenodd","d","M4.72 11.47a.75.75 0 0 0 0 1.06l7.5 7.5a.75.75 0 1 0 1.06-1.06L6.31 12l6.97-6.97a.75.75 0 0 0-1.06-1.06l-7.5 7.5Z","clip-rule","evenodd"],["type","button","aria-label","P\xE1gina anterior","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"click","disabled","routerLink","queryParams"],["fill-rule","evenodd","d","M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z","clip-rule","evenodd"],["type","button","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"btn-primary","routerLink","queryParams"],["type","button","disabled","",1,"join-item","btn"],["type","button","aria-label","P\xE1gina siguiente","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"click","disabled","routerLink","queryParams"],["fill-rule","evenodd","d","M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z","clip-rule","evenodd"],["type","button","aria-label","\xDAltima p\xE1gina","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"click","disabled","routerLink","queryParams"],["fill-rule","evenodd","d","M13.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L11.69 12 4.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z","clip-rule","evenodd"],["fill-rule","evenodd","d","M19.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06L17.69 12l-6.97-6.97a.75.75 0 0 1 1.06-1.06l7.5 7.5Z","clip-rule","evenodd"],["type","button","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"click","routerLink","queryParams"]],template:function(t,i){t&1&&(s(0,"div",0)(1,"button",1),S("click",function(){return i.goToPage(1)}),T(),s(2,"svg",2),M(3,"path",3)(4,"path",4),m()(),q(),s(5,"button",5),S("click",function(){return i.goToPage(i.previousPage())}),T(),s(6,"svg",2),M(7,"path",6),m()(),$(8,Ge,2,8,"button",7,ve,!1,We,2,0,"button",8),q(),s(11,"button",9),S("click",function(){return i.goToPage(i.nextPage())}),T(),s(12,"svg",2),M(13,"path",10),m()(),q(),s(14,"button",11),S("click",function(){return i.goToPage(i.totalPages())}),T(),s(15,"svg",2),M(16,"path",12)(17,"path",13),m()()()),t&2&&(p(),U("disabled",i.isFirstPage()||!i.totalPages())("routerLink",D(13,X))("queryParams",D(14,ze)),p(4),U("disabled",i.isFirstPage()||!i.totalPages())("routerLink",D(15,X))("queryParams",z(16,ce,i.previousPage())),p(3),j(i.getPagesList()),p(3),U("disabled",i.isLastPage()||!i.totalPages())("routerLink",D(18,X))("queryParams",z(19,ce,i.nextPage())),p(3),U("disabled",i.isLastPage()||!i.totalPages())("routerLink",D(21,X))("queryParams",z(22,ce,i.totalPages()||1)))},dependencies:[ee],styles:["[_nghost-%COMP%]{display:block}"]})};var K=`${v.baseUrl}/recipes`,Ze={id:"new",title:"",text:""},Le=class r{http=o(w);recipesCache=new Map;toastService=o(C);getAll(){return this.recipesCache.size?d(Array.from(this.recipesCache.values())):this.http.get(K).pipe(n(e=>e.forEach(t=>this.recipesCache.set(t.id,t))))}getById(e){return e==="new"?d(Ze):this.recipesCache.has(e)?d(this.recipesCache.get(e)):this.http.get(`${K}/${e}`).pipe(n(t=>this.recipesCache.set(e,t)))}create(e){return this.toastService.activateLoading(),this.http.post(K,e).pipe(n(async t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}update(e,t){return this.toastService.activateLoading(),this.http.patch(`${K}/${e}`,t).pipe(n(i=>{this.insertOrUpdateCache(i),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}delete(e){return this.toastService.activateLoading(),this.http.delete(`${K}/${e}`).pipe(n(async()=>{this.recipesCache.delete(e),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.recipesCache.set(e.id,e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=f({token:r,factory:r.\u0275fac,providedIn:"root"})};var Qe=v.baseUrl,Oe="assets/images/default-image.jpg",Fe=class r{transform(e){if(!e||Array.isArray(e)&&e.length===0)return Oe;let t=Array.isArray(e)?e[0]:e,i=this.resolveImageValue(t);return i?i.startsWith("assets/")||/^https?:\/\//.test(i)?i:`${Qe}/files/product/${i}`:Oe}resolveImageValue(e){return e?typeof e=="string"?e:e.secureUrl||e.url||e.path||e.fileName||e.filename||e.name||e.id||null:null}static \u0275fac=function(t){return new(t||r)};static \u0275pipe=J({name:"productImage",type:r,pure:!0})};var Ee=class r{transform(e){return e==null?"0":"Gs. "+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}static \u0275fac=function(t){return new(t||r)};static \u0275pipe=J({name:"guaranies",type:r,pure:!0})};export{xe as a,ne as b,C as c,re as d,ae as e,we as f,Te as g,Me as h,se as i,Fe as j,Ee as k,li as l,Ie as m,Le as n};
