import{k as D}from"./chunk-MRNILBUI.js";import{B as l,Ba as x,E as d,Fa as ee,H as G,Ha as te,Ia as I,Ja as re,L as K,M as J,Ma as m,N as Q,Na as ne,O as W,Oa as F,P as M,Q as R,R as y,S as a,T as p,U as V,Y as $,_ as P,aa as h,e as c,f as B,g as E,ga as N,ha as f,i,ja as j,l as u,la as L,ma as X,o,p as O,q as S,r as H,s as z,sa as Y,u as w,ua as Z,va as v}from"./chunk-IXUDTN42.js";var ie=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["app-logo"]],decls:5,vars:0,consts:[["id","logo"],["routerLink","/",1,"text-lg","md:text-2xl","font-bold","text-white"],[1,"text-blue-500"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"a",1),f(2,"Gluten"),a(3,"span",2),f(4," Free"),p()()())},dependencies:[I],styles:["[_nghost-%COMP%]{display:block}"]})};var de=()=>({exact:!0});function fe(r,e){if(r&1){let t=$();a(0,"a",2),P("click",function(){O(t);let s=h(2);return S([s.configurationService.toggleSidebarItemsStatus("closed"),s.configurationService.toggleSidebarPageStatus("closed")])}),f(1),p()}if(r&2){let t=h().$implicit;y("routerLink",t.route)("routerLinkActiveOptions",L(3,de)),l(),j(" ",t.label," ")}}function ge(r,e){if(r&1&&K(0,fe,2,4,"a",1),r&2){let t=e.$implicit,n=h();J(!t.adminOnly||n.authService.isAdmin()?0:-1)}}var U=class r{menuItems=v.required();authService=o(F);configurationService=o(D);static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["nav-items"]],inputs:{menuItems:[1,"menuItems"]},decls:3,vars:0,consts:[[1,"flex","flex-col","gap-2","px-4"],["routerLinkActive","text-secondary",1,"p-2","rounded-md","hover:bg-gray-800","transition",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","text-secondary",1,"p-2","rounded-md","hover:bg-gray-800","transition",3,"click","routerLink","routerLinkActiveOptions"]],template:function(t,n){t&1&&(a(0,"nav",0),M(1,ge,1,1,null,null,Q),p()),t&2&&(l(),R(n.menuItems()))},dependencies:[I,re],styles:["[_nghost-%COMP%]{display:block}"]})};var oe=class r{menuItems=v.required();authService=o(F);configurationService=o(D);open(){return this.configurationService.sidebarItemsStatus()==="open"}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["sidebar-items"]],inputs:{menuItems:[1,"menuItems"]},decls:6,vars:5,consts:[[1,"fixed","inset-0","bg-base-100","z-50","transform","transition-transform","duration-500","flex","flex-col"],[1,"flex","justify-end"],[1,"btn","btn-ghost",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[3,"menuItems"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),P("click",function(){return n.configurationService.toggleSidebarItemsStatus("closed")}),H(),a(3,"svg",3),V(4,"path",4),p()()(),z(),V(5,"nav-items",5),p()),t&2&&(N("translate-x-0",n.open())("-translate-x-full",!n.open()),l(5),y("menuItems",n.menuItems()))},dependencies:[U],styles:["[_nghost-%COMP%]{display:block}"]})};var _=`${m.baseUrl}/contacts`,he={id:"new",title:"",phone:"",email:""},se=class r{http=o(x);contactsCache=new Map;getAll(){return this.contactsCache.size?c(Array.from(this.contactsCache.values())):this.http.get(_).pipe(i(e=>e.forEach(t=>this.contactsCache.set(t.id,t))))}getById(e){return e==="new"?c(he):this.contactsCache.has(e)?c(this.contactsCache.get(e)):this.http.get(`${_}/${e}`).pipe(i(t=>this.contactsCache.set(e,t)))}create(e){return this.http.post(_,e).pipe(i(t=>this.insertOrUpdateCache(t)))}update(e,t){return this.http.patch(`${_}/${e}`,t).pipe(i(n=>this.insertOrUpdateCache(n)))}delete(e){return this.http.delete(`${_}/${e}`).pipe(i(()=>this.contactsCache.delete(e)))}insertOrUpdateCache(e){this.contactsCache.set(e.id,e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var ae=class r{activateRoute=o(ee);router=o(te);currentPage=ne(this.activateRoute.queryParamMap.pipe(E(e=>e.get("page")?+e.get("page"):1),E(e=>isNaN(e)?1:e)),{initialValue:1});setPage(e){this.router.navigate([],{queryParams:{page:e},queryParamsHandling:"merge"})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var T=`${m.baseUrl}/products`,ve={id:"new",title:"",price:0,unitOfMeasure:"",description:"",slug:"",stock:0,tags:[""],deleteAt:null,imagesName:[""],user:{}},A=class r{constructor(){}http=o(x);productsCache=new Map;productCache=new Map;getProducts(e={}){let t=m.cantProducts,{limit:n=t,offset:s=0,isFeatured:C=!1}=e,b=C?"isFeatured":`${n}-${s}`;return this.productsCache.has(b)?c(this.productsCache.get(b)):this.http.get(T,{params:{limit:n,offset:s,isFeatured:C},responseType:"json"}).pipe(i(le=>this.productsCache.set(b,le)))}getProductByIdSlug(e){return e==="new"?c(ve):this.productCache.has(e)?c(this.productCache.get(e)):this.http.get(`${T}/${e}`,{responseType:"json"}).pipe(i(n=>this.productCache.set(e,n)))}createProduct(e){return this.http.post(`${T}`,e).pipe(i(n=>this.insertOrUpdateCache(n)))}updateProduct(e,t){return this.http.patch(`${T}/${e}`,t).pipe(i(s=>this.insertOrUpdateCache(s)))}insertOrUpdateCache(e){this.productCache.get(e.id)?(this.productCache.set(e.id,e),this.productsCache.forEach(n=>{n.products=n.products.map(s=>s.id===e.id?e:s)})):(this.productCache.set(e.id,e),this.productsCache.clear())}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};function mt(){let r=o(A),e=w(null),t=w(!0),n=w(null);async function s(C){t.set(!0),n.set(null);try{let b=await B(r.getProducts(C));e.set(b)}catch{n.set("Error al cargar los productos")}finally{t.set(!1)}}return{productResponse:e,loading:t,error:n,loadProducts:s}}var Ce=()=>[],be=r=>({page:r});function ye(r,e){if(r&1){let t=$();a(0,"button",3),P("click",function(){let s=O(t).$implicit,C=h();return S(C.activePage.set(s))}),f(1),p()}if(r&2){let t=e.$implicit,n=h();N("btn-primary",t===n.activePage()),y("routerLink",L(5,Ce))("queryParams",X(6,be,t)),l(),j(" ",t," ")}}function Pe(r,e){r&1&&(a(0,"button",2),f(1,"0"),p())}var ce=class r{pages=v(0);currentPage=v(1);activePage=Z(this.currentPage);getPagesList=Y(()=>Array.from({length:this.pages()},(e,t)=>t+1));static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["pagination"]],inputs:{pages:[1,"pages"],currentPage:[1,"currentPage"]},decls:4,vars:1,consts:[[1,"join","flex","justify-center","items-center"],[1,"join-item","btn",3,"btn-primary","routerLink","queryParams"],[1,"join-item","btn"],[1,"join-item","btn",3,"click","routerLink","queryParams"]],template:function(t,n){t&1&&(a(0,"div",0),M(1,ye,2,8,"button",1,W,!1,Pe,2,0,"button",2),p()),t&2&&(l(),R(n.getPagesList()))},dependencies:[I],styles:["[_nghost-%COMP%]{display:block}"]})};var k=`${m.baseUrl}/recipes`,xe={id:"new",title:"",text:""},pe=class r{http=o(x);recipesCache=new Map;getAll(){return this.recipesCache.size?c(Array.from(this.recipesCache.values())):this.http.get(k).pipe(i(e=>e.forEach(t=>this.recipesCache.set(t.id,t))))}getById(e){return e==="new"?c(xe):this.recipesCache.has(e)?c(this.recipesCache.get(e)):this.http.get(`${k}/${e}`).pipe(i(t=>this.recipesCache.set(e,t)))}create(e){return this.http.post(k,e).pipe(i(t=>this.insertOrUpdateCache(t)))}update(e,t){return this.http.patch(`${k}/${e}`,t).pipe(i(n=>this.insertOrUpdateCache(n)))}delete(e){return this.http.delete(`${k}/${e}`).pipe(i(()=>this.recipesCache.delete(e)))}insertOrUpdateCache(e){this.recipesCache.set(e.id,e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var me=m.baseUrl,ue=class r{transform(e){if(typeof e=="string")return`${me}/files/product/${e}`;let t=e[0];return t?`${me}/files/product/${t}`:"assets/images/default-image.jpg"}static \u0275fac=function(t){return new(t||r)};static \u0275pipe=G({name:"productImage",type:r,pure:!0})};export{ie as a,U as b,oe as c,se as d,ae as e,A as f,ue as g,mt as h,ce as i,pe as j};
