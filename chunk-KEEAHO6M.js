import{a as ie,b as f,c as ae,d as le,e as de,f as se,g as ce,h as me,i as ue,j as pe}from"./chunk-UMUPNWUY.js";import{a as ge,b as k,c as fe,d as ve,e as he,f as be}from"./chunk-3NU5BUBW.js";import{$ as i,Aa as w,Ba as oe,C as g,Fa as ne,Ga as _,J as z,K as q,M as U,N as y,O as C,P as p,Q as r,R as o,S as s,W as J,X as b,Y as K,Z as Q,aa as x,ba as v,da as W,ea as O,f as S,fa as $,g as B,ga as j,ka as X,la as P,na as E,o as c,p as G,pa as Y,q as H,r as L,s as R,u as h,xa as ee,y as Z,ya as te,z as l,za as re}from"./chunk-SFL4ZYLX.js";var A=class n{authService=c(_);user=X(()=>this.authService.user());static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["app-admin-dashboard-layout"]],decls:41,vars:1,consts:[[1,"bg-slate-800","overflow-y-scroll","w-screen","h-screen","antialiased","text-slate-300","selection:bg-blue-600","selection:text-white"],[1,"flex","flex-col","relative","w-screen"],["id","menu",1,"bg-gray-900","min-h-screen","z-10","text-slate-300","w-64","fixed","left-0","h-screen","overflow-y-scroll"],["id","logo",1,"my-4","px-6"],["routerLink","/",1,"text-lg","md:text-2xl","font-bold","text-white"],[1,"text-blue-500"],[1,"text-slate-500","text-sm"],["id","profile",1,"px-6","py-10"],[1,"text-slate-500"],["routerLink","/admin/products",1,"inline-flex","space-x-2","items-center"],[1,"text-sm","md:text-base","font-bold"],["id","nav",1,"w-full","px-6"],["routerLink","/admin/products",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"],[1,"flex","flex-col"],[1,"text-lg","font-bold","leading-5","text-white"],[1,"text-sm","text-white/50","hidden","md:block"],["routerLink","/admin/products","routerLinkActive","bg-blue-800",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"],[1,"text-lg","text-slate-300","font-bold","leading-5"],[1,"text-sm","text-slate-500","hidden","md:block"],[1,"divider","my-2"],[1,"btn","btn-ghost","text-secondary","w-full",3,"click"],[1,"flex-1","ml-64","pt-5","px-5"]],template:function(e,a){if(e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),i(5,"Gluten"),r(6,"span",5),i(7," Free"),o()(),r(8,"p",6),i(9,"Panel administrativo"),o()(),r(10,"div",7)(11,"p",8),i(12,"Bienvenido"),o(),r(13,"a",9),s(14,"span"),r(15,"span",10),i(16),o()()(),r(17,"div",11)(18,"a",12)(19,"div"),L(),r(20,"svg",13),s(21,"path",14),o()(),R(),r(22,"div",15)(23,"span",16),i(24,"Dashboard"),o(),r(25,"span",17),i(26,"Data Overview"),o()()(),r(27,"a",18)(28,"div"),L(),r(29,"svg",19),s(30,"path",20),o()(),R(),r(31,"div",15)(32,"span",21),i(33,"Productos"),o(),r(34,"span",22),i(35,"Listado de productos"),o()()(),s(36,"div",23),r(37,"button",24),b("click",function(){return a.authService.logout()}),i(38," Cerrar sesi\xF3n "),o()()()(),r(39,"div",25),s(40,"router-outlet"),o()()),e&2){let d;l(16),v(" ",(d=a.user())==null?null:d.fullName," ")}},dependencies:[te,w,oe],styles:["[_nghost-%COMP%]{display:block}"]})};function xe(){let n=c(fe),t=h(null),e=h(!0),a=h(null);async function d(m){e.set(!0),a.set(null);try{let u=await S(n.getProductByIdSlug(m));t.set(u)}catch(u){console.error(u),a.set("Error al carga el producto")}finally{e.set(!1)}}return{product:t,loading:e,error:a,loadProducts:d}}async function Ee(){return new Promise(n=>{setTimeout(()=>{n(!0)},2500)})}var M=class n{static namePattern="([a-zA-Z]+) ([a-zA-Z]+)";static emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$";static notOnlySpacesPattern="^[a-zA-Z0-9]+$";static slugPattern="^[a-z0-9_]+(?:-[a-z0-9_]+)*$";static getTextError(t){for(let e of Object.keys(t))switch(e){case"required":return"Este campo es requerido";case"minlength":return`M\xEDnimo de ${t.minlength.requiredLength} caracteres.`;case"min":return`Valor m\xEDnimo de ${t.min.min}`;case"email":return"El valor ingresado no es un correo electr\xF3nico";case"emailTaken":return"El correo electr\xF3nico ya est\xE1 siendo usado por otro usuario";case"noStrider":return"No se puede usar el username de strider en la app";case"pattern":return t.pattern.requiredPattern===n.emailPattern?"El valor ingresado no luce como un correo electr\xF3nico":"Error de patr\xF3n contra expresi\xF3n regular";default:return`Error de validaci\xF3n no controlado ${e}`}return null}static isValidField(t,e){return!!t.controls[e].errors&&t.controls[e].touched}static getFieldError(t,e){if(!t.controls[e])return null;let a=t.controls[e].errors??{};return n.getTextError(a)}static isValidFieldInArray(t,e){return t.controls[e].errors&&t.controls[e].touched}static getFieldErrorInArray(t,e){if(t.controls.length===0)return null;let a=t.controls[e].errors??{};return n.getTextError(a)}static isFieldOneEqualFieldTwo(t,e){return a=>{let d=a.get(t)?.value,m=a.get(e)?.value;return d===m?null:{passwordsNotEqual:!0}}}static async checkingServerResponse(t){return console.log("Validando contra servidor"),await Ee(),t.value==="hola@mundo.com"?{emailTaken:!0}:null}static notStrider(t){return t.value==="strider"?{noStrider:!0}:null}};function we(n,t){if(n&1&&(r(0,"button",13),i(1),o()),n&2){let e=t.$implicit;l(),x(e)}}var N=class n{product=E.required();fb=c(ue);productForm=this.fb.group({title:["",f.required],description:["",f.required],slug:["",[f.required,f.pattern(M.slugPattern)]],price:[1,[f.required,f.min(1)]],stock:[1,[f.required,f.min(1)]],tags:[[""]],images:[[]]});tags=["Cerveza","Harina","Salado","Dulce"];ngOnInit(){this.productForm.reset(this.product())}onSubmit(){console.log(this.productForm.value)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["product-details"]],inputs:{product:[1,"product"]},decls:23,vars:2,consts:[[1,"text-2xl","font-bold"],[1,"divider"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"text-2xl","font-bold","h-12"],["type","text","placeholder","T\xEDtulo","formControlName","title",1,"input","input-bordered","w-full"],["type","text","placeholder","Slug","formControlName","slug",1,"input","input-bordered","w-full"],["placeholder","Descripci\xF3n","rows","6","formControlName","description",1,"textarea","textarea-bordered"],[1,"text-lg","font-bold"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-2"],["type","number","placeholder","Precio","formControlName","price",1,"input","input-bordered","w-full"],["type","number","placeholder","Stock","formControlName","stock",1,"input","input-bordered","w-full"],[1,"grid","grid-cols-6","gap-2"],["type","button",1,"btn","btn-sm","btn-outline"],[1,"flex","justify-end","h-12"],["type","submit",1,"btn","btn-secondary"],["type","file","formControlName","images",1,"file-input","file-input-bordered","w-full","mt-4"]],template:function(e,a){e&1&&(r(0,"h1",0),i(1),o(),s(2,"div",1),r(3,"form",2),b("ngSubmit",function(){return a.onSubmit()}),r(4,"div",3)(5,"h2",4),i(6,"Datos generales"),o(),s(7,"input",5)(8,"input",6)(9,"textarea",7),r(10,"h2",8),i(11,"Datos de venta"),o(),r(12,"div",9),s(13,"input",10)(14,"input",11),o(),r(15,"div",12),y(16,we,2,1,"button",13,U),o()(),r(18,"div",3)(19,"div",14)(20,"button",15),i(21," Guardar "),o()(),s(22,"input",16),o()()),e&2&&(l(),x(a.product().title),l(2),p("formGroup",a.productForm),l(13),C(a.tags))},dependencies:[pe,de,ie,se,ae,le,ce,me],styles:["[_nghost-%COMP%]{display:block}"]})};function _e(n,t){n&1&&s(0,"loading")}function ke(n,t){if(n&1&&s(0,"product-details",0),n&2){let e=K();p("product",e.product())}}var T=class n{activateRoute=c(ee);router=c(re);productId=ne(this.activateRoute.params.pipe(B(t=>t.id)));paginationService=c(k);product;loading;error;loadProducts;constructor(){let{product:t,loading:e,error:a,loadProducts:d}=xe();this.product=t,this.loading=e,this.error=a,this.loadProducts=d,P(()=>{let m=this.productId();m&&this.loadProducts(m)}),P(()=>{this.error()&&this.router.navigate(["/admin/products"])})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["app-product-admin"]],decls:2,vars:2,consts:[[3,"product"]],template:function(e,a){if(e&1&&(z(0,_e,1,0,"loading"),z(1,ke,1,1,"product-details",0)),e&2){let d;q(a.loading()?0:-1),l(),q((d=a.product())!=null&&d.title?1:-1)}},dependencies:[ge,N],styles:["[_nghost-%COMP%]{display:block}"]})};var Pe=n=>["/admin/product",n],Ae=(n,t)=>t.id;function De(n,t){if(n&1&&(r(0,"tr")(1,"th")(2,"label"),i(3),o()(),r(4,"td")(5,"div",2)(6,"div",3)(7,"div",4),s(8,"img",5),$(9,"productImage"),o()(),r(10,"div")(11,"a",6),i(12),o(),r(13,"div",7),i(14),o()()()(),r(15,"td"),i(16),$(17,"currency"),o(),r(18,"td"),i(19),o(),r(20,"th")(21,"a",8),i(22," Detalles "),o()()()),n&2){let e=t.$implicit,a=t.$index;l(3),v(" ",a+1," "),l(5),p("src",j(9,9,e.imagesName),Z)("alt",e.title),l(3),p("routerLink",O(13,Pe,e.id)),l(),v(" ",e.title," "),l(2),v(" ",e.description," "),l(2),v(" ",j(17,11,e.price)," "),l(3),v(" ",e.stock," "),l(2),p("routerLink",O(15,Pe,e.id))}}var I=class n{products=E.required();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["products-table"]],inputs:{products:[1,"products"]},decls:17,vars:0,consts:[[1,"overflow-x-auto"],[1,"table"],[1,"flex","items-center","gap-3"],[1,"avatar"],[1,"mask","mask-squircle","h-12","w-12"],[3,"src","alt"],[1,"font-bold","hover:text-primary","transition-colors","duration-300",3,"routerLink"],[1,"text-sm","opacity-50"],[1,"btn","btn-ghost","text-primary","btn-xs",3,"routerLink"]],template:function(e,a){e&1&&(r(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th")(5,"label"),i(6," Nro "),o()(),r(7,"th"),i(8,"Titulo"),o(),r(9,"th"),i(10,"Precio"),o(),r(11,"th"),i(12,"Stock"),o(),s(13,"th"),o()(),r(14,"tbody"),y(15,De,23,17,"tr",null,Ae),o()()()),e&2&&(l(15),C(a.products()))},dependencies:[w,ve,Y],styles:["[_nghost-%COMP%]{display:block}"]})};var Fe=()=>[],V=class n{paginationService=c(k);productResponse;loading;error;loadProducts;productPerPage=h(10);constructor(){let{productResponse:t,loading:e,error:a,loadProducts:d}=he();this.productResponse=t,this.loading=e,this.error=a,this.loadProducts=d,P(()=>{let m=this.paginationService.currentPage(),u=this.productPerPage(),ye=(m-1)*u,Ce=u;this.loadProducts({offset:ye,limit:Ce})})}updateProductsPerPage(t){this.productPerPage.set(t),this.paginationService.setPage(1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["app-products-admin"]],decls:19,vars:5,consts:[["selectPerPage",""],[1,"text-2xl","font-bold"],[1,"text-lg"],[1,"text-primary"],[1,"flex","gap-2","items-center","h-20"],[1,"select","select-bordered","w-32",3,"change"],["value","10"],["value","20"],["value","50"],["value","100"],[3,"pages","currentPage"],[3,"products"]],template:function(e,a){if(e&1){let d=J();r(0,"h1",1),i(1,"Listado de productos"),o(),r(2,"h3",2),i(3," Total de productos "),r(4,"span",3),i(5),o()(),r(6,"div",4)(7,"select",5,0),b("change",function(){G(d);let u=Q(8);return H(a.updateProductsPerPage(+u.value))}),r(9,"option",6),i(10,"10"),o(),r(11,"option",7),i(12,"20"),o(),r(13,"option",8),i(14,"50"),o(),r(15,"option",9),i(16,"100"),o()(),s(17,"pagination",10),o(),s(18,"products-table",11)}if(e&2){let d,m,u;l(5),x((d=a.productResponse())==null?null:d.count),l(12),p("pages",((m=a.productResponse())==null?null:m.pages)??0)("currentPage",a.paginationService.currentPage()),l(),p("products",((u=a.productResponse())==null?null:u.products)??W(4,Fe))}},dependencies:[I,be],styles:["[_nghost-%COMP%]{display:block}"]})};var Se=async()=>{let n=c(_);return await S(n.checkStatus()),n.isAdmin()};var Me=[{path:"",component:A,canMatch:[Se],children:[{path:"products",component:V},{path:"product/:id",component:T},{path:"**",redirectTo:"products"}]}],Dt=Me;export{Me as AdminDashboardRoutes,Dt as default};
