import{a as Mt,d as Nt,e as ge,f as we,g as Ie,h as Ve,i as Ue,j as Ft,k as Rt,l as De}from"./chunk-KOO2VKKL.js";import{a as ie,b as E,c as ne,d as oe,f as re,g as kt,i as ae,j as le,m as se,n as me,o as ce,p as P,q as Pt}from"./chunk-VMC7GUZQ.js";import{$ as H,Aa as xe,Ba as ke,C as g,Ca as _t,Fa as Y,G as Re,Ga as $,H as Ct,I as V,Ia as _,J as a,M as u,Ma as St,Na as wt,Oa as Dt,Qa as pe,R as K,Va as ee,W as C,Wa as Et,Xa as k,Y as y,Ya as D,Za as Tt,_ as yt,a as Z,aa as j,ab as ue,b as ht,ba as p,bb as te,ca as n,cb as Ae,da as r,ea as m,fa as Ce,g as B,ga as ye,h as v,i as G,ia as I,j as bt,ka as f,la as vt,ma as b,n as z,na as Q,oa as W,p as L,pa as J,qa as Le,ra as xt,s as de,sa as M,ta as l,ua as h,v as c,va as T,w as F,x as R,y as S,ya as X,z as A,za as O}from"./chunk-TGY6NUM4.js";var Lt=async()=>{let o=c(Ae);return await v(o.checkStatus()),o.isAdmin()};var At=[{label:"Inicio",routerLink:"/",adminOnly:!0},{label:"Dashboard",routerLink:"/admin/dashboard",adminOnly:!0},{label:"Productos",routerLink:"/admin/products",adminOnly:!0},{label:"Categor\xEDas",routerLink:"/admin/categories",adminOnly:!0},{label:"Tags",routerLink:"/admin/tags",adminOnly:!0},{label:"Recetas",routerLink:"/admin/recipes",adminOnly:!0},{label:"Contacto",routerLink:"/admin/contacts",adminOnly:!0},{label:"Usuarios",routerLink:"/admin/users",adminOnly:!0}];function Gt(o,t){o&1&&m(0,"loading",1)}function zt(o,t){o&1&&m(0,"success",1)}var Oe=class o{toastService=c(ge);loading=this.toastService.loading;success=this.toastService.success;static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["toast"]],decls:3,vars:2,consts:[[1,"relative"],[1,"fixed","bottom-4","right-4"]],template:function(e,i){e&1&&(n(0,"div",0),C(1,Gt,1,0,"loading",1),C(2,zt,1,0,"success",1),r()),e&2&&(a(),y(i.loading()?1:-1),a(),y(i.success()?2:-1))},dependencies:[Pt,P],styles:["[_nghost-%COMP%]{display:block}"]})};function qt(o,t){if(o&1){let e=I();n(0,"div",2),m(1,"sidebar-items",4),n(2,"div",5)(3,"button",6),f("click",function(){F(e);let s=b();return R(s.configurationService.toggleSidebarItemsStatus("open"))}),S(),n(4,"svg",7),m(5,"path",8),r()(),A(),m(6,"app-logo"),r(),n(7,"div",9),m(8,"router-outlet"),r()()}if(o&2){let e=b();a(),p("menuItems",e.menuItems)}}function Zt(o,t){if(o&1){let e=I();n(0,"div",3)(1,"div",10)(2,"div",11)(3,"div",12),m(4,"app-logo"),n(5,"p",13),l(6,"Panel administrativo"),r()(),n(7,"div",14)(8,"p",15),l(9,"Bienvenido"),r(),n(10,"a",16)(11,"span",17),l(12),r()()(),n(13,"div",18)(14,"a",19)(15,"div"),S(),n(16,"svg",20),m(17,"path",21),r()(),A(),n(18,"div",22)(19,"span",23),l(20,"Dashboard"),r(),n(21,"span",24),l(22,"Data Overview"),r()()(),n(23,"a",25)(24,"div"),S(),n(25,"svg",26),m(26,"path",27),r()(),A(),n(27,"div",22)(28,"span",28),l(29,"Productos"),r(),n(30,"span",29),l(31,"Listado de productos"),r()()(),n(32,"a",30)(33,"div"),S(),n(34,"svg",26),m(35,"path",31)(36,"path",32),r()(),A(),n(37,"div",22)(38,"span",28),l(39,"Categor\xEDas"),r(),n(40,"span",29),l(41,"Listado de categor\xEDas"),r()()(),n(42,"a",33)(43,"div"),S(),n(44,"svg",26),m(45,"path",34)(46,"path",35),r()(),A(),n(47,"div",22)(48,"span",28),l(49,"Tags"),r(),n(50,"span",29),l(51,"Listado de tags"),r()()(),n(52,"a",36)(53,"div"),S(),n(54,"svg",37),m(55,"path",38),r()(),A(),n(56,"div",22)(57,"span",28),l(58,"Recetas"),r(),n(59,"span",29),l(60,"Listado de recetas"),r()()(),n(61,"a",39)(62,"div"),S(),n(63,"svg",37),m(64,"path",40),r()(),A(),n(65,"div",22)(66,"span",28),l(67,"Contactos"),r(),n(68,"span",29),l(69,"Listado de contactos"),r()()(),n(70,"div")(71,"div")(72,"a",41),f("click",function(){F(e);let s=b();return R(s.toggleUserMenu())}),n(73,"div",42)(74,"div",43),S(),n(75,"svg",44),m(76,"path",45),r(),A(),n(77,"div",22)(78,"span",28),l(79,"Usuarios"),r(),n(80,"span",29),l(81,"Opciones"),r()()(),S(),n(82,"svg",46),m(83,"path",47),r()()(),A(),n(84,"div",48,0)(86,"a",49),l(87,"Usuarios"),r(),n(88,"a",50),l(89,"Roles"),r()()()()()()(),n(90,"div",51),m(91,"router-outlet"),r()()}if(o&2){let e,i=Le(85),s=b();a(12),T(" ",(e=s.user())==null?null:e.fullName," "),a(70),M("rotate-90",s.userMenuOpen),a(2),xt("max-height",s.userMenuOpen?i.scrollHeight+"px":"0")}}var He=class o{authService=c(Ae);configurationService=c(ce);user=Y(()=>this.authService.user());menuItems=At;isMobile=!1;userMenuOpen=!1;ngOnInit(){this.onResize()}onResize(){this.isMobile=window.innerWidth<1024}toggleUserMenu(){this.userMenuOpen=!this.userMenuOpen}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["app-admin-dashboard-layout"]],hostBindings:function(e,i){e&1&&f("resize",function(){return i.onResize()},Ct)},decls:4,vars:1,consts:[["userMenuContent",""],["data-theme","coffee",1,"min-h-screen","bg-gray-950","text-slate-100"],[1,"flex","flex-col","gap-4","min-h-screen","bg-gray-900/90","p-4","text-slate-100"],[1,"bg-slate-800","overflow-y-scroll","overflow-x-hidden","w-full","h-screen","antialiased","text-slate-300","selection:bg-blue-600","selection:text-white"],[3,"menuItems"],[1,"flex","items-center","justify-between","bg-gray-800/70","rounded-xl","px-4","py-2","shadow"],[1,"btn","btn-ghost","text-slate-100","lg:hidden",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h8m-8 6h16"],[1,"flex-1","px-5","py-4","bg-gray-800/70","rounded-2xl","shadow-inner"],[1,"flex","flex-col","relative","w-full","max-w-full"],["id","menu",1,"bg-gray-900","min-h-screen","z-10","text-slate-300","w-64","fixed","left-0","h-screen","overflow-y-scroll"],[1,"my-5","px-5"],[1,"text-slate-500","text-sm"],["id","profile",1,"px-6","py-4"],[1,"text-slate-500"],["routerLink","/admin/products",1,"inline-flex","space-x-2","items-center"],[1,"text-sm","md:text-base","font-bold"],["id","nav",1,"w-full","px-6"],["routerLink","/admin/products",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"],[1,"flex","flex-col"],[1,"text-lg","font-bold","leading-5","text-white"],[1,"text-sm","text-white/50","hidden","md:block"],["routerLink","/admin/products","routerLinkActive","bg-blue-800",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"],[1,"text-lg","text-slate-300","font-bold","leading-5"],[1,"text-sm","text-slate-500","hidden","md:block"],["routerLink","/admin/categories","routerLinkActive","bg-blue-800",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["stroke-linecap","round","stroke-linejoin","round","d","M6.633 10.5c.806 0 1.533.446 2.031 1.08a9.041 9.041 0 0 1 2.861-.48c.986 0 1.957.168 2.862.48.498-.634 1.225-1.08 2.03-1.08h.009c1.657 0 3 1.567 3 3.5 0 1.934-1.343 3.5-3 3.5-.806 0-1.533-.446-2.031-1.08a9.041 9.041 0 0 1-2.861.48 9.04 9.04 0 0 1-2.862-.48c-.498.634-1.225 1.08-2.03 1.08h-.01c-1.656 0-3-1.566-3-3.5 0-1.933 1.344-3.5 3-3.5Z"],["stroke-linecap","round","stroke-linejoin","round","d","M3 5a1.5 1.5 0 0 1 1.5-1.5h15A1.5 1.5 0 0 1 21 5v1.5H3V5Z"],["routerLink","/admin/tags","routerLinkActive","bg-blue-800",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["stroke-linecap","round","stroke-linejoin","round","d","M9.813 15.904 9 18.75l-.813-2.846a1 1 0 0 0-.641-.64L4.5 14.25l2.846-.813a1 1 0 0 0 .641-.641L9 10.5l1.013 2.296a1 1 0 0 0 .641.64l2.846.813-2.846.704a1 1 0 0 0-.641.64Z"],["stroke-linecap","round","stroke-linejoin","round","d","M16.5 18.75V5.25m-12 0h15"],["routerLink","/admin/recipes","routerLinkActive","bg-blue-800",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"],["routerLink","/admin/contacts","routerLinkActive","bg-blue-800",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["stroke-linecap","round","stroke-linejoin","round","d","M15.75 3.75 18 6m0 0 2.25 2.25M18 6l2.25-2.25M18 6l-2.25 2.25m1.5 13.5c-8.284 0-15-6.716-15-15V4.5A2.25 2.25 0 0 1 4.5 2.25h1.372c.516 0 .966.351 1.091.852l1.106 4.423c.11.44-.054.902-.417 1.173l-1.293.97a1.062 1.062 0 0 0-.38 1.21 12.035 12.035 0 0 0 7.143 7.143c.441.162.928-.004 1.21-.38l.97-1.293a1.125 1.125 0 0 1 1.173-.417l4.423 1.106c.5.125.852.575.852 1.091V19.5a2.25 2.25 0 0 1-2.25 2.25h-2.25Z"],[1,"w-full","px-2","flex","flex-col","justify-between","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150","cursor-pointer",3,"click"],[1,"flex","items-center","justify-between","w-full"],[1,"flex","items-center","space-x-2"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"w-6","h-6"],["fill-rule","evenodd","d","M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z","clip-rule","evenodd"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"w-4","h-4","text-slate-400","transition-transform","duration-300"],["stroke-linecap","round","stroke-linejoin","round","d","M9 5l7 7-7 7"],[1,"overflow-hidden","transition-all","duration-500","ease-in-out"],["routerLink","/admin/users",1,"block","py-2","pl-10","hover:bg-white/5","text-slate-300"],["routerLink","/admin/roles",1,"block","py-2","pl-10","hover:bg-white/5","text-slate-300"],[1,"flex-1","ml-64","pt-5","px-5"]],template:function(e,i){e&1&&(n(0,"div",1),C(1,qt,9,1,"div",2)(2,Zt,92,5,"div",3),m(3,"toast"),r()),e&2&&(a(),y(i.isMobile?1:2))},dependencies:[Et,D,Tt,Mt,Nt,Oe],styles:["[_nghost-%COMP%]{display:block}"]})};async function Kt(){return new Promise(o=>{setTimeout(()=>{o(!0)},2500)})}var Ee=class o{static namePattern="([a-zA-Z]+) ([a-zA-Z]+)";static emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$";static notOnlySpacesPattern="^[a-zA-Z0-9]+$";static slugPattern="^[a-z0-9_]+(?:-[a-z0-9_]+)*$";static getTextError(t){for(let e of Object.keys(t))switch(e){case"required":return"Este campo es requerido";case"minlength":return`M\xEDnimo de ${t.minlength.requiredLength} caracteres.`;case"min":return`Valor m\xEDnimo de ${t.min.min}`;case"email":return"El valor ingresado no es un correo electr\xF3nico";case"emailTaken":return"El correo electr\xF3nico ya est\xE1 siendo usado por otro usuario";case"noStrider":return"No se puede usar el username de strider en la app";case"pattern":return t.pattern.requiredPattern===o.emailPattern?"El valor ingresado no luce como un correo electr\xF3nico":"Error de patr\xF3n contra expresi\xF3n regular";default:return`Error de validaci\xF3n no controlado ${e}`}return null}static isValidField(t,e){return!!t.controls[e].errors&&t.controls[e].touched}static getFieldError(t,e){if(!t.controls[e])return null;let i=t.controls[e].errors??{};return o.getTextError(i)}static isValidFieldInArray(t,e){return t.controls[e].errors&&t.controls[e].touched}static getFieldErrorInArray(t,e){if(t.controls.length===0)return null;let i=t.controls[e].errors??{};return o.getTextError(i)}static isFieldOneEqualFieldTwo(t,e){return i=>{let s=i.get(t)?.value,d=i.get(e)?.value;return s===d?null:{passwordsNotEqual:!0}}}static async checkingServerResponse(t){return await Kt(),t.value==="hola@mundo.com"?{emailTaken:!0}:null}static notStrider(t){return t.value==="strider"?{noStrider:!0}:null}};var q=class o{control=_.required();get errorMessage(){let t=this.control().errors||{};return this.control().touched&&Object.keys(t).length>0?Ee.getTextError(t):null}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["form-error-label"]],inputs:{control:[1,"control"]},decls:2,vars:1,consts:[[1,"text-red-500","text-xs"]],template:function(e,i){e&1&&(Ce(0,"span",0),l(1),ye()),e&2&&(a(),h(i.errorMessage))},styles:["[_nghost-%COMP%]{display:block}"]})};var je=class o{contact=_.required();router=c(k);contactService=c(we);configurationService=c(ce);fb=c(se);contactForm=this.fb.group({title:["",E.required],phone:["",E.required],email:["",[E.required,E.email]]});ngOnInit(){this.contactForm.reset(this.contact())}async onSubmit(){this.contactForm.markAllAsTouched();let t=this.contactForm.value,e=Z({},t);this.contact().id==="new"?await v(this.contactService.create(e)):await v(this.contactService.update(this.contact().id,e)),this.router.navigate(["/admin/contacts"])}controlPresionado=!1;handleKeyboardEvent(t){t.key==="Control"?this.controlPresionado=!0:t.key==="Enter"&&this.controlPresionado&&this.onSubmit()}handleKeyboardUp(t){t.key==="Control"&&(this.controlPresionado=!1)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["contact-details"]],hostBindings:function(e,i){e&1&&f("keydown",function(d){return i.handleKeyboardEvent(d)},V)("keyup",function(d){return i.handleKeyboardUp(d)},V)},inputs:{contact:[1,"contact"]},decls:17,vars:11,consts:[[1,"text-2xl","font-bold"],[1,"divider"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"text-xl","font-bold","h-12"],["type","text","placeholder","Nombre","formControlName","title",1,"input","input-bordered","w-full"],[3,"control"],["type","text","placeholder","Tel\xE9fono","formControlName","phone",1,"input","input-bordered","w-full"],["type","email","placeholder","Email","formControlName","email",1,"input","input-bordered","w-full"],[1,"flex","justify-end","h-12"],["type","submit",1,"btn","btn-secondary"]],template:function(e,i){if(e&1&&(n(0,"h1",0),l(1),r(),m(2,"div",1),n(3,"form",2),f("ngSubmit",function(){return i.onSubmit()}),n(4,"div",3)(5,"h2",4),l(6,"Datos generales"),r(),m(7,"input",5)(8,"form-error-label",6)(9,"input",7)(10,"form-error-label",6)(11,"input",8)(12,"form-error-label",6),r(),n(13,"div",3)(14,"div",9)(15,"button",10),l(16,"Guardar"),r()()()()),e&2){let s,d,N;a(),h(i.contact().title||"Crear nuevo contacto"),a(2),p("formGroup",i.contactForm),a(4),M("border-red-500",((s=i.contactForm.get("title"))==null?null:s.errors)??!1),a(),p("control",i.contactForm.get("title")),a(),M("border-red-500",((d=i.contactForm.get("phone"))==null?null:d.errors)??!1),a(),p("control",i.contactForm.get("phone")),a(),M("border-red-500",((N=i.contactForm.get("email"))==null?null:N.errors)??!1),a(),p("control",i.contactForm.get("email"))}},dependencies:[me,re,ie,ne,oe,ae,le,q],styles:["[_nghost-%COMP%]{display:block}"]})};function Qt(o,t){o&1&&(n(0,"div",0),m(1,"loading"),r())}function Wt(o,t){if(o&1&&m(0,"contact-details",1),o&2){let e=b();p("contact",e.contact())}}var $e=class o{activateRoute=c(ee);router=c(k);contactService=c(we);contactId=te(this.activateRoute.params.pipe(G(t=>t.id)));contact=g(null);loading=g(!0);error=g(null);constructor(){$(()=>{let t=this.contactId();this.loadContact(t)})}async loadContact(t){this.loading.set(!0),this.error.set(null);try{let e=await v(this.contactService.getById(t));this.contact.set(e)}catch{this.error.set("Error al cargar el contacto"),this.router.navigate(["/admin/contacts"])}finally{this.loading.set(!1)}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["contact-admin"]],decls:2,vars:2,consts:[[1,"min-h-[50vh]","gap-4"],[3,"contact"]],template:function(e,i){if(e&1&&(C(0,Qt,2,0,"div",0),C(1,Wt,1,1,"contact-details",1)),e&2){let s;y(i.loading()?0:-1),a(),y((s=i.contact())!=null&&s.id?1:-1)}},dependencies:[P,je],styles:["[_nghost-%COMP%]{display:block}"]})};function Jt(o,t){if(o&1){let e=I();Ce(0,"div",0)(1,"div",1)(2,"h2",2),l(3),ye(),Ce(4,"p",3),l(5),ye(),Ce(6,"div",4)(7,"button",5),vt("click",function(){F(e);let s=b();return R(s.close(!0))}),l(8," Si "),ye(),Ce(9,"button",6),vt("click",function(){F(e);let s=b();return R(s.close(!1))}),l(10," No "),ye()()()()}if(o&2){let e=b();a(3),h(e.title()),a(2),h(e.message())}}var U=class o{visible=g(!1);message=g("");title=g("Confirmar");resolver;open(t,e="Confirmar"){return this.message.set(t),this.title.set(e),this.visible.set(!0),new Promise(i=>{this.resolver=i})}close(t){this.visible.set(!1),this.resolver&&(this.resolver(t),this.resolver?.(!1))}handleKeyboardEvent(t){if(this.visible)switch(t.key){case"Enter":case" ":t.preventDefault(),this.close(!0);break;case"Escape":t.preventDefault(),this.close(!1);break}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["confirm-dialog"]],hostBindings:function(e,i){e&1&&f("keydown",function(d){return i.handleKeyboardEvent(d)},V)},decls:1,vars:1,consts:[[1,"fixed","inset-0","flex","items-center","justify-center","z-50"],[1,"bg-base-100","border","border-slate-700","rounded-xl","shadow-xl","p-6","w-[320px]","text-center","backdrop-blur-sm"],[1,"text-lg","font-bold","mb-3","text-slate-200"],[1,"mb-6","text-slate-400"],[1,"flex","justify-center","gap-4"],[1,"btn","btn-sm","bg-red-500","hover:bg-red-600","text-white","font-semibold","cursor-pointer",3,"click"],[1,"btn","btn-sm","bg-slate-700","hover:bg-slate-600","text-slate-100","font-semibold","cursor-pointer",3,"click"]],template:function(e,i){e&1&&C(0,Jt,11,2,"div",0),e&2&&y(i.visible()?0:-1)},dependencies:[Dt],styles:["[_nghost-%COMP%]{display:block}"]})};var It=o=>["/admin/contacts",o],Xt=(o,t)=>t.id;function Yt(o,t){if(o&1){let e=I();n(0,"tr")(1,"th"),l(2),r(),n(3,"td")(4,"a",3),l(5),r()(),n(6,"td"),l(7),r(),n(8,"td"),l(9),r(),n(10,"th",4)(11,"a",5),S(),n(12,"svg",6),m(13,"path",7),r()(),A(),n(14,"a",8),f("click",function(){let s=F(e).$implicit,d=b();return R(d.onDelete(s.id))}),S(),n(15,"svg",6),m(16,"path",9),r()()()()}if(o&2){let e=t.$implicit,i=t.$index;a(2),h(i+1),a(2),p("routerLink",O(6,It,e.id)),a(),T(" ",e.title," "),a(2),h(e.phone),a(2),h(e.email),a(2),p("routerLink",O(8,It,e.id))}}var Be=class o{contacts=_.required();delete=new K;confirmDialog;async onDelete(t){await this.confirmDialog.open("\xBFEst\xE1s seguro que deseas eliminar este contacto?")&&this.delete.emit(t)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["contacts-table"]],viewQuery:function(e,i){if(e&1&&Q(U,5),e&2){let s;W(s=J())&&(i.confirmDialog=s.first)}},inputs:{contacts:[1,"contacts"]},outputs:{delete:"delete"},decls:16,vars:0,consts:[[1,"overflow-y-auto","max-h-[75vh]","overflow-x-auto","border","border-slate-700","rounded-xl"],[1,"table","table-zebra","w-full"],[1,"sticky","top-0","bg-slate-900","z-10"],[1,"font-bold","hover:text-primary","transition-colors","duration-300",3,"routerLink"],[1,"flex","justify-end"],[1,"btn","btn-ghost","text-primary","btn-xs",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-6"],["d","M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"],[1,"btn","btn-ghost","text-error","btn-xs",3,"click"],["fill-rule","evenodd","d","M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z","clip-rule","evenodd"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),m(4,"th"),n(5,"th"),l(6,"Nombre"),r(),n(7,"th"),l(8,"Tel\xE9fono"),r(),n(9,"th"),l(10,"Email"),r(),m(11,"th"),r()(),n(12,"tbody"),H(13,Yt,17,10,"tr",null,Xt),r()()(),m(15,"confirm-dialog")),e&2&&(a(13),j(i.contacts()))},dependencies:[D,U],styles:["[_nghost-%COMP%]{display:block}"]})};var ei=()=>[];function ti(o,t){o&1&&(n(0,"div",6),m(1,"loading"),r())}var Ge=class o{contactService=c(we);contacts=g(null);total=Y(()=>this.contacts()?.length??0);loading=g(!0);error=g(null);ngOnInit(){this.getContacts()}async getContacts(){this.loading.set(!0),this.error.set(null);try{let t=await v(this.contactService.getAll());this.contacts.set(t)}catch{this.error.set("Error al cargar los contactos")}finally{this.loading.set(!1)}}async delete(t){try{await v(this.contactService.delete(t)),this.contacts.set(this.contacts()?.filter(e=>e.id!==t))}catch(e){console.error("Error al eliminar",e),this.error.set("No se pudo eliminar el contacto.")}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["contacts-admin"]],decls:12,vars:4,consts:[[1,"text-2xl","font-bold"],[1,"text-lg"],[1,"text-primary"],[1,"flex","gap-2","items-center","h-20"],[1,"flex","flex-1"],["routerLink","/admin/contacts/new",1,"btn","btn-primary"],[1,"min-h-[50vh]","gap-4"],[3,"delete","contacts"]],template:function(e,i){e&1&&(n(0,"h1",0),l(1,"Listado de contactos"),r(),n(2,"h3",1),l(3," Total de contactos: "),n(4,"span",2),l(5),r()(),n(6,"div",3),m(7,"div",4),n(8,"button",5),l(9," Cargar contacto "),r()(),C(10,ti,2,0,"div",6),n(11,"contacts-table",7),f("delete",function(d){return i.delete(d)}),r()),e&2&&(a(5),h(i.total()),a(5),y(i.loading()?10:-1),a(),p("contacts",i.contacts()??X(3,ei)))},dependencies:[D,Be,P],styles:["[_nghost-%COMP%]{display:block}"]})};function Vt(){let o=c(Ve),t=g(null),e=g(!0),i=g(null);async function s(d){e.set(!0),i.set(null);try{let N=await v(o.getProductByIdSlug(d));t.set(N)}catch{i.set("Error al carga el producto")}finally{e.set(!1)}}return{product:t,loading:e,error:i,loadProducts:s}}var Pe=`${ue.baseUrl}/categories`,ii={id:"new",name:""},fe=class o{http=c(pe);toastService=c(ge);categoriesCache=new Map;getAll(){return this.categoriesCache.size?B(Array.from(this.categoriesCache.values())):this.http.get(Pe).pipe(L(t=>t.forEach(e=>this.categoriesCache.set(e.id,e))))}getById(t){return t==="new"?B(ii):this.categoriesCache.has(t)?B(this.categoriesCache.get(t)):this.http.get(`${Pe}/${t}`).pipe(L(e=>this.categoriesCache.set(t,e)))}create(t){return this.toastService.activateLoading(),this.http.post(Pe,t).pipe(L(e=>{this.insertOrUpdateCache(e),this.toastService.activateSuccess()}),z(()=>this.toastService.deactivateLoading()))}update(t,e){return this.toastService.activateLoading(),this.http.patch(`${Pe}/${t}`,e).pipe(L(i=>{this.insertOrUpdateCache(i),this.toastService.activateSuccess()}),z(()=>this.toastService.deactivateLoading()))}delete(t){return this.toastService.activateLoading(),this.http.delete(`${Pe}/${t}`).pipe(L(()=>{this.categoriesCache.delete(t),this.toastService.activateSuccess()}),z(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(t){this.categoriesCache.set(t.id,t)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=de({token:o,factory:o.\u0275fac,providedIn:"root"})};var ze=class o{http=c(pe);baseUrl=ue.baseUrl;uploadProductImage(t){let e=new FormData;return e.append("file",t),this.http.post(`${this.baseUrl}/files/products`,e).pipe(G(i=>this.extractFileName(i)))}extractFileName(t){if(!t)return"";if(typeof t=="string")return this.normalizeFileName(t);if(Array.isArray(t)){let e=t[0];return e?typeof e=="string"?this.normalizeFileName(e):this.normalizeFileName(e.id||e.fileName||e.filename||e.name||""):""}if(t.files?.length){let e=t.files[0];return this.normalizeFileName(e?.id||e?.fileName||e?.filename||e?.name||e?.url||"")}return this.normalizeFileName(t.id||t.fileName||t.filename||t.name||t.secureUrl||t.url||t.path||"")}normalizeFileName(t){return t?/^https?:\/\//.test(t)&&t.split("/").at(-1)||t:""}static \u0275fac=function(e){return new(e||o)};static \u0275prov=de({token:o,factory:o.\u0275fac,providedIn:"root"})};var ni=(o,t)=>t.id;function oi(o,t){o&1&&(n(0,"span",21),l(1,"Cargando categor\xEDas..."),r())}function ri(o,t){if(o&1){let e=I();n(0,"button",32),f("click",function(){let s=F(e).$implicit,d=b(2);return R(d.onTagsClicked(s.name))}),l(1),r()}if(o&2){let e=t.$implicit,i=b(2);M("btn-primary",i.isTagSelected(e.name)),a(),T(" ",e.name," ")}}function ai(o,t){if(o&1&&H(0,ri,2,3,"button",31,ni),o&2){let e=b();j(e.categories)}}function li(o,t){o&1&&(n(0,"p",28),l(1,"Subiendo im\xE1genes..."),r())}function si(o,t){if(o&1&&(n(0,"p",29),l(1),r()),o&2){let e=b();a(),h(e.imageUploadError)}}function mi(o,t){if(o&1){let e=I();n(0,"div",33),m(1,"img",34),xe(2,"productImage"),n(3,"button",35),f("click",function(){let s=F(e).$implicit,d=b(2);return R(d.removeImage(s))}),l(4," Quitar "),r()()}if(o&2){let e=t.$implicit;a(),p("src",ke(2,1,e),Re)}}function ci(o,t){if(o&1&&(n(0,"div",30),H(1,mi,5,3,"div",33,yt),r()),o&2){let e=b();a(),j(e.imageNames())}}function di(o,t){o&1&&(n(0,"p",21),l(1,"A\xFAn no cargaste im\xE1genes para este producto."),r())}var qe=class o{product=_.required();router=c(k);productsService=c(Ve);configurationService=c(ce);categoryService=c(fe);filesService=c(ze);defaultCategory={id:"default-sin-gluten",name:"Sin Gluten"};fb=c(se);productForm=this.fb.group({title:["",E.required],slug:["",[E.required,E.pattern(Ee.slugPattern)]],unitOfMeasure:["",[E.required]],description:["",E.required],price:[1,[E.required,E.min(1)]],stock:[1,[E.required,E.min(1)]],tags:this.fb.nonNullable.control([]),imagesName:this.fb.nonNullable.control([])});categories=[];loadingCategories=!1;uploadingImages=!1;imageUploadError=null;ngOnInit(){this.productForm.reset(this.product()),this.syncInitialImagesAndTags(),this.loadCategories()}loadCategories(){this.loadingCategories=!0,this.categoryService.getAll().subscribe({next:t=>{this.categories=t.length?t:[this.defaultCategory]},error:()=>{this.categories=[this.defaultCategory],this.loadingCategories=!1},complete:()=>{this.loadingCategories=!1}})}syncInitialImagesAndTags(){let t=this.product(),e=this.mapProductImages(t),i=(t?.tags??[]).filter(s=>!!s);this.productForm.patchValue({imagesName:e,tags:i})}mapProductImages(t){if(!t)return[];let e=(t.imagesName??[]).filter(s=>!!s);if(e.length)return e;let i=t?.images??[];return Array.isArray(i)?i.filter(s=>!!s).map(s=>/^https?:\/\//.test(s)?s.split("/").at(-1)??s:s):[]}get imagesNameControl(){return this.productForm.get("imagesName")}imageNames(){return this.imagesNameControl?.value??[]}onFilesSelected(t){let e=t.target,i=e.files;if(!i||i.length===0)return;this.uploadingImages=!0,this.imageUploadError=null;let s=Array.from(i).map(d=>this.filesService.uploadProductImage(d));bt(s).subscribe({next:d=>{let N=d.filter(Se=>!!Se);if(!N.length){this.imageUploadError="No se pudo subir la imagen seleccionada.";return}let _e=[...this.imageNames(),...N];this.imagesNameControl?.setValue(_e),this.imagesNameControl?.markAsDirty()},error:()=>{this.imageUploadError="Error al subir la imagen. Intenta nuevamente.",this.uploadingImages=!1,e&&(e.value="")},complete:()=>{this.uploadingImages=!1,e&&(e.value="")}})}removeImage(t){let e=this.imageNames().filter(i=>i!==t);this.imagesNameControl?.setValue(e),this.imagesNameControl?.markAsDirty()}isTagSelected(t){return(this.productForm.get("tags")?.value??[]).some(i=>i.toLowerCase()===t.toLowerCase())}onTagsClicked(t){let e=t.toLowerCase(),i=[...this.productForm.get("tags")?.value??[]];i.includes(e)?i.splice(i.indexOf(e),1):i.push(e),this.productForm.get("tags")?.setValue(i)}async onSubmit(){if(this.productForm.markAllAsTouched(),!this.imageNames().length){this.imageUploadError="Primero sube al menos una imagen del producto.";return}let t=this.productForm.value,e=(t.imagesName??[]).filter(N=>!!N),i=(t.tags??[]).filter(N=>!!N),s=t.slug&&t.slug.length?t.slug:this.generateSlug(t.title??""),d=ht(Z({},t),{slug:s,imagesName:e,tags:i});this.product().id==="new"?await v(this.productsService.createProduct(d)):await v(this.productsService.updateProduct(this.product().id,d)),this.router.navigate(["/admin/products"])}controlPresionado=!1;handleKeyboardEvent(t){t.key==="Control"?this.controlPresionado=!0:t.key==="Enter"&&this.controlPresionado&&this.onSubmit()}handleKeyboardUp(t){t.key==="Control"&&(this.controlPresionado=!1)}generateSlug(t){return t.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-")}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["product-details"]],hostBindings:function(e,i){e&1&&f("keydown",function(d){return i.handleKeyboardEvent(d)},V)("keyup",function(d){return i.handleKeyboardUp(d)},V)},inputs:{product:[1,"product"]},decls:53,vars:22,consts:[[1,"text-2xl","font-bold"],[1,"divider"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"text-xl","font-bold","h-12"],["for","title"],["type","text","placeholder","T\xEDtulo","formControlName","title",1,"input","input-bordered","w-full"],[3,"control"],["for","unitOfMeasure"],["type","text","placeholder","Unidad de medida","formControlName","unitOfMeasure",1,"input","input-bordered","w-full"],["for","description"],["placeholder","Descripci\xF3n","rows","6","formControlName","description",1,"textarea","textarea-bordered","w-full"],[1,"text-lg","font-bold"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-2"],["for","price"],["type","number","placeholder","Precio","formControlName","price",1,"input","input-bordered","w-full"],["for","stock"],["type","number","placeholder","Stock","formControlName","stock",1,"input","input-bordered","w-full"],[1,"flex","flex-col","gap-1"],[1,"-mx-2","px-2"],[1,"flex","gap-2","overflow-x-auto","pb-2","snap-x","snap-mandatory"],[1,"text-sm","opacity-70"],[1,"flex","justify-end","h-12"],["type","submit",1,"btn","btn-secondary"],[1,"mt-2","space-y-3"],[1,"font-semibold","text-sm"],["type","file","multiple","","accept","image/*",1,"file-input","file-input-bordered","w-full",3,"change","disabled"],[1,"text-xs","opacity-70"],[1,"text-sm","text-primary"],[1,"text-sm","text-error"],[1,"grid","grid-cols-2","gap-3"],["type","button",1,"btn","btn-sm","whitespace-nowrap","snap-start",3,"btn-primary"],["type","button",1,"btn","btn-sm","whitespace-nowrap","snap-start",3,"click"],[1,"relative","rounded-lg","overflow-hidden","border","border-base-300","bg-base-200"],["alt","Imagen del producto",1,"w-full","h-32","object-cover","object-center",3,"src"],["type","button",1,"btn","btn-xs","btn-error","absolute","top-2","right-2",3,"click"]],template:function(e,i){if(e&1&&(n(0,"h1",0),l(1),r(),m(2,"div",1),n(3,"form",2),f("ngSubmit",function(){return i.onSubmit()}),n(4,"div",3)(5,"h2",4),l(6,"Datos generales"),r(),n(7,"label",5),l(8,"Titulo"),r(),m(9,"input",6)(10,"form-error-label",7),n(11,"label",8),l(12,"Unidad de medida"),r(),m(13,"input",9)(14,"form-error-label",7),n(15,"label",10),l(16,"Descripci\xF3n"),r(),m(17,"textarea",11)(18,"form-error-label",7),n(19,"h2",12),l(20,"Datos de venta"),r(),n(21,"div",13)(22,"div")(23,"label",14),l(24,"Precio"),r(),m(25,"input",15)(26,"form-error-label",7),r(),n(27,"div")(28,"label",16),l(29,"Stock"),r(),m(30,"input",17)(31,"form-error-label",7),r()(),n(32,"div",18)(33,"h2",12),l(34,"Categor\xEDas"),r(),n(35,"div",19)(36,"div",20),C(37,oi,2,0,"span",21)(38,ai,2,0),r()()()(),n(39,"div",3)(40,"div",22)(41,"button",23),l(42," Guardar "),r()(),n(43,"div",24)(44,"label",25),l(45,"Im\xE1genes del producto"),r(),n(46,"input",26),f("change",function(d){return i.onFilesSelected(d)}),r(),n(47,"p",27),l(48," Sub\xED una o varias im\xE1genes antes de guardar el producto. "),r(),C(49,li,2,0,"p",28),C(50,si,2,1,"p",29),C(51,ci,3,0,"div",30)(52,di,2,0,"p",21),r()()()),e&2){let s,d,N,_e,Se;a(),h(i.product().title||"Crear nuevo producto"),a(2),p("formGroup",i.productForm),a(6),M("border-red-500",((s=i.productForm.get("title"))==null?null:s.errors)??!1),a(),p("control",i.productForm.get("title")),a(3),M("border-red-500",((d=i.productForm.get("unitOfMeasure"))==null?null:d.errors)??!1),a(),p("control",i.productForm.get("unitOfMeasure")),a(3),M("border-red-500",((N=i.productForm.get("description"))==null?null:N.errors)??!1),a(),p("control",i.productForm.get("description")),a(7),M("border-red-500",((_e=i.productForm.get("price"))==null?null:_e.errors)??!1),a(),p("control",i.productForm.get("price")),a(4),M("border-red-500",((Se=i.productForm.get("stock"))==null?null:Se.errors)??!1),a(),p("control",i.productForm.get("stock")),a(6),y(i.loadingCategories?37:38),a(9),p("disabled",i.uploadingImages),a(3),y(i.uploadingImages?49:-1),a(),y(i.imageUploadError?50:-1),a(),y(i.imageNames().length?51:52)}},dependencies:[me,re,ie,kt,ne,oe,ae,le,q,Ue],styles:["[_nghost-%COMP%]{display:block}"]})};function pi(o,t){o&1&&(n(0,"div",0),m(1,"loading"),r())}function ui(o,t){if(o&1&&m(0,"product-details",1),o&2){let e=b();p("product",e.product())}}var Ze=class o{activateRoute=c(ee);router=c(k);productId=te(this.activateRoute.params.pipe(G(t=>t.id)));paginationService=c(Ie);product;loading;error;loadProducts;constructor(){let{product:t,loading:e,error:i,loadProducts:s}=Vt();this.product=t,this.loading=e,this.error=i,this.loadProducts=s,$(()=>{let d=this.productId();this.loadProducts(d)}),$(()=>{this.error()&&this.router.navigate(["/admin/products"])})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["app-product-admin"]],decls:2,vars:2,consts:[[1,"min-h-[50vh]","gap-4"],[3,"product"]],template:function(e,i){if(e&1&&(C(0,pi,2,0,"div",0),C(1,ui,1,1,"product-details",1)),e&2){let s;y(i.loading()?0:-1),a(),y((s=i.product())!=null&&s.id?1:-1)}},dependencies:[P,qe],styles:["[_nghost-%COMP%]{display:block}"]})};var Ut=o=>["/admin/products",o],gi=(o,t)=>t.id;function fi(o,t){if(o&1){let e=I();n(0,"tr")(1,"th")(2,"label"),l(3),r()(),n(4,"td")(5,"div",3)(6,"div",4)(7,"div",5),m(8,"img",6),xe(9,"productImage"),r()(),n(10,"div")(11,"a",7),l(12),r(),n(13,"div",8),l(14),r()()()(),n(15,"td"),l(16),r(),n(17,"td"),l(18),xe(19,"currency"),r(),n(20,"td"),l(21),r(),n(22,"th",9)(23,"a",10),S(),n(24,"svg",11),m(25,"path",12),r()(),A(),n(26,"a",13),f("click",function(){let s=F(e).$implicit,d=b();return R(d.onDelete(s.id))}),S(),n(27,"svg",11),m(28,"path",14),r()()()()}if(o&2){let e=t.$implicit,i=t.$index,s=b();a(3),T(" ",(s.currentPage()-1)*s.countPage()+(i+1)," "),a(5),p("src",ke(9,10,e.imagesName),Re)("alt",e.title),a(3),p("routerLink",O(14,Ut,e.id)),a(),T(" ",e.title," "),a(2),T(" ",e.description," "),a(2),h(e.unitOfMeasure),a(2),h(ke(19,12,e.price)),a(3),h(e.stock),a(2),p("routerLink",O(16,Ut,e.id))}}var Ke=class o{products=_.required();currentPage=_.required();countPage=_.required();delete=new K;confirmDialog;async onDelete(t){await this.confirmDialog.open("\xBFEst\xE1s seguro que deseas eliminar este producto?")&&this.delete.emit(t)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["products-table"]],viewQuery:function(e,i){if(e&1&&Q(U,5),e&2){let s;W(s=J())&&(i.confirmDialog=s.first)}},inputs:{products:[1,"products"],currentPage:[1,"currentPage"],countPage:[1,"countPage"]},outputs:{delete:"delete"},decls:18,vars:0,consts:[[1,"overflow-y-auto","max-h-[75vh]","overflow-x-auto","border","border-slate-700","rounded-xl"],[1,"table","table-zebra","w-full"],[1,"sticky","top-0","bg-slate-900","z-10"],[1,"flex","items-center","gap-3"],[1,"avatar"],[1,"mask","mask-squircle","h-12","w-12"],[3,"src","alt"],[1,"font-bold","hover:text-primary","transition-colors","duration-300",3,"routerLink"],[1,"text-sm","opacity-50"],[1,"flex","justify-end"],[1,"btn","btn-ghost","text-primary","btn-xs",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-6"],["d","M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"],[1,"btn","btn-ghost","text-error","btn-xs",3,"click"],["fill-rule","evenodd","d","M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z","clip-rule","evenodd"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),m(4,"th"),n(5,"th"),l(6,"T\xEDtulo"),r(),n(7,"th"),l(8,"Unidad de medida"),r(),n(9,"th"),l(10,"Precio"),r(),n(11,"th"),l(12,"Stock"),r(),m(13,"th"),r()(),n(14,"tbody"),H(15,fi,29,18,"tr",null,gi),r()()(),m(17,"confirm-dialog")),e&2&&(a(15),j(i.products()))},dependencies:[D,U,Ue,St],styles:["[_nghost-%COMP%]{display:block}"]})};var vi=()=>[],Qe=class o{paginationService=c(Ie);productResponse;loading;error;loadProducts;productPerPage=g(10);constructor(){let{productResponse:t,loading:e,error:i,loadProducts:s}=Ft();this.productResponse=t,this.loading=e,this.error=i,this.loadProducts=s,$(()=>{let d=this.paginationService.currentPage(),N=this.productPerPage(),_e=(d-1)*N,Se=N;this.loadProducts({offset:_e,limit:Se})})}updateProductsPerPage(t){this.productPerPage.set(t),this.paginationService.setCurrentPage(1)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["products-admin"]],decls:22,vars:7,consts:[["selectPerPage",""],[1,"text-2xl","font-bold"],[1,"text-lg"],[1,"text-primary"],[1,"flex","gap-2","items-center","h-20"],[1,"select","select-bordered","w-32",3,"change"],["value","10"],["value","20"],["value","50"],["value","100"],[3,"pages","currentPage"],[1,"flex","flex-1"],["routerLink","/admin/products/new",1,"btn","btn-primary"],[3,"products","currentPage","countPage"]],template:function(e,i){if(e&1){let s=I();n(0,"h1",1),l(1,"Listado de productos"),r(),n(2,"h3",2),l(3," Total de productos "),n(4,"span",3),l(5),r()(),n(6,"div",4)(7,"select",5,0),f("change",function(){F(s);let N=Le(8);return R(i.updateProductsPerPage(+N.value))}),n(9,"option",6),l(10,"10"),r(),n(11,"option",7),l(12,"20"),r(),n(13,"option",8),l(14,"50"),r(),n(15,"option",9),l(16,"100"),r()(),m(17,"pagination",10)(18,"div",11),n(19,"button",12),l(20," Cargar producto "),r()(),m(21,"products-table",13)}if(e&2){let s,d,N;a(5),h((s=i.productResponse())==null?null:s.count),a(12),p("pages",((d=i.productResponse())==null?null:d.pages)??0)("currentPage",i.paginationService.currentPage()),a(4),p("products",((N=i.productResponse())==null?null:N.products)??X(6,vi))("currentPage",i.paginationService.currentPage())("countPage",i.productPerPage())}},dependencies:[Ke,Rt,D],styles:["[_nghost-%COMP%]{display:block}"]})};var We=class o{recipe=_.required();router=c(k);recipeService=c(De);configurationService=c(ce);fb=c(se);recipeForm=this.fb.group({title:["",E.required],text:["",E.required]});ngOnInit(){this.recipeForm.reset(this.recipe())}async onSubmit(){this.recipeForm.markAllAsTouched();let t=this.recipeForm.value,e=Z({},t);this.recipe().id==="new"?await v(this.recipeService.create(e)):await v(this.recipeService.update(this.recipe().id,e)),this.router.navigate(["/admin/recipes"])}controlPresionado=!1;handleKeyboardEvent(t){t.key==="Control"?this.controlPresionado=!0:t.key==="Enter"&&this.controlPresionado&&this.onSubmit()}handleKeyboardUp(t){t.key==="Control"&&(this.controlPresionado=!1)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["recipe-details"]],hostBindings:function(e,i){e&1&&f("keydown",function(d){return i.handleKeyboardEvent(d)},V)("keyup",function(d){return i.handleKeyboardUp(d)},V)},inputs:{recipe:[1,"recipe"]},decls:16,vars:8,consts:[[1,"flex","justify-between","items-center","mb-2"],[1,"text-2xl","font-bold"],[1,"divider"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"text-xl","font-bold","h-12"],["type","text","placeholder","T\xEDtulo","formControlName","title",1,"input","input-bordered","w-full"],[3,"control"],["placeholder","Detalles","rows","20","formControlName","text",1,"textarea","textarea-bordered","w-full"],[1,"flex","justify-end","h-12"],["type","submit",1,"btn","btn-secondary"]],template:function(e,i){if(e&1&&(n(0,"div",0)(1,"h1",1),l(2),r()(),m(3,"div",2),n(4,"form",3),f("ngSubmit",function(){return i.onSubmit()}),n(5,"div",4)(6,"h2",5),l(7,"Datos generales"),r(),m(8,"input",6)(9,"form-error-label",7)(10,"textarea",8)(11,"form-error-label",7),r(),n(12,"div",4)(13,"div",9)(14,"button",10),l(15,"Guardar"),r()()()()),e&2){let s,d;a(2),T(" ",i.recipe().title||"Crear nueva receta"," "),a(2),p("formGroup",i.recipeForm),a(4),M("border-red-500",((s=i.recipeForm.get("title"))==null?null:s.errors)??!1),a(),p("control",i.recipeForm.get("title")),a(),M("border-red-500",((d=i.recipeForm.get("text"))==null?null:d.errors)??!1),a(),p("control",i.recipeForm.get("text"))}},dependencies:[me,re,ie,ne,oe,ae,le,q],styles:["[_nghost-%COMP%]{display:block}"]})};function hi(o,t){o&1&&(n(0,"div",0),m(1,"loading"),r())}function bi(o,t){if(o&1&&m(0,"recipe-details",1),o&2){let e=b();p("recipe",e.recipe())}}var Je=class o{activateRoute=c(ee);router=c(k);recipeService=c(De);recipeId=te(this.activateRoute.params.pipe(G(t=>t.id)));recipe=g(null);loading=g(!0);error=g(null);constructor(){$(()=>{let t=this.recipeId();this.loadRecipe(t)})}async loadRecipe(t){this.loading.set(!0),this.error.set(null);try{let e=await v(this.recipeService.getById(t));this.recipe.set(e)}catch{this.error.set("Error al cargar la receta"),this.router.navigate(["/admin/recipes"])}finally{this.loading.set(!1)}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["recipe-admin"]],decls:2,vars:2,consts:[[1,"min-h-[50vh]","gap-4"],[3,"recipe"]],template:function(e,i){if(e&1&&(C(0,hi,2,0,"div",0),C(1,bi,1,1,"recipe-details",1)),e&2){let s;y(i.loading()?0:-1),a(),y((s=i.recipe())!=null&&s.id?1:-1)}},dependencies:[P,We],styles:["[_nghost-%COMP%]{display:block}"]})};var Ot=o=>["/admin/recipes",o],Ci=(o,t)=>t.id;function yi(o,t){if(o&1){let e=I();n(0,"tr")(1,"th")(2,"label"),l(3),r()(),n(4,"td")(5,"a",3),l(6),r()(),n(7,"td")(8,"div",4),l(9),xe(10,"slice"),r()(),n(11,"th",5)(12,"a",6),S(),n(13,"svg",7),m(14,"path",8),r()(),A(),n(15,"a",9),f("click",function(){let s=F(e).$implicit,d=b();return R(d.onDelete(s.id))}),S(),n(16,"svg",7),m(17,"path",10),r()()()()}if(o&2){let e=t.$implicit,i=t.$index;a(3),T(" ",i+1," "),a(2),p("routerLink",O(9,Ot,e.id)),a(),T(" ",e.title," "),a(3),T(" ",_t(10,5,e.text,0,50),"... "),a(3),p("routerLink",O(11,Ot,e.id))}}var Xe=class o{recipes=_.required();delete=new K;confirmDialog;async onDelete(t){await this.confirmDialog.open("\xBFEst\xE1s seguro que deseas eliminar esta receta?")&&this.delete.emit(t)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["recipes-table"]],viewQuery:function(e,i){if(e&1&&Q(U,5),e&2){let s;W(s=J())&&(i.confirmDialog=s.first)}},inputs:{recipes:[1,"recipes"]},outputs:{delete:"delete"},decls:14,vars:0,consts:[[1,"overflow-y-auto","max-h-[75vh]","overflow-x-auto","border","border-slate-700","rounded-xl"],[1,"table","table-zebra","w-full"],[1,"sticky","top-0","bg-slate-900","z-10"],[1,"font-bold","hover:text-primary","transition-colors","duration-300",3,"routerLink"],[1,"text-sm","opacity-70"],[1,"flex","justify-end"],[1,"btn","btn-ghost","text-primary","btn-xs",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-6"],["d","M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"],[1,"btn","btn-ghost","text-error","btn-xs",3,"click"],["fill-rule","evenodd","d","M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z","clip-rule","evenodd"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),m(4,"th"),n(5,"th"),l(6,"T\xEDtulo"),r(),n(7,"th"),l(8,"Texto"),r(),m(9,"th"),r()(),n(10,"tbody"),H(11,yi,18,13,"tr",null,Ci),r()()(),m(13,"confirm-dialog")),e&2&&(a(11),j(i.recipes()))},dependencies:[D,U,wt],styles:["[_nghost-%COMP%]{display:block}"]})};var xi=()=>[];function _i(o,t){o&1&&(n(0,"div",6),m(1,"loading"),r())}var Ye=class o{recipeService=c(De);recipes=g(null);total=Y(()=>this.recipes()?.length??0);loading=g(!0);error=g(null);ngOnInit(){this.getRecipes()}async getRecipes(){this.loading.set(!0),this.error.set(null);try{let t=await v(this.recipeService.getAll());this.recipes.set(t)}catch{this.error.set("Error al cargar las recetas")}finally{this.loading.set(!1)}}async delete(t){try{await v(this.recipeService.delete(t)),this.recipes.set(this.recipes()?.filter(e=>e.id!==t))}catch(e){console.error("Error al eliminar",e),this.error.set("No se pudo eliminar la receta.")}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["recipes-admin"]],decls:12,vars:4,consts:[[1,"text-2xl","font-bold"],[1,"text-lg"],[1,"text-primary"],[1,"flex","gap-2","items-center","h-20"],[1,"flex","flex-1"],["routerLink","/admin/recipes/new",1,"btn","btn-primary"],[1,"min-h-[50vh]","gap-4"],[3,"delete","recipes"]],template:function(e,i){e&1&&(n(0,"h1",0),l(1,"Listado de recetas"),r(),n(2,"h3",1),l(3," Total de recetas: "),n(4,"span",2),l(5),r()(),n(6,"div",3),m(7,"div",4),n(8,"button",5),l(9," Cargar receta "),r()(),C(10,_i,2,0,"div",6),n(11,"recipes-table",7),f("delete",function(d){return i.delete(d)}),r()),e&2&&(a(5),h(i.total()),a(5),y(i.loading()?10:-1),a(),p("recipes",i.recipes()??X(3,xi)))},dependencies:[D,Xe,P],styles:["[_nghost-%COMP%]{display:block}"]})};var Me=`${ue.baseUrl}/users`,Si={id:"new",email:"",fullName:"",roles:[],deletedAt:null},ve=class o{http=c(pe);usersCache=new Map;toastService=c(ge);getAll(){return this.usersCache.size?B(Array.from(this.usersCache.values())):this.http.get(Me).pipe(L(t=>t.forEach(e=>this.usersCache.set(e.id,e))))}getById(t){return t==="new"?B(Si):this.usersCache.has(t)?B(this.usersCache.get(t)):this.http.get(`${Me}/${t}`).pipe(L(e=>this.usersCache.set(t,e)))}create(t){return this.toastService.activateLoading(),this.http.post(Me,t).pipe(L(e=>{this.insertOrUpdateCache(e),this.toastService.activateSuccess()}),z(()=>this.toastService.deactivateLoading()))}update(t,e){return this.toastService.activateLoading(),this.http.patch(`${Me}/${t}`,e).pipe(L(i=>{this.insertOrUpdateCache(i),this.toastService.activateSuccess()}),z(()=>this.toastService.deactivateLoading()))}delete(t){return this.toastService.activateLoading(),this.http.delete(`${Me}/${t}`).pipe(L(async()=>{this.usersCache.delete(t),this.toastService.activateSuccess()}),z(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(t){this.usersCache.set(t.id,t)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=de({token:o,factory:o.\u0275fac,providedIn:"root"})};var et=class o{user=_.required();router=c(k);userService=c(ve);configurationService=c(ce);fb=c(se);userForm=this.fb.group({fullName:["",E.required],email:["",[E.required,E.email]],roles:[[""],E.required]});ngOnInit(){this.userForm.reset(this.user())}async onSubmit(){this.userForm.markAllAsTouched();let t=this.userForm.value,e=Z({},t);this.user().id==="new"?await v(this.userService.create(e)):await v(this.userService.update(this.user().id,e)),this.router.navigate(["/admin/users"])}controlPresionado=!1;handleKeyboardEvent(t){t.key==="Control"?this.controlPresionado=!0:t.key==="Enter"&&this.controlPresionado&&this.onSubmit()}handleKeyboardUp(t){t.key==="Control"&&(this.controlPresionado=!1)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["user-details"]],hostBindings:function(e,i){e&1&&f("keydown",function(d){return i.handleKeyboardEvent(d)},V)("keyup",function(d){return i.handleKeyboardUp(d)},V)},inputs:{user:[1,"user"]},decls:17,vars:11,consts:[[1,"text-2xl","font-bold"],[1,"divider"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"text-xl","font-bold","h-12"],["type","text","placeholder","Nombre completo","formControlName","fullName",1,"input","input-bordered","w-full"],[3,"control"],["type","email","placeholder","Correo electr\xF3nico","formControlName","email",1,"input","input-bordered","w-full"],["type","text","placeholder","Roles","formControlName","roles",1,"input","input-bordered","w-full"],[1,"flex","justify-end","h-12"],["type","submit",1,"btn","btn-secondary"]],template:function(e,i){if(e&1&&(n(0,"h1",0),l(1),r(),m(2,"div",1),n(3,"form",2),f("ngSubmit",function(){return i.onSubmit()}),n(4,"div",3)(5,"h2",4),l(6,"Datos generales"),r(),m(7,"input",5)(8,"form-error-label",6)(9,"input",7)(10,"form-error-label",6)(11,"input",8)(12,"form-error-label",6),r(),n(13,"div",3)(14,"div",9)(15,"button",10),l(16,"Guardar"),r()()()()),e&2){let s,d,N;a(),h(i.user().fullName||"Crear nuevo usuario"),a(2),p("formGroup",i.userForm),a(4),M("border-red-500",((s=i.userForm.get("fullName"))==null?null:s.errors)??!1),a(),p("control",i.userForm.get("fullName")),a(),M("border-red-500",((d=i.userForm.get("email"))==null?null:d.errors)??!1),a(),p("control",i.userForm.get("email")),a(),M("border-red-500",((N=i.userForm.get("roles"))==null?null:N.errors)??!1),a(),p("control",i.userForm.get("roles"))}},dependencies:[me,re,ie,ne,oe,ae,le,q],styles:["[_nghost-%COMP%]{display:block}"]})};function wi(o,t){o&1&&(n(0,"div",0),m(1,"loading"),r())}function Di(o,t){if(o&1&&m(0,"user-details",1),o&2){let e=b();p("user",e.user())}}var tt=class o{activateRoute=c(ee);router=c(k);userService=c(ve);userId=te(this.activateRoute.params.pipe(G(t=>t.id)));user=g(null);loading=g(!0);error=g(null);constructor(){$(()=>{let t=this.userId();this.loadUser(t)})}async loadUser(t){this.loading.set(!0),this.error.set(null);try{let e=await v(this.userService.getById(t));this.user.set(e)}catch{this.error.set("Error al cargar el usuario"),this.router.navigate(["/admin/users"])}finally{this.loading.set(!1)}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["user-admin"]],decls:2,vars:2,consts:[[1,"min-h-[50vh]","gap-4"],[3,"user"]],template:function(e,i){if(e&1&&(C(0,wi,2,0,"div",0),C(1,Di,1,1,"user-details",1)),e&2){let s;y(i.loading()?0:-1),a(),y((s=i.user())!=null&&s.id?1:-1)}},dependencies:[P,et],styles:["[_nghost-%COMP%]{display:block}"]})};var Ht=o=>["/admin/users",o],Ei=(o,t)=>t.id;function Ti(o,t){if(o&1){let e=I();n(0,"tr")(1,"th"),l(2),r(),n(3,"td")(4,"a",3),l(5),r()(),n(6,"td"),l(7),r(),n(8,"td"),l(9),r(),n(10,"th",4)(11,"a",5),S(),n(12,"svg",6),m(13,"path",7),r()(),A(),n(14,"a",8),f("click",function(){let s=F(e).$implicit,d=b();return R(d.onDelete(s.id))}),S(),n(15,"svg",6),m(16,"path",9),r()()()()}if(o&2){let e=t.$implicit,i=t.$index,s=b();a(2),h(i+1),a(2),p("routerLink",O(6,Ht,e.id)),a(),T(" ",e.fullName," "),a(2),h(e.email),a(2),h(s.getUserRolesPlain(e)),a(2),p("routerLink",O(8,Ht,e.id))}}var it=class o{users=_.required();delete=new K;confirmDialog;async onDelete(t){await this.confirmDialog.open("\xBFEst\xE1s seguro que deseas eliminar este usuario?")&&this.delete.emit(t)}getUserRolesPlain(t){return t.roles.join(", ")}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["users-table"]],viewQuery:function(e,i){if(e&1&&Q(U,5),e&2){let s;W(s=J())&&(i.confirmDialog=s.first)}},inputs:{users:[1,"users"]},outputs:{delete:"delete"},decls:16,vars:0,consts:[[1,"overflow-y-auto","max-h-[75vh]","overflow-x-auto","border","border-slate-700","rounded-xl"],[1,"table","table-zebra","w-full"],[1,"sticky","top-0","bg-slate-900","z-10"],[1,"font-bold","hover:text-primary","transition-colors","duration-300",3,"routerLink"],[1,"flex","justify-end"],[1,"btn","btn-ghost","text-primary","btn-xs",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-6"],["d","M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"],[1,"btn","btn-ghost","text-error","btn-xs",3,"click"],["fill-rule","evenodd","d","M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z","clip-rule","evenodd"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),m(4,"th"),n(5,"th"),l(6,"Nombre completo"),r(),n(7,"th"),l(8,"Email"),r(),n(9,"th"),l(10,"Rol"),r(),m(11,"th"),r()(),n(12,"tbody"),H(13,Ti,17,10,"tr",null,Ei),r()()(),m(15,"confirm-dialog")),e&2&&(a(13),j(i.users()))},dependencies:[D,U],styles:["[_nghost-%COMP%]{display:block}"]})};var ki=()=>[];function Pi(o,t){o&1&&(n(0,"div",6),m(1,"loading"),r())}var nt=class o{userService=c(ve);users=g(null);total=Y(()=>this.users()?.length??0);loading=g(!0);error=g(null);ngOnInit(){this.getUsers()}async getUsers(){this.loading.set(!0),this.error.set(null);try{let t=await v(this.userService.getAll());this.users.set(t)}catch{this.error.set("Error al cargar los usuarios")}finally{this.loading.set(!1)}}async delete(t){try{await v(this.userService.delete(t)),this.users.set(this.users()?.filter(e=>e.id!==t))}catch(e){console.error("Error al eliminar",e),this.error.set("No se pudo eliminar el usuario.")}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["app-users-admin"]],decls:12,vars:4,consts:[[1,"text-2xl","font-bold"],[1,"text-lg"],[1,"text-primary"],[1,"flex","gap-2","items-center","h-20"],[1,"flex","flex-1"],["routerLink","/admin/contacts/new",1,"btn","btn-primary"],[1,"min-h-[50vh]","gap-4"],[3,"delete","users"]],template:function(e,i){e&1&&(n(0,"h1",0),l(1,"Listado de usuarios"),r(),n(2,"h3",1),l(3," Total de usuarios: "),n(4,"span",2),l(5),r()(),n(6,"div",3),m(7,"div",4),n(8,"button",5),l(9," Cargar usuario "),r()(),C(10,Pi,2,0,"div",6),n(11,"users-table",7),f("delete",function(d){return i.delete(d)}),r()),e&2&&(a(5),h(i.total()),a(5),y(i.loading()?10:-1),a(),p("users",i.users()??X(3,ki)))},dependencies:[D,P,it],styles:["[_nghost-%COMP%]{display:block}"]})};var Ne=`${ue.baseUrl}/roles`,Mi={id:"new",name:"",description:""},he=class o{http=c(pe);toastService=c(ge);rolesCache=new Map;getAll(){return this.rolesCache.size?B(Array.from(this.rolesCache.values())):this.http.get(Ne).pipe(L(t=>t.forEach(e=>this.rolesCache.set(e.id,e))))}getById(t){return t==="new"?B(Mi):this.rolesCache.has(t)?B(this.rolesCache.get(t)):this.http.get(`${Ne}/${t}`).pipe(L(e=>this.rolesCache.set(t,e)))}create(t){return this.toastService.activateLoading(),this.http.post(Ne,t).pipe(L(e=>{this.insertOrUpdateCache(e),this.toastService.activateSuccess()}),z(()=>this.toastService.deactivateLoading()))}update(t,e){return this.toastService.activateLoading(),this.http.patch(`${Ne}/${t}`,e).pipe(L(i=>{this.insertOrUpdateCache(i),this.toastService.activateSuccess()}),z(()=>this.toastService.deactivateLoading()))}delete(t){return this.toastService.activateLoading(),this.http.delete(`${Ne}/${t}`).pipe(L(async()=>{this.rolesCache.delete(t),this.toastService.activateSuccess()}),z(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(t){this.rolesCache.set(t.id,t)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=de({token:o,factory:o.\u0275fac,providedIn:"root"})};var jt=o=>["/admin/roles",o],Ni=(o,t)=>t.id;function Fi(o,t){if(o&1){let e=I();n(0,"tr")(1,"th"),l(2),r(),n(3,"td")(4,"a",3),l(5),r()(),n(6,"td"),l(7),r(),n(8,"th",4)(9,"a",5),S(),n(10,"svg",6),m(11,"path",7),r()(),A(),n(12,"a",8),f("click",function(){let s=F(e).$implicit,d=b();return R(d.onDelete(s.id))}),S(),n(13,"svg",6),m(14,"path",9),r()()()()}if(o&2){let e=t.$implicit,i=t.$index;a(2),h(i+1),a(2),p("routerLink",O(5,jt,e.id)),a(),T(" ",e.name," "),a(2),h(e.description),a(2),p("routerLink",O(7,jt,e.id))}}var ot=class o{roles=_.required();delete=new K;confirmDialog;async onDelete(t){await this.confirmDialog.open("\xBFEst\xE1s seguro que deseas eliminar este rol?")&&this.delete.emit(t)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["roles-table"]],viewQuery:function(e,i){if(e&1&&Q(U,5),e&2){let s;W(s=J())&&(i.confirmDialog=s.first)}},inputs:{roles:[1,"roles"]},outputs:{delete:"delete"},decls:14,vars:0,consts:[[1,"overflow-y-auto","max-h-[75vh]","overflow-x-auto","border","border-slate-700","rounded-xl"],[1,"table","table-zebra","w-full"],[1,"sticky","top-0","bg-slate-900","z-10"],[1,"font-bold","hover:text-primary","transition-colors","duration-300",3,"routerLink"],[1,"flex","justify-end"],[1,"btn","btn-ghost","text-primary","btn-xs",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-6"],["d","M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"],[1,"btn","btn-ghost","text-error","btn-xs",3,"click"],["fill-rule","evenodd","d","M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z","clip-rule","evenodd"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),m(4,"th"),n(5,"th"),l(6,"Nombre"),r(),n(7,"th"),l(8,"Descripci\xF3n"),r(),m(9,"th"),r()(),n(10,"tbody"),H(11,Fi,15,9,"tr",null,Ni),r()()(),m(13,"confirm-dialog")),e&2&&(a(11),j(i.roles()))},dependencies:[D,U],styles:["[_nghost-%COMP%]{display:block}"]})};var Ri=()=>[];function Li(o,t){o&1&&(n(0,"div",6),m(1,"loading"),r())}var rt=class o{rolService=c(he);roles=g(null);total=Y(()=>this.roles()?.length??0);loading=g(!0);error=g(null);ngOnInit(){this.getRoles()}async getRoles(){this.loading.set(!0),this.error.set(null);try{let t=await v(this.rolService.getAll());this.roles.set(t)}catch{this.error.set("Error al cargar los roles")}finally{this.loading.set(!1)}}async delete(t){try{await v(this.rolService.delete(t)),this.roles.set(this.roles()?.filter(e=>e.id!==t))}catch(e){console.error("Error al eliminar",e),this.error.set("No se pudo eliminar el rol.")}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["roles-admin"]],decls:12,vars:4,consts:[[1,"text-2xl","font-bold"],[1,"text-lg"],[1,"text-primary"],[1,"flex","gap-2","items-center","h-20"],[1,"flex","flex-1"],["routerLink","/admin/roles/new",1,"btn","btn-primary"],[1,"min-h-[50vh]","gap-4"],[3,"delete","roles"]],template:function(e,i){e&1&&(n(0,"h1",0),l(1,"Listado de roles"),r(),n(2,"h3",1),l(3," Total de roles: "),n(4,"span",2),l(5),r()(),n(6,"div",3),m(7,"div",4),n(8,"button",5),l(9," Cargar rol "),r()(),C(10,Li,2,0,"div",6),n(11,"roles-table",7),f("delete",function(d){return i.delete(d)}),r()),e&2&&(a(5),h(i.total()),a(5),y(i.loading()?10:-1),a(),p("roles",i.roles()??X(3,Ri)))},dependencies:[D,P,ot],styles:["[_nghost-%COMP%]{display:block}"]})};var at=class o{role=_.required();router=c(k);roleService=c(he);configurationService=c(ce);fb=c(se);roleForm=this.fb.group({name:["",E.required],description:["",E.required]});ngOnInit(){this.roleForm.reset(this.role())}async onSubmit(){this.roleForm.markAllAsTouched();let t=this.roleForm.value,e=Z({},t);this.role().id==="new"?await v(this.roleService.create(e)):await v(this.roleService.update(this.role().id,e)),this.router.navigate(["/admin/roles"])}controlPresionado=!1;handleKeyboardEvent(t){t.key==="Control"?this.controlPresionado=!0:t.key==="Enter"&&this.controlPresionado&&this.onSubmit()}handleKeyboardUp(t){t.key==="Control"&&(this.controlPresionado=!1)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["role-details"]],hostBindings:function(e,i){e&1&&f("keydown",function(d){return i.handleKeyboardEvent(d)},V)("keyup",function(d){return i.handleKeyboardUp(d)},V)},inputs:{role:[1,"role"]},decls:15,vars:8,consts:[[1,"text-2xl","font-bold"],[1,"divider"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"text-xl","font-bold","h-12"],["type","text","placeholder","Nombre","formControlName","name",1,"input","input-bordered","w-full"],[3,"control"],["type","text","placeholder","Descripci\xF3n","formControlName","description",1,"input","input-bordered","w-full"],[1,"flex","justify-end","h-12"],["type","submit",1,"btn","btn-secondary"]],template:function(e,i){if(e&1&&(n(0,"h1",0),l(1),r(),m(2,"div",1),n(3,"form",2),f("ngSubmit",function(){return i.onSubmit()}),n(4,"div",3)(5,"h2",4),l(6,"Datos generales"),r(),m(7,"input",5)(8,"form-error-label",6)(9,"input",7)(10,"form-error-label",6),r(),n(11,"div",3)(12,"div",8)(13,"button",9),l(14,"Guardar"),r()()()()),e&2){let s,d;a(),h(i.role().name||"Crear nuevo rol"),a(2),p("formGroup",i.roleForm),a(4),M("border-red-500",((s=i.roleForm.get("name"))==null?null:s.errors)??!1),a(),p("control",i.roleForm.get("name")),a(),M("border-red-500",((d=i.roleForm.get("description"))==null?null:d.errors)??!1),a(),p("control",i.roleForm.get("description"))}},dependencies:[me,re,ie,ne,oe,ae,le,q],styles:["[_nghost-%COMP%]{display:block}"]})};function Ai(o,t){o&1&&(n(0,"div",0),m(1,"loading"),r())}function Ii(o,t){if(o&1&&m(0,"role-details",1),o&2){let e=b();p("role",e.role())}}var lt=class o{activateRoute=c(ee);router=c(k);roleService=c(he);roleId=te(this.activateRoute.params.pipe(G(t=>t.id)));role=g(null);loading=g(!0);error=g(null);constructor(){$(()=>{let t=this.roleId();this.loadRol(t)})}async loadRol(t){this.loading.set(!0),this.error.set(null);try{let e=await v(this.roleService.getById(t));this.role.set(e)}catch{this.error.set("Error al cargar el rol"),this.router.navigate(["/admin/roles"])}finally{this.loading.set(!1)}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["role-admin"]],decls:2,vars:2,consts:[[1,"min-h-[50vh]","gap-4"],[3,"role"]],template:function(e,i){if(e&1&&(C(0,Ai,2,0,"div",0),C(1,Ii,1,1,"role-details",1)),e&2){let s;y(i.loading()?0:-1),a(),y((s=i.role())!=null&&s.id?1:-1)}},dependencies:[P,at],styles:["[_nghost-%COMP%]{display:block}"]})};var $t=o=>["/admin/categories",o],Vi=(o,t)=>t.id;function Ui(o,t){if(o&1){let e=I();n(0,"tr")(1,"th"),l(2),r(),n(3,"td")(4,"a",3),l(5),r()(),n(6,"th",4)(7,"a",5),S(),n(8,"svg",6),m(9,"path",7),r()(),A(),n(10,"a",8),f("click",function(){let s=F(e).$implicit,d=b();return R(d.onDelete(s.id))}),S(),n(11,"svg",6),m(12,"path",9),r()()()()}if(o&2){let e=t.$implicit,i=t.$index;a(2),h(i+1),a(2),p("routerLink",O(4,$t,e.id)),a(),T(" ",e.name," "),a(2),p("routerLink",O(6,$t,e.id))}}var st=class o{categories=_.required();delete=new K;confirmDialog;async onDelete(t){await this.confirmDialog.open("\xBFEst\xE1s seguro que deseas eliminar esta categor\xEDa?")&&this.delete.emit(t)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["categories-table"]],viewQuery:function(e,i){if(e&1&&Q(U,5),e&2){let s;W(s=J())&&(i.confirmDialog=s.first)}},inputs:{categories:[1,"categories"]},outputs:{delete:"delete"},decls:12,vars:0,consts:[[1,"overflow-y-auto","max-h-[75vh]","overflow-x-auto","border","border-slate-700","rounded-xl"],[1,"table","table-zebra","w-full"],[1,"sticky","top-0","bg-slate-900","z-10"],[1,"font-bold","hover:text-primary","transition-colors","duration-300",3,"routerLink"],[1,"flex","justify-end"],[1,"btn","btn-ghost","text-primary","btn-xs",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-6"],["d",`M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15
                  12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z`],[1,"btn","btn-ghost","text-error","btn-xs",3,"click"],["fill-rule","evenodd","d",`M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005
                  13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567
                  48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815
                  1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488
                  49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75
                  0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z`,"clip-rule","evenodd"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),m(4,"th"),n(5,"th"),l(6,"Nombre"),r(),m(7,"th"),r()(),n(8,"tbody"),H(9,Ui,13,8,"tr",null,Vi),r()()(),m(11,"confirm-dialog")),e&2&&(a(9),j(i.categories()))},dependencies:[D,U],encapsulation:2})};var Oi=()=>[];function Hi(o,t){o&1&&(n(0,"div",6),m(1,"loading"),r())}var mt=class o{categoryService=c(fe);categories=g(null);total=Y(()=>this.categories()?.length??0);loading=g(!0);error=g(null);ngOnInit(){this.getCategories()}async getCategories(){this.loading.set(!0),this.error.set(null);try{let t=await v(this.categoryService.getAll());this.categories.set(t)}catch{this.error.set("Error al cargar las categor\xEDas")}finally{this.loading.set(!1)}}async delete(t){try{await v(this.categoryService.delete(t)),this.categories.set(this.categories()?.filter(e=>e.id!==t)??null)}catch(e){console.error("Error al eliminar categor\xEDa",e),this.error.set("No se pudo eliminar la categor\xEDa.")}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["categories-admin"]],decls:12,vars:4,consts:[[1,"text-2xl","font-bold"],[1,"text-lg"],[1,"text-primary"],[1,"flex","gap-2","items-center","h-20"],[1,"flex","flex-1"],["routerLink","/admin/categories/new",1,"btn","btn-primary"],[1,"min-h-[50vh]","gap-4"],[3,"delete","categories"]],template:function(e,i){e&1&&(n(0,"h1",0),l(1,"Listado de categor\xEDas"),r(),n(2,"h3",1),l(3," Total de categor\xEDas: "),n(4,"span",2),l(5),r()(),n(6,"div",3),m(7,"div",4),n(8,"button",5),l(9," Cargar categor\xEDa "),r()(),C(10,Hi,2,0,"div",6),n(11,"categories-table",7),f("delete",function(d){return i.delete(d)}),r()),e&2&&(a(5),h(i.total()),a(5),y(i.loading()?10:-1),a(),p("categories",i.categories()??X(3,Oi)))},dependencies:[D,P,st],encapsulation:2})};var ct=class o{category=_.required();router=c(k);categoryService=c(fe);fb=c(se);categoryForm=this.fb.group({name:["",E.required]});ngOnInit(){this.categoryForm.reset(this.category())}async onSubmit(){if(this.categoryForm.markAllAsTouched(),this.categoryForm.invalid)return;let t=Z({},this.categoryForm.value);this.category().id==="new"?await v(this.categoryService.create(t)):await v(this.categoryService.update(this.category().id,t)),this.router.navigate(["/admin/categories"])}controlPresionado=!1;handleKeyboardEvent(t){t.key==="Control"?this.controlPresionado=!0:t.key==="Enter"&&this.controlPresionado&&this.onSubmit()}handleKeyboardUp(t){t.key==="Control"&&(this.controlPresionado=!1)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["category-details"]],hostBindings:function(e,i){e&1&&f("keydown",function(d){return i.handleKeyboardEvent(d)},V)("keyup",function(d){return i.handleKeyboardUp(d)},V)},inputs:{category:[1,"category"]},decls:14,vars:5,consts:[[1,"flex","justify-between","items-center","mb-2"],[1,"text-2xl","font-bold"],[1,"divider"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"text-xl","font-bold","h-12"],["type","text","placeholder","Nombre","formControlName","name",1,"input","input-bordered","w-full"],[3,"control"],[1,"flex","justify-end","h-12"],["type","submit",1,"btn","btn-secondary"]],template:function(e,i){if(e&1&&(n(0,"div",0)(1,"h1",1),l(2),r()(),m(3,"div",2),n(4,"form",3),f("ngSubmit",function(){return i.onSubmit()}),n(5,"div",4)(6,"h2",5),l(7,"Datos generales"),r(),m(8,"input",6)(9,"form-error-label",7),r(),n(10,"div",4)(11,"div",8)(12,"button",9),l(13,"Guardar"),r()()()()),e&2){let s;a(2),T(" ",i.category().name||"Crear nueva categor\xEDa"," "),a(2),p("formGroup",i.categoryForm),a(4),M("border-red-500",((s=i.categoryForm.get("name"))==null?null:s.errors)??!1),a(),p("control",i.categoryForm.get("name"))}},dependencies:[me,re,ie,ne,oe,ae,le,q],encapsulation:2})};function ji(o,t){o&1&&(n(0,"div",0),m(1,"loading"),r())}function $i(o,t){if(o&1&&m(0,"category-details",1),o&2){let e=b();p("category",e.category())}}var dt=class o{activateRoute=c(ee);router=c(k);categoryService=c(fe);categoryId=te(this.activateRoute.params.pipe(G(t=>t.id)));category=g(null);loading=g(!0);error=g(null);constructor(){$(()=>{let t=this.categoryId();t&&this.loadCategory(t)})}async loadCategory(t){this.loading.set(!0),this.error.set(null);try{let e=await v(this.categoryService.getById(t));this.category.set(e)}catch{this.error.set("Error al cargar la categor\xEDa"),this.router.navigate(["/admin/categories"])}finally{this.loading.set(!1)}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["category-admin"]],decls:2,vars:2,consts:[[1,"min-h-[50vh]","gap-4"],[3,"category"]],template:function(e,i){if(e&1&&(C(0,ji,2,0,"div",0),C(1,$i,1,1,"category-details",1)),e&2){let s;y(i.loading()?0:-1),a(),y((s=i.category())!=null&&s.id?1:-1)}},dependencies:[P,ct],encapsulation:2})};var Bt=o=>["/admin/tags",o],Bi=(o,t)=>t.id;function Gi(o,t){if(o&1){let e=I();n(0,"tr")(1,"th"),l(2),r(),n(3,"td")(4,"a",3),l(5),r()(),n(6,"th",4)(7,"a",5),S(),n(8,"svg",6),m(9,"path",7),r()(),A(),n(10,"a",8),f("click",function(){let s=F(e).$implicit,d=b();return R(d.onDelete(s.id))}),S(),n(11,"svg",6),m(12,"path",9),r()()()()}if(o&2){let e=t.$implicit,i=t.$index;a(2),h(i+1),a(2),p("routerLink",O(4,Bt,e.id)),a(),T(" ",e.name," "),a(2),p("routerLink",O(6,Bt,e.id))}}var pt=class o{tags=_.required();delete=new K;confirmDialog;async onDelete(t){await this.confirmDialog.open("\xBFEst\xE1s seguro que deseas eliminar este tag?")&&this.delete.emit(t)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["tags-table"]],viewQuery:function(e,i){if(e&1&&Q(U,5),e&2){let s;W(s=J())&&(i.confirmDialog=s.first)}},inputs:{tags:[1,"tags"]},outputs:{delete:"delete"},decls:12,vars:0,consts:[[1,"overflow-y-auto","max-h-[75vh]","overflow-x-auto","border","border-slate-700","rounded-xl"],[1,"table","table-zebra","w-full"],[1,"sticky","top-0","bg-slate-900","z-10"],[1,"font-bold","hover:text-primary","transition-colors","duration-300",3,"routerLink"],[1,"flex","justify-end"],[1,"btn","btn-ghost","text-primary","btn-xs",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-6"],["d",`M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15
                  12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z`],[1,"btn","btn-ghost","text-error","btn-xs",3,"click"],["fill-rule","evenodd","d",`M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005
                  13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567
                  48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815
                  1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488
                  49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75
                  0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z`,"clip-rule","evenodd"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),m(4,"th"),n(5,"th"),l(6,"Nombre"),r(),m(7,"th"),r()(),n(8,"tbody"),H(9,Gi,13,8,"tr",null,Bi),r()()(),m(11,"confirm-dialog")),e&2&&(a(9),j(i.tags()))},dependencies:[D,U],encapsulation:2})};var Fe=`${ue.baseUrl}/tags`,zi={id:"new",name:""},be=class o{http=c(pe);toastService=c(ge);tagsCache=new Map;getAll(){return this.tagsCache.size?B(Array.from(this.tagsCache.values())):this.http.get(Fe).pipe(L(t=>t.forEach(e=>this.tagsCache.set(e.id,e))))}getById(t){return t==="new"?B(zi):this.tagsCache.has(t)?B(this.tagsCache.get(t)):this.http.get(`${Fe}/${t}`).pipe(L(e=>this.tagsCache.set(t,e)))}create(t){return this.toastService.activateLoading(),this.http.post(Fe,t).pipe(L(e=>{this.insertOrUpdateCache(e),this.toastService.activateSuccess()}),z(()=>this.toastService.deactivateLoading()))}update(t,e){return this.toastService.activateLoading(),this.http.patch(`${Fe}/${t}`,e).pipe(L(i=>{this.insertOrUpdateCache(i),this.toastService.activateSuccess()}),z(()=>this.toastService.deactivateLoading()))}delete(t){return this.toastService.activateLoading(),this.http.delete(`${Fe}/${t}`).pipe(L(()=>{this.tagsCache.delete(t),this.toastService.activateSuccess()}),z(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(t){this.tagsCache.set(t.id,t)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=de({token:o,factory:o.\u0275fac,providedIn:"root"})};var qi=()=>[];function Zi(o,t){o&1&&(n(0,"div",6),m(1,"loading"),r())}var ut=class o{tagService=c(be);tags=g(null);total=Y(()=>this.tags()?.length??0);loading=g(!0);error=g(null);ngOnInit(){this.getTags()}async getTags(){this.loading.set(!0),this.error.set(null);try{let t=await v(this.tagService.getAll());this.tags.set(t)}catch{this.error.set("Error al cargar los tags")}finally{this.loading.set(!1)}}async delete(t){try{await v(this.tagService.delete(t)),this.tags.set(this.tags()?.filter(e=>e.id!==t)??null)}catch(e){console.error("Error al eliminar tag",e),this.error.set("No se pudo eliminar el tag.")}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["tags-admin"]],decls:12,vars:4,consts:[[1,"text-2xl","font-bold"],[1,"text-lg"],[1,"text-primary"],[1,"flex","gap-2","items-center","h-20"],[1,"flex","flex-1"],["routerLink","/admin/tags/new",1,"btn","btn-primary"],[1,"min-h-[50vh]","gap-4"],[3,"delete","tags"]],template:function(e,i){e&1&&(n(0,"h1",0),l(1,"Listado de tags"),r(),n(2,"h3",1),l(3," Total de tags: "),n(4,"span",2),l(5),r()(),n(6,"div",3),m(7,"div",4),n(8,"button",5),l(9," Cargar tag "),r()(),C(10,Zi,2,0,"div",6),n(11,"tags-table",7),f("delete",function(d){return i.delete(d)}),r()),e&2&&(a(5),h(i.total()),a(5),y(i.loading()?10:-1),a(),p("tags",i.tags()??X(3,qi)))},dependencies:[D,P,pt],encapsulation:2})};var gt=class o{tag=_.required();router=c(k);tagService=c(be);fb=c(se);tagForm=this.fb.group({name:["",E.required]});ngOnInit(){this.tagForm.reset(this.tag())}async onSubmit(){if(this.tagForm.markAllAsTouched(),this.tagForm.invalid)return;let t=Z({},this.tagForm.value);this.tag().id==="new"?await v(this.tagService.create(t)):await v(this.tagService.update(this.tag().id,t)),this.router.navigate(["/admin/tags"])}controlPresionado=!1;handleKeyboardEvent(t){t.key==="Control"?this.controlPresionado=!0:t.key==="Enter"&&this.controlPresionado&&this.onSubmit()}handleKeyboardUp(t){t.key==="Control"&&(this.controlPresionado=!1)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["tag-details"]],hostBindings:function(e,i){e&1&&f("keydown",function(d){return i.handleKeyboardEvent(d)},V)("keyup",function(d){return i.handleKeyboardUp(d)},V)},inputs:{tag:[1,"tag"]},decls:14,vars:5,consts:[[1,"flex","justify-between","items-center","mb-2"],[1,"text-2xl","font-bold"],[1,"divider"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"text-xl","font-bold","h-12"],["type","text","placeholder","Nombre","formControlName","name",1,"input","input-bordered","w-full"],[3,"control"],[1,"flex","justify-end","h-12"],["type","submit",1,"btn","btn-secondary"]],template:function(e,i){if(e&1&&(n(0,"div",0)(1,"h1",1),l(2),r()(),m(3,"div",2),n(4,"form",3),f("ngSubmit",function(){return i.onSubmit()}),n(5,"div",4)(6,"h2",5),l(7,"Datos generales"),r(),m(8,"input",6)(9,"form-error-label",7),r(),n(10,"div",4)(11,"div",8)(12,"button",9),l(13,"Guardar"),r()()()()),e&2){let s;a(2),T(" ",i.tag().name||"Crear nuevo tag"," "),a(2),p("formGroup",i.tagForm),a(4),M("border-red-500",((s=i.tagForm.get("name"))==null?null:s.errors)??!1),a(),p("control",i.tagForm.get("name"))}},dependencies:[me,re,ie,ne,oe,ae,le,q],encapsulation:2})};function Ki(o,t){o&1&&(n(0,"div",0),m(1,"loading"),r())}function Qi(o,t){if(o&1&&m(0,"tag-details",1),o&2){let e=b();p("tag",e.tag())}}var ft=class o{activateRoute=c(ee);router=c(k);tagService=c(be);tagId=te(this.activateRoute.params.pipe(G(t=>t.id)));tag=g(null);loading=g(!0);error=g(null);constructor(){$(()=>{let t=this.tagId();t&&this.loadTag(t)})}async loadTag(t){this.loading.set(!0),this.error.set(null);try{let e=await v(this.tagService.getById(t));this.tag.set(e)}catch{this.error.set("Error al cargar el tag"),this.router.navigate(["/admin/tags"])}finally{this.loading.set(!1)}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["tag-admin"]],decls:2,vars:2,consts:[[1,"min-h-[50vh]","gap-4"],[3,"tag"]],template:function(e,i){if(e&1&&(C(0,Ki,2,0,"div",0),C(1,Qi,1,1,"tag-details",1)),e&2){let s;y(i.loading()?0:-1),a(),y((s=i.tag())!=null&&s.id?1:-1)}},dependencies:[P,gt],encapsulation:2})};var Wi=[{path:"",component:He,canMatch:[Lt],children:[{path:"products",title:"Productos",component:Qe},{path:"products/:id",title:"Producto",component:Ze},{path:"recipes",title:"Recetas",component:Ye},{path:"recipes/:id",title:"Receta",component:Je},{path:"categories",title:"Categor\xEDas",component:mt},{path:"categories/:id",title:"Categor\xEDa",component:dt},{path:"tags",title:"Tags",component:ut},{path:"tags/:id",title:"Tag",component:ft},{path:"contacts",title:"Contactos",component:Ge},{path:"contacts/:id",title:"Contacto",component:$e},{path:"users",title:"Usuarios",component:nt},{path:"users/:id",title:"Usuario",component:tt},{path:"roles",title:"Roles",component:rt},{path:"roles/:id",title:"Rol",component:lt},{path:"**",redirectTo:"products"}]}],Mm=Wi;export{Wi as AdminDashboardRoutes,Mm as default};
