import{Aa as v,B as C,D as B,E as d,Ea as re,Ga as ne,H,Ha as y,Ia as ie,J as z,L as G,La as m,M as K,Ma as oe,N as J,Na as ae,O as Q,P as w,Q as R,R as M,S as s,T as p,U as W,V as T,W as X,X as Y,Y as S,_ as P,aa as h,e as a,f as D,fa as $,g as U,ga as l,i,ia as L,ka as j,l as u,la as Z,o as c,p as O,q as I,r as V,ra as ee,s as q,ta as te,u as k,ua as N}from"./chunk-7L4JM7UI.js";var se=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["app-logo"]],decls:5,vars:0,consts:[["id","logo"],["routerLink","/",1,"text-lg","md:text-2xl","font-bold","text-white"],[1,"text-blue-500"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"a",1),l(2,"Gluten"),s(3,"span",2),l(4," Free"),p()()())},dependencies:[y],styles:["[_nghost-%COMP%]{display:block}"]})};var ce=[{label:"Inicio",route:"/",adminOnly:!1},{label:"Productos",route:"/products",adminOnly:!1},{label:"Recetas",route:"/recipe",adminOnly:!1},{label:"Contacto",route:"/contact",adminOnly:!1},{label:"Panel Administrativo",route:"/admin",adminOnly:!0}];var Ce=()=>({exact:!0});function ve(r,e){if(r&1){let t=S();s(0,"a",7),P("click",function(){O(t);let o=h(2);return I(o.close())}),l(1),p()}if(r&2){let t=h().$implicit;M("routerLink",t.route)("routerLinkActiveOptions",j(3,Ce)),C(),L(" ",t.label," ")}}function ye(r,e){if(r&1&&G(0,ve,2,4,"a",6),r&2){let t=e.$implicit,n=h();K(!t.adminOnly||n.authService.isAdmin()?0:-1)}}var pe=class r{constructor(e){this.authService=e}menuItems=ce;open=!1;closeSidebar=new z;close(){this.closeSidebar.emit()}static \u0275fac=function(t){return new(t||r)(B(ae))};static \u0275cmp=d({type:r,selectors:[["sidebar-items"]],inputs:{menuItems:"menuItems",open:"open"},outputs:{closeSidebar:"closeSidebar"},decls:8,vars:4,consts:[[1,"fixed","inset-0","bg-base-100","z-50","transform","transition-transform","duration-400","flex","flex-col"],[1,"flex","justify-end"],[1,"btn","btn-ghost",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","flex-col","gap-2","px-4"],["routerLinkActive","text-secondary",1,"p-2","rounded-md","hover:bg-gray-800","transition",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","text-secondary",1,"p-2","rounded-md","hover:bg-gray-800","transition",3,"click","routerLink","routerLinkActiveOptions"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),P("click",function(){return n.close()}),V(),s(3,"svg",3),W(4,"path",4),p()()(),q(),s(5,"nav",5),w(6,ye,1,1,null,null,J),p()()),t&2&&($("translate-x-0",n.open)("-translate-x-full",!n.open),C(6),R(n.menuItems))},dependencies:[y,ie],styles:["[_nghost-%COMP%]{display:block}"]})};var le=class r{activateRoute=c(re);router=c(ne);currentPage=oe(this.activateRoute.queryParamMap.pipe(U(e=>e.get("page")?+e.get("page"):1),U(e=>isNaN(e)?1:e)),{initialValue:1});setPage(e){this.router.navigate([],{queryParams:{page:e},queryParamsHandling:"merge"})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var E=`${m.baseUrl}/products`,Pe={id:"new",title:"",price:0,unitOfMeasure:"",description:"",slug:"",stock:0,tags:[""],deleteAt:null,imagesName:[""],user:{}},F=class r{constructor(){}http=c(v);productsCache=new Map;productCache=new Map;getProducts(e={}){let t=m.cantProducts,{limit:n=t,offset:o=0,isFeatured:g=!1}=e,b=g?"isFeatured":`${n}-${o}`;return this.productsCache.has(b)?a(this.productsCache.get(b)):this.http.get(E,{params:{limit:n,offset:o,isFeatured:g},responseType:"json"}).pipe(i(be=>this.productsCache.set(b,be)))}getProductByIdSlug(e){return e==="new"?a(Pe):this.productCache.has(e)?a(this.productCache.get(e)):this.http.get(`${E}/${e}`,{responseType:"json"}).pipe(i(n=>this.productCache.set(e,n)))}createProduct(e){return this.http.post(`${E}`,e).pipe(i(n=>this.insertOrUpdateCache(n)))}updateProduct(e,t){return this.http.patch(`${E}/${e}`,t).pipe(i(o=>this.insertOrUpdateCache(o)))}insertOrUpdateCache(e){this.productCache.get(e.id)?(this.productCache.set(e.id,e),this.productsCache.forEach(n=>{n.products=n.products.map(o=>o.id===e.id?e:o)})):(this.productCache.set(e.id,e),this.productsCache.clear())}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};function nt(){let r=c(F),e=k(null),t=k(!0),n=k(null);async function o(g){t.set(!0),n.set(null);try{let b=await D(r.getProducts(g));e.set(b)}catch{n.set("Error al cargar los productos")}finally{t.set(!1)}}return{productResponse:e,loading:t,error:n,loadProducts:o}}var xe=()=>[],_e=r=>({page:r});function Oe(r,e){if(r&1){let t=S();s(0,"button",3),P("click",function(){let o=O(t).$implicit,g=h();return I(g.activePage.set(o))}),l(1),p()}if(r&2){let t=e.$implicit,n=h();$("btn-primary",t===n.activePage()),M("routerLink",j(5,xe))("queryParams",Z(6,_e,t)),C(),L(" ",t," ")}}function Ie(r,e){r&1&&(s(0,"button",2),l(1,"0"),p())}var me=class r{pages=N(0);currentPage=N(1);activePage=te(this.currentPage);getPagesList=ee(()=>Array.from({length:this.pages()},(e,t)=>t+1));static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["pagination"]],inputs:{pages:[1,"pages"],currentPage:[1,"currentPage"]},decls:4,vars:1,consts:[[1,"join","flex","justify-center","items-center"],[1,"join-item","btn",3,"btn-primary","routerLink","queryParams"],[1,"join-item","btn"],[1,"join-item","btn",3,"click","routerLink","queryParams"]],template:function(t,n){t&1&&(s(0,"div",0),w(1,Oe,2,8,"button",1,Q,!1,Ie,2,0,"button",2),p()),t&2&&(C(),R(n.getPagesList()))},dependencies:[y],styles:["[_nghost-%COMP%]{display:block}"]})};var ue=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["loading"]],decls:4,vars:0,consts:[[1,"flex","flex-col","justify-center","items-center"],[1,"loading","loading-spinner","loading-lg"]],template:function(t,n){t&1&&(T(0,"div",0),Y(1,"span",1),T(2,"p"),l(3," Cargando... "),X()())},styles:["[_nghost-%COMP%]{display:block}"]})};var x=`${m.baseUrl}/recipes`,ke={id:"new",title:"",text:""},de=class r{http=c(v);recipesCache=new Map;getAll(){return this.recipesCache.size?a(Array.from(this.recipesCache.values())):this.http.get(x).pipe(i(e=>e.forEach(t=>this.recipesCache.set(t.id,t))))}getById(e){return e==="new"?a(ke):this.recipesCache.has(e)?a(this.recipesCache.get(e)):this.http.get(`${x}/${e}`).pipe(i(t=>this.recipesCache.set(e,t)))}create(e){return this.http.post(x,e).pipe(i(t=>this.insertOrUpdateCache(t)))}update(e,t){return this.http.patch(`${x}/${e}`,t).pipe(i(n=>this.insertOrUpdateCache(n)))}delete(e){return this.http.delete(`${x}/${e}`).pipe(i(()=>this.recipesCache.delete(e)))}insertOrUpdateCache(e){this.recipesCache.set(e.id,e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var _=`${m.baseUrl}/contacts`,we={id:"new",title:"",phone:"",email:""},fe=class r{http=c(v);contactsCache=new Map;getAll(){return this.contactsCache.size?a(Array.from(this.contactsCache.values())):this.http.get(_).pipe(i(e=>e.forEach(t=>this.contactsCache.set(t.id,t))))}getById(e){return e==="new"?a(we):this.contactsCache.has(e)?a(this.contactsCache.get(e)):this.http.get(`${_}/${e}`).pipe(i(t=>this.contactsCache.set(e,t)))}create(e){return this.http.post(_,e).pipe(i(t=>this.insertOrUpdateCache(t)))}update(e,t){return this.http.patch(`${_}/${e}`,t).pipe(i(n=>this.insertOrUpdateCache(n)))}delete(e){return this.http.delete(`${_}/${e}`).pipe(i(()=>this.contactsCache.delete(e)))}insertOrUpdateCache(e){this.contactsCache.set(e.id,e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var he=m.baseUrl,ge=class r{transform(e){if(typeof e=="string")return`${he}/files/product/${e}`;let t=e[0];return t?`${he}/files/product/${t}`:"assets/images/default-image.jpg"}static \u0275fac=function(t){return new(t||r)};static \u0275pipe=H({name:"productImage",type:r,pure:!0})};export{se as a,ce as b,pe as c,ge as d,le as e,F as f,nt as g,me as h,ue as i,de as j,fe as k};
