import{$ as s,Aa as z,C as d,Ea as g,F as E,Fa as J,M as k,N as D,O as I,P as $,Q as l,R as f,T as C,U as L,V as N,W as R,X as T,Y as x,_ as O,ba as S,da as q,e as h,ea as V,f as F,g as y,i as p,ka as U,l as u,ma as H,na as _,o as a,p as M,q as w,ta as A,u as m,xa as B,z as v,za as Q}from"./chunk-ZQORN3D4.js";var K=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["loading"]],decls:4,vars:0,consts:[[1,"flex","flex-col","justify-center","items-center","min-h-[50vh]","gap-4"],[1,"loading","loading-spinner","loading-lg"]],template:function(t,o){t&1&&(C(0,"div",0),N(1,"span",1),C(2,"p"),s(3," Cargando... "),L()())},styles:["[_nghost-%COMP%]{display:block}"]})};var X=class r{activateRoute=a(B);router=a(Q);currentPage=J(this.activateRoute.queryParamMap.pipe(y(e=>e.get("page")?+e.get("page"):1),y(e=>isNaN(e)?1:e)),{initialValue:1});setPage(e){this.router.navigate([],{queryParams:{page:e},queryParamsHandling:"merge"})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var j=`${g.baseUrl}/products`,b=class r{constructor(){}http=a(A);productsCache=new Map;productCache=new Map;getProducts(e={}){let{limit:t=12,offset:o=0,isFeatured:n=!1}=e,i=n?"isFeatured":`${t}-${o}`;return this.productsCache.has(i)?h(this.productsCache.get(i)):this.http.get(j,{params:{limit:t,offset:o,isFeatured:n},responseType:"json"}).pipe(p(Z=>this.productsCache.set(i,Z)))}getProductByIdSlug(e){return this.productCache.has(e)?h(this.productCache.get(e)):this.http.get(`${j}/${e}`,{responseType:"json"}).pipe(p(o=>this.productCache.set(e,o)))}updateProduct(e,t){return this.http.patch(`${j}/${e}`,t).pipe(p(n=>this.updateProductCache(n)))}updateProductCache(e){let t=e.id;this.productCache.set(t,e),this.productsCache.forEach(o=>{o.products=o.products.map(n=>n.id===t?e:n)})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};function _e(){let r=a(b),e=m(null),t=m(!0),o=m(null);async function n(i){t.set(!0),o.set(null);try{let c=await F(r.getProducts(i));e.set(c)}catch(c){console.error(c),o.set("Error al cargar los productos")}finally{t.set(!1)}}return{productResponse:e,loading:t,error:o,loadProducts:n}}var te=()=>[],re=r=>({page:r});function oe(r,e){if(r&1){let t=R();l(0,"button",3),T("click",function(){let n=M(t).$implicit,i=x();return w(i.activePage.set(n))}),s(1),f()}if(r&2){let t=e.$implicit,o=x();O("btn-primary",t===o.activePage()),$("routerLink",q(5,te))("queryParams",V(6,re,t)),v(),S(" ",t," ")}}function ne(r,e){r&1&&(l(0,"button",2),s(1,"0"),f())}var G=class r{pages=_(0);currentPage=_(1);activePage=H(this.currentPage);getPagesList=U(()=>Array.from({length:this.pages()},(e,t)=>t+1));static \u0275fac=function(t){return new(t||r)};static \u0275cmp=d({type:r,selectors:[["pagination"]],inputs:{pages:[1,"pages"],currentPage:[1,"currentPage"]},decls:4,vars:1,consts:[[1,"join","flex","justify-center","items-center"],[1,"join-item","btn",3,"btn-primary","routerLink","queryParams"],[1,"join-item","btn"],[1,"join-item","btn",3,"click","routerLink","queryParams"]],template:function(t,o){t&1&&(l(0,"div",0),D(1,oe,2,8,"button",1,k,!1,ne,2,0,"button",2),f()),t&2&&(v(),I(o.getPagesList()))},dependencies:[z],styles:["[_nghost-%COMP%]{display:block}"]})};var W=g.baseUrl,Y=class r{transform(e){if(typeof e=="string")return`${W}/files/product/${e}`;let t=e[0];return t?`${W}/files/product/${t}`:"https://www.foodnavigator.com/resizer/v2/3MET5T7L4JO25FVOXQDQ67EHOE.jpg?auth=d16d65b4d7f1ff6620ee4d54a2abb29750e275e5721fcd954f2aecd5a78ab6f7&smart=true"}static \u0275fac=function(t){return new(t||r)};static \u0275pipe=E({name:"productImage",type:r,pure:!0})};export{K as a,X as b,b as c,Y as d,_e as e,G as f};
