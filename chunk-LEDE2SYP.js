import{a as h}from"./chunk-FGPZIJYV.js";import{b as ye,c as ie}from"./chunk-FGV7SIF7.js";import"./chunk-OWTQV74W.js";import{a as te,b as j,c as u,d as q,e as G,g as $,j as z,k as H,n as Z,p as J}from"./chunk-T7RQRZ5V.js";import{A as T,Aa as A,B as V,Ba as I,C as E,D as Q,Da as U,Ea as ge,G as g,Ga as S,Ha as c,Ia as N,Ja as B,K as pe,Ka as K,N as l,Q as b,Va as R,Xa as Y,Za as x,_ as y,aa as _,ba as fe,ca as W,da as w,ea as k,fa as d,ga as i,ha as t,ia as a,jb as be,kb as ve,lb as ee,ma as X,mb as D,nb as xe,oa as C,qa as v,tb as he,ya as o,z as p,za as f}from"./chunk-AM62OYZP.js";var _e=()=>({exact:!0}),ne=class r{authService=p(he);static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-user"]],decls:34,vars:4,consts:[[1,"space-y-4"],[1,"text-3xl","font-bold","mb-2","mt-6"],[1,"grid","grid-cols-1","lg:grid-cols-[18%_1fr]","gap-4","lg:gap-6","items-start"],[1,"hidden","lg:block","rounded-xl","border","border-base-200","bg-base-100/60","p-3","shadow-sm","backdrop-blur-sm"],[1,"flex","flex-col","gap-2"],["routerLink","/user/profile","routerLinkActive","bg-base-200 font-semibold",1,"w-full","text-left","p-2","rounded-md","cursor-pointer","text-base-content","transition-colors","duration-200","hover:bg-base-200","hover:text-base-content","block",3,"routerLinkActiveOptions"],["routerLink","/user/directions","routerLinkActive","bg-base-200 font-semibold",1,"w-full","text-left","p-2","rounded-md","cursor-pointer","text-base-content","transition-colors","duration-200","hover:bg-base-200","hover:text-base-content","block"],["routerLink","/user/billing","routerLinkActive","bg-base-200 font-semibold",1,"w-full","text-left","p-2","rounded-md","cursor-pointer","text-base-content","transition-colors","duration-200","hover:bg-base-200","hover:text-base-content","block"],["routerLink","/user/orders","routerLinkActive","bg-base-200 font-semibold",1,"w-full","text-left","p-2","rounded-md","cursor-pointer","text-base-content","transition-colors","duration-200","hover:bg-base-200","hover:text-base-content","block"],[1,"flex","flex-col","gap-4"],[1,"lg:hidden","rounded-xl","border","border-base-200","bg-base-100/60","p-3","shadow-sm","backdrop-blur-sm"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"h1",1),o(2,"Mi Cuenta"),t(),i(3,"div",2)(4,"aside",3)(5,"ul",4)(6,"li")(7,"a",5),o(8," Mi perfil "),t()(),i(9,"li")(10,"a",6),o(11," Mis direcciones "),t()(),i(12,"li")(13,"a",7),o(14," Mis datos de facturaci\xF3n "),t()(),i(15,"li")(16,"a",8),o(17," Mis pedidos "),t()()()(),i(18,"main",9)(19,"div",10)(20,"ul",4)(21,"li")(22,"a",5),o(23," Mi perfil "),t()(),i(24,"li")(25,"a",6),o(26," Mis direcciones "),t()(),i(27,"li")(28,"a",7),o(29," Mis datos de facturaci\xF3n "),t()(),i(30,"li")(31,"a",8),o(32," Mis pedidos "),t()()()(),a(33,"router-outlet"),t()()()),e&2&&(l(7),d("routerLinkActiveOptions",S(2,_e)),l(15),d("routerLinkActiveOptions",S(3,_e)))},dependencies:[D,xe,ve],styles:["[_nghost-%COMP%]{display:block}"]})};var Ee=()=>[1,2,3],we=()=>["/user/billing","new"],ke=r=>({edit:r}),De=(r,n)=>n.id;function Ie(r,n){r&1&&(i(0,"article",8),a(1,"div",9)(2,"div",10)(3,"div",11),i(4,"div",12),a(5,"div",13)(6,"div",14),t()())}function Ne(r,n){r&1&&(i(0,"div",6),w(1,Ie,7,0,"article",8,W),t()),r&2&&(l(),k(S(0,Ee)))}function Fe(r,n){r&1&&(i(0,"p",7),o(1,"A\xFAn no agregaste datos de facturaci\xF3n."),t())}function Pe(r,n){r&1&&(E(),i(0,"svg",23),a(1,"path",30),t())}function Ue(r,n){r&1&&(E(),i(0,"svg",24),a(1,"path",31),t())}function Me(r,n){if(r&1){let e=X();i(0,"article",15)(1,"div",16)(2,"div",17)(3,"h3",18),o(4),t(),i(5,"p",19),o(6),t(),i(7,"p",19),o(8),t(),i(9,"p",20),o(10),t()(),i(11,"div",21)(12,"button",22),C("click",function(){let m=T(e).$implicit,P=v(2);return V(P.toggleDefault(m))}),y(13,Pe,2,0,":svg:svg",23)(14,Ue,2,0,":svg:svg",24),t(),i(15,"a",25),E(),i(16,"svg",26),a(17,"path",27),t()(),Q(),i(18,"button",28),C("click",function(){let m=T(e).$implicit,P=v(2);return V(P.remove(m))}),E(),i(19,"svg",26),a(20,"path",29),t()()()()()}if(r&2){let e=n.$implicit;l(4),f(e.legalName),l(2),A("RUC: ",e.taxId),l(2),I("",e.email," \xB7 ",e.phone),l(2),U("",e.addressLine1,", ",e.city,", ",e.state," - ",e.country),l(3),_(e.isDefault?13:14),l(2),d("routerLink",S(11,we))("queryParams",c(12,ke,e.id))}}function Oe(r,n){if(r&1&&w(0,Me,21,14,"article",15,De),r&2){let e=v();k(e.profiles())}}var re=class r{accountService=p(h);profiles=g([]);loading=g(!0);ngOnInit(){this.load()}load(){this.loading.set(!0),this.accountService.getBillingProfiles().subscribe({next:n=>this.profiles.set(n??[]),error:()=>this.loading.set(!1),complete:()=>this.loading.set(!1)})}toggleDefault(n){this.loading.set(!0);let e=!(n.isDefault??!1);this.accountService.updateBilling(n.id,{isDefault:e}).subscribe({next:()=>this.load(),error:()=>this.loading.set(!1)})}remove(n){this.loading.set(!0),this.accountService.deleteBilling(n.id).subscribe({next:()=>this.load(),error:()=>this.loading.set(!1)})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-user-billings"]],decls:13,vars:1,consts:[[1,"space-y-4"],[1,"flex","items-center","justify-between","gap-3"],[1,"text-xl","font-bold"],[1,"text-sm","text-base-content/70"],["routerLink","/user/billing/new",1,"btn","btn-primary","btn-sm"],[1,"space-y-3"],[1,"grid","gap-4"],[1,"text-base-content/70"],[1,"skeletor-card","p-5","space-y-4"],[1,"skeletor-title"],[1,"skeletor-line","w-3/4"],[1,"skeletor-line","w-1/2"],[1,"flex","gap-2"],[1,"skeletor-pill","h-8","w-28"],[1,"skeletor-pill","h-8","w-14"],[1,"p-4","border","border-base-300","rounded-lg","bg-base-100","shadow-sm"],[1,"flex","items-start","justify-between","gap-3"],[1,"space-y-1"],[1,"font-semibold","text-lg","leading-tight"],[1,"text-sm","text-base-content/70","leading-snug"],[1,"text-sm","text-base-content/80","leading-snug"],[1,"flex","items-center","gap-1"],["type","button","aria-label","Marcar como principal",1,"h-9","w-9","flex","items-center","justify-center","rounded-md","transition-colors","hover:bg-base-200","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-5","text-warning"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5","text-base-content"],["aria-label","Editar",1,"h-9","w-9","flex","items-center","justify-center","rounded-md","transition-colors","hover:bg-base-200","cursor-pointer",3,"routerLink","queryParams"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5"],["stroke-linecap","round","stroke-linejoin","round","d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"],["type","button","aria-label","Eliminar",1,"h-9","w-9","flex","items-center","justify-center","rounded-md","transition-colors","hover:bg-error/10","text-error","cursor-pointer",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"],["fill-rule","evenodd","d","M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z","clip-rule","evenodd"],["stroke-linecap","round","stroke-linejoin","round","d","M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"]],template:function(e,s){e&1&&(i(0,"section",0)(1,"div",1)(2,"div")(3,"h2",2),o(4,"Datos de facturaci\xF3n"),t(),i(5,"p",3),o(6,"Gestiona tus perfiles de factura."),t()(),i(7,"a",4),o(8,"Agregar nuevo"),t()(),i(9,"div",5),y(10,Ne,3,1,"div",6)(11,Fe,2,0,"p",7)(12,Oe,2,0),t()()),e&2&&(l(10),_(s.loading()?10:s.profiles().length===0?11:12))},dependencies:[x,D],styles:["[_nghost-%COMP%]{display:block}"]})};var Le=()=>[1,2,3],Te=()=>["/user/directions","new"],Ve=r=>({edit:r}),Ae=(r,n)=>n.id;function Be(r,n){r&1&&(i(0,"article",8),a(1,"div",9)(2,"div",10)(3,"div",11),i(4,"div",12),a(5,"div",13)(6,"div",14),t()())}function Re(r,n){r&1&&(i(0,"div",6),w(1,Be,7,0,"article",8,W),t()),r&2&&(l(),k(S(0,Le)))}function je(r,n){r&1&&(i(0,"p",7),o(1,"Todavia no agregaste direcciones."),t())}function qe(r,n){r&1&&(E(),i(0,"svg",23),a(1,"path",30),t())}function Ge(r,n){r&1&&(E(),i(0,"svg",24),a(1,"path",31),t())}function $e(r,n){if(r&1){let e=X();i(0,"article",15)(1,"div",16)(2,"div",17)(3,"h3",18),o(4),t(),i(5,"p",19),o(6),t(),i(7,"p",20),o(8),t()(),i(9,"div",21)(10,"button",22),C("click",function(){let m=T(e).$implicit,P=v(2);return V(P.toggleDefault(m))}),y(11,qe,2,0,":svg:svg",23)(12,Ge,2,0,":svg:svg",24),t(),i(13,"a",25),E(),i(14,"svg",26),a(15,"path",27),t()(),Q(),i(16,"button",28),C("click",function(){let m=T(e).$implicit,P=v(2);return V(P.remove(m))}),E(),i(17,"svg",26),a(18,"path",29),t()()()()()}if(r&2){let e=n.$implicit;l(4),f(e.label),l(2),I("",e.fullName," - ",e.phone),l(2),U("",e.street,", ",e.city,", ",e.state," - ",e.country),l(3),_(e.isDefault?11:12),l(2),d("routerLink",S(10,Te))("queryParams",c(11,Ve,e.id))}}function ze(r,n){if(r&1&&w(0,$e,19,13,"article",15,Ae),r&2){let e=v();k(e.addresses())}}var oe=class r{accountService=p(h);addresses=g([]);loading=g(!0);ngOnInit(){this.load()}load(){this.loading.set(!0),this.accountService.getAddresses().subscribe({next:n=>this.addresses.set(n??[]),error:()=>this.loading.set(!1),complete:()=>this.loading.set(!1)})}toggleDefault(n){this.loading.set(!0);let e=!(n.isDefault??!1);this.accountService.updateAddress(n.id,{isDefault:e}).subscribe({next:()=>this.load(),error:()=>this.loading.set(!1)})}remove(n){this.loading.set(!0),this.accountService.deleteAddress(n.id).subscribe({next:()=>this.load(),error:()=>this.loading.set(!1)})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-user-directions"]],decls:13,vars:1,consts:[[1,"space-y-4"],[1,"flex","items-center","justify-between","gap-3"],[1,"text-xl","font-bold"],[1,"text-sm","text-base-content/70"],["routerLink","/user/directions/new",1,"btn","btn-primary","btn-sm"],[1,"space-y-3"],[1,"grid","gap-4"],[1,"text-base-content/70"],[1,"skeletor-card","p-5","space-y-4"],[1,"skeletor-title","w-1/2"],[1,"skeletor-line","w-3/4"],[1,"skeletor-line"],[1,"flex","gap-2"],[1,"skeletor-pill","h-8","w-20"],[1,"skeletor-pill","h-8","w-16"],[1,"p-4","border","border-base-300","rounded-lg","bg-base-100","shadow-sm"],[1,"flex","items-start","justify-between","gap-3"],[1,"space-y-1"],[1,"font-semibold","text-lg","leading-tight"],[1,"text-sm","text-base-content/70","leading-snug"],[1,"text-sm","text-base-content/80","leading-snug"],[1,"flex","items-center","gap-1"],["type","button","aria-label","Marcar como principal",1,"h-9","w-9","flex","items-center","justify-center","rounded-md","transition-colors","hover:bg-base-200","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-5","text-warning"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5","text-base-content"],["aria-label","Editar",1,"h-9","w-9","flex","items-center","justify-center","rounded-md","transition-colors","hover:bg-base-200","cursor-pointer",3,"routerLink","queryParams"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5"],["stroke-linecap","round","stroke-linejoin","round","d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"],["type","button","aria-label","Eliminar",1,"h-9","w-9","flex","items-center","justify-center","rounded-md","transition-colors","hover:bg-error/10","text-error","cursor-pointer",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"],["fill-rule","evenodd","d","M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z","clip-rule","evenodd"],["stroke-linecap","round","stroke-linejoin","round","d","M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"]],template:function(e,s){e&1&&(i(0,"section",0)(1,"div",1)(2,"div")(3,"h2",2),o(4,"Mis direcciones"),t(),i(5,"p",3),o(6,"Revisa tus datos de envio."),t()(),i(7,"a",4),o(8,"Agregar nuevo"),t()(),i(9,"div",5),y(10,Re,3,1,"div",6)(11,je,2,0,"p",7)(12,ze,2,0),t()()),e&2&&(l(10),_(s.loading()?10:s.addresses().length===0?11:12))},dependencies:[x,D],styles:["[_nghost-%COMP%]{display:block}"]})};var L=r=>({"border-error focus:border-error":r}),se=class r{fb=p(Z);accountService=p(h);router=p(ee);editingId=null;submitting=g(!1);form=this.fb.nonNullable.group({label:["",[u.required]],fullName:["",[u.required]],phone:["",[u.required]],street:["",[u.required]],city:["",[u.required]],state:["",[u.required]],country:["Paraguay",[u.required]],isDefault:[!1]});initialValue=this.form.getRawValue();ngOnInit(){let e=new URL(window.location.href).searchParams.get("edit");e&&(this.editingId=e,this.prefill(e))}prefill(n){this.submitting.set(!0),this.accountService.getAddresses().subscribe({next:e=>{let s=(e??[]).find(m=>m.id===n);s&&(this.form.patchValue(s),this.updateInitialValue())},complete:()=>this.submitting.set(!1),error:()=>this.submitting.set(!1)})}save(){if(this.form.invalid)return;this.submitting.set(!0);let n=this.form.getRawValue();(this.editingId?this.accountService.updateAddress(this.editingId,n):this.accountService.createAddress(n)).subscribe({next:()=>{this.updateInitialValue(),this.submitting.set(!1),this.router.navigate(["/user/directions"])},error:()=>this.submitting.set(!1)})}hasChanges(){return!this.isEqual(this.form.getRawValue(),this.initialValue)}updateInitialValue(){this.initialValue=this.form.getRawValue(),this.form.markAsPristine()}isEqual(n,e){let s=Object.keys(n);return s.length===Object.keys(e).length&&s.every(m=>n[m]===e[m])}isInvalid(n){let e=this.form.get(n);return!!e&&e.invalid&&(e.dirty||e.touched)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-user-directions-new"]],decls:43,vars:24,consts:[[1,"space-y-4"],[1,"flex","items-center","justify-between","gap-3"],[1,"text-xl","font-bold"],[1,"text-sm","text-base-content/70"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","bg-base-200/60","rounded-lg","p-5",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"font-semibold"],["formControlName","label","placeholder","Casa / Oficina",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","phone",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","fullName",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","state",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],[1,"md:col-span-2","flex","flex-col","gap-2"],["formControlName","street","placeholder","Calle y n\xFAmero",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","city",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","country",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],[1,"md:col-span-2","flex","items-center","gap-2","pt-1"],["type","checkbox","formControlName","isDefault",1,"checkbox","checkbox-primary"],[1,"md:col-span-2","flex","justify-end"],["type","submit",1,"btn","btn-primary","min-w-36",3,"disabled"]],template:function(e,s){e&1&&(i(0,"section",0)(1,"div",1)(2,"div")(3,"h2",2),o(4),t(),i(5,"p",3),o(6,"Completa los datos de env\xEDo."),t()()(),i(7,"form",4),C("ngSubmit",function(){return s.save()}),i(8,"div",5)(9,"span",6),o(10,"Etiqueta"),t(),a(11,"input",7),t(),i(12,"div",5)(13,"span",6),o(14,"Tel\xE9fono"),t(),a(15,"input",8),t(),i(16,"div",5)(17,"span",6),o(18,"Nombre completo"),t(),a(19,"input",9),t(),i(20,"div",5)(21,"span",6),o(22,"Departamento"),t(),a(23,"input",10),t(),i(24,"div",11)(25,"span",6),o(26,"Calle y n\xFAmero"),t(),a(27,"input",12),t(),i(28,"div",5)(29,"span",6),o(30,"Ciudad"),t(),a(31,"input",13),t(),i(32,"div",5)(33,"span",6),o(34,"Pa\xEDs"),t(),a(35,"input",14),t(),i(36,"label",15),a(37,"input",16),i(38,"span",6),o(39,"Usar como direcci\xF3n principal"),t()(),i(40,"div",17)(41,"button",18),o(42," Guardar "),t()()()()),e&2&&(l(4),f(s.editingId?"Editar direcci\xF3n":"Nueva direcci\xF3n"),l(3),d("formGroup",s.form),l(4),d("ngClass",c(10,L,s.isInvalid("label"))),l(4),d("ngClass",c(12,L,s.isInvalid("phone"))),l(4),d("ngClass",c(14,L,s.isInvalid("fullName"))),l(4),d("ngClass",c(16,L,s.isInvalid("state"))),l(4),d("ngClass",c(18,L,s.isInvalid("street"))),l(4),d("ngClass",c(20,L,s.isInvalid("city"))),l(4),d("ngClass",c(22,L,s.isInvalid("country"))),l(6),d("disabled",s.form.invalid||!s.hasChanges()||s.submitting()))},dependencies:[x,R,J,$,j,te,q,G,z,H],styles:["[_nghost-%COMP%]{display:block}"]})};var F=r=>({"border-error focus:border-error":r}),ae=class r{fb=p(Z);accountService=p(h);router=p(ee);editingId=null;submitting=g(!1);form=this.fb.nonNullable.group({legalName:["",[u.required]],taxId:["",[u.required]],email:["",[u.required,u.email]],phone:["",[u.required]],addressLine1:["",[u.required]],city:["",[u.required]],state:["",[u.required]],country:["Paraguay",[u.required]],isDefault:[!1]});initialValue=this.form.getRawValue();ngOnInit(){let e=new URL(window.location.href).searchParams.get("edit");e&&(this.editingId=e,this.prefill(e))}prefill(n){this.submitting.set(!0),this.accountService.getBillingProfiles().subscribe({next:e=>{let s=(e??[]).find(m=>m.id===n);s&&(this.form.patchValue(s),this.updateInitialValue())},complete:()=>this.submitting.set(!1),error:()=>this.submitting.set(!1)})}save(){if(this.form.invalid)return;this.submitting.set(!0);let n=this.form.getRawValue();(this.editingId?this.accountService.updateBilling(this.editingId,n):this.accountService.createBilling(n)).subscribe({next:()=>{this.updateInitialValue(),this.submitting.set(!1),this.router.navigate(["/user/billing"])},error:()=>this.submitting.set(!1)})}hasChanges(){return!this.isEqual(this.form.getRawValue(),this.initialValue)}updateInitialValue(){this.initialValue=this.form.getRawValue(),this.form.markAsPristine()}isEqual(n,e){let s=Object.keys(n);return s.length===Object.keys(e).length&&s.every(m=>n[m]===e[m])}isInvalid(n){let e=this.form.get(n);return!!e&&e.invalid&&(e.dirty||e.touched)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-user-billings-new"]],decls:48,vars:27,consts:[[1,"space-y-4"],[1,"flex","items-center","justify-between","gap-3"],[1,"text-xl","font-bold"],[1,"text-sm","text-base-content/70"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","bg-base-200/60","rounded-lg","p-5",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"font-semibold"],["formControlName","legalName",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["type","email","formControlName","email",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","taxId",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","phone",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","country",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","state",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],[1,"md:col-span-2","flex","flex-col","gap-2"],["formControlName","addressLine1",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","city",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],[1,"hidden","md:block"],[1,"md:col-span-2","flex","items-center","gap-2","pt-1"],["type","checkbox","formControlName","isDefault",1,"checkbox","checkbox-primary"],[1,"md:col-span-2","flex","justify-end","pt-1"],["type","submit",1,"btn","btn-primary","min-w-32",3,"disabled"]],template:function(e,s){e&1&&(i(0,"section",0)(1,"div",1)(2,"div")(3,"h2",2),o(4),t(),i(5,"p",3),o(6,"Completa los datos de facturaci\xF3n."),t()()(),i(7,"form",4),C("ngSubmit",function(){return s.save()}),i(8,"div",5)(9,"span",6),o(10,"Raz\xF3n social"),t(),a(11,"input",7),t(),i(12,"div",5)(13,"span",6),o(14,"Email"),t(),a(15,"input",8),t(),i(16,"div",5)(17,"span",6),o(18,"RUC"),t(),a(19,"input",9),t(),i(20,"div",5)(21,"span",6),o(22,"Tel\xE9fono"),t(),a(23,"input",10),t(),i(24,"div",5)(25,"span",6),o(26,"Pa\xEDs"),t(),a(27,"input",11),t(),i(28,"div",5)(29,"span",6),o(30,"Departamento"),t(),a(31,"input",12),t(),i(32,"div",13)(33,"span",6),o(34,"Direcci\xF3n"),t(),a(35,"input",14),t(),i(36,"div",5)(37,"span",6),o(38,"Ciudad"),t(),a(39,"input",15),t(),a(40,"div",16),i(41,"label",17),a(42,"input",18),i(43,"span",6),o(44,"Usar como perfil principal"),t()(),i(45,"div",19)(46,"button",20),o(47," Guardar "),t()()()()),e&2&&(l(4),f(s.editingId?"Editar facturaci\xF3n":"Nuevo perfil de facturaci\xF3n"),l(3),d("formGroup",s.form),l(4),d("ngClass",c(11,F,s.isInvalid("legalName"))),l(4),d("ngClass",c(13,F,s.isInvalid("email"))),l(4),d("ngClass",c(15,F,s.isInvalid("taxId"))),l(4),d("ngClass",c(17,F,s.isInvalid("phone"))),l(4),d("ngClass",c(19,F,s.isInvalid("country"))),l(4),d("ngClass",c(21,F,s.isInvalid("state"))),l(4),d("ngClass",c(23,F,s.isInvalid("addressLine1"))),l(4),d("ngClass",c(25,F,s.isInvalid("city"))),l(7),d("disabled",s.form.invalid||!s.hasChanges()||s.submitting()))},dependencies:[x,R,J,$,j,te,q,G,z,H],styles:["[_nghost-%COMP%]{display:block}"]})};var me=r=>({"border-error focus:border-error":r}),de=class r{fb=p(Z);accountService=p(h);submitting=g(!1);form=this.fb.nonNullable.group({fullName:["",[u.required,u.minLength(2)]],email:["",[u.required,u.email]],phone:["",[u.required]]});initialValue=this.form.getRawValue();ngOnInit(){this.fetchProfile()}fetchProfile(){this.submitting.set(!0),this.accountService.getProfile().subscribe({next:n=>{this.form.patchValue({fullName:n.fullName??"",email:n.email??"",phone:n.phone??""}),this.updateInitialValue()},error:()=>this.submitting.set(!1),complete:()=>this.submitting.set(!1)})}save(){this.form.invalid||(this.submitting.set(!0),this.accountService.updateProfile(this.form.getRawValue()).subscribe({next:()=>{this.updateInitialValue(),this.submitting.set(!1)},error:()=>this.submitting.set(!1)}))}hasChanges(){return!this.isEqual(this.form.getRawValue(),this.initialValue)}updateInitialValue(){this.initialValue=this.form.getRawValue(),this.form.markAsPristine()}isEqual(n,e){let s=Object.keys(n);return s.length===Object.keys(e).length&&s.every(m=>n[m]===e[m])}isInvalid(n){let e=this.form.get(n);return!!e&&e.invalid&&(e.dirty||e.touched)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-user-profile"]],decls:22,vars:11,consts:[[1,"space-y-4"],[1,"text-xl","font-bold"],[1,"text-sm","text-base-content/70"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","bg-base-200/60","rounded-lg","p-5","max-w-3xl",3,"ngSubmit","formGroup"],[1,"md:col-span-2","flex","flex-col","gap-2"],[1,"font-semibold"],["type","text","formControlName","fullName","placeholder","Tu nombre",1,"input","input-bordered","w-full","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],[1,"flex","flex-col","gap-2"],["type","email","formControlName","email","placeholder","tucorreo@mail.com",1,"input","input-bordered","w-full","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["type","text","formControlName","phone","placeholder","+595...",1,"input","input-bordered","w-full","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],[1,"md:col-span-2","flex","justify-end","pt-1"],["type","submit",1,"btn","btn-primary","min-w-32",3,"disabled"]],template:function(e,s){e&1&&(i(0,"section",0)(1,"div")(2,"h2",1),o(3,"Mi perfil"),t(),i(4,"p",2),o(5,"Actualiza tus datos personales."),t()(),i(6,"form",3),C("ngSubmit",function(){return s.save()}),i(7,"div",4)(8,"span",5),o(9,"Nombre completo"),t(),a(10,"input",6),t(),i(11,"div",7)(12,"span",5),o(13,"Email"),t(),a(14,"input",8),t(),i(15,"div",7)(16,"span",5),o(17,"Tel\xE9fono"),t(),a(18,"input",9),t(),i(19,"div",10)(20,"button",11),o(21," Guardar "),t()()()()),e&2&&(l(6),d("formGroup",s.form),l(4),d("ngClass",c(5,me,s.isInvalid("fullName"))),l(4),d("ngClass",c(7,me,s.isInvalid("email"))),l(4),d("ngClass",c(9,me,s.isInvalid("phone"))),l(2),d("disabled",s.form.invalid||!s.hasChanges()||s.submitting()))},dependencies:[x,R,J,$,j,q,G,z,H],styles:["[_nghost-%COMP%]{display:block}"]})};var He=r=>["/user/orders",r],Ze=(r,n)=>n.id;function Je(r,n){r&1&&(i(0,"p"),o(1,"Cargando pedidos..."),t())}function Ke(r,n){r&1&&(i(0,"div",3)(1,"p"),o(2,"Aun no tienes pedidos."),t(),i(3,"a",5),o(4,"Ver productos"),t()())}function Qe(r,n){if(r&1&&(i(0,"article",6)(1,"div",7)(2,"div")(3,"p",2),o(4),t(),i(5,"h3",8),o(6),t()(),i(7,"div",9)(8,"p",10),o(9),N(10,"guaranies"),t(),i(11,"p",11),o(12),N(13,"date"),t()()(),i(14,"div",12)(15,"span"),o(16),t(),i(17,"a",13),o(18," Ver detalles "),t()()()),r&2){let e=n.$implicit,s=v(2);l(4),f(e.orderNumber||e.id),l(2),f(s.statusLabel(e.status)),l(3),f(B(10,7,e.total??0)),l(3),f(K(13,9,e.createdAt,"dd/MM/yyyy HH:mm:ss")),l(4),I("",(e.items==null?null:e.items.length)||0," ",((e.items==null?null:e.items.length)||0)===1?"item":"items"),l(),d("routerLink",c(12,He,e.id))}}function We(r,n){if(r&1&&(i(0,"div",4),w(1,Qe,19,14,"article",6,Ze),t()),r&2){let e=v();l(),k(e.orders())}}var ce=class r{accountService=p(h);orders=g([]);loading=g(!0);statusMap={pending:"Pendiente",paid:"Pagado",shipped:"Enviado",delivered:"Entregado",cancelled:"Cancelado",refunded:"Reembolsado"};ngOnInit(){this.loadOrders()}loadOrders(){this.loading.set(!0),this.accountService.getOrders(20,0).subscribe({next:n=>this.orders.set(n??[]),error:()=>this.orders.set([]),complete:()=>this.loading.set(!1)})}statusLabel(n){if(!n)return"Pendiente";let e=n.toLowerCase();return this.statusMap[e]??n}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-user-orders"]],decls:9,vars:1,consts:[[1,"space-y-4"],[1,"text-xl","font-bold"],[1,"text-sm","text-base-content/70"],[1,"text-base-content/70","space-y-3"],[1,"space-y-3"],["routerLink","/products",1,"btn","btn-primary","btn-sm"],[1,"p-4","border","border-base-300","rounded-lg","bg-base-100","shadow-sm"],[1,"flex","flex-wrap","items-center","justify-between","gap-2"],[1,"font-semibold","text-lg"],[1,"text-right"],[1,"font-semibold"],[1,"text-xs","text-base-content/70"],[1,"mt-3","flex","items-center","justify-between","text-sm","text-base-content/80"],[1,"btn","btn-outline","btn-sm",3,"routerLink"]],template:function(e,s){e&1&&(i(0,"section",0)(1,"div")(2,"h2",1),o(3,"Mis pedidos"),t(),i(4,"p",2),o(5,"Revisa tu historial de compras."),t()(),y(6,Je,2,0,"p")(7,Ke,5,0,"div",3)(8,We,3,0,"div",4),t()),e&2&&(l(6),_(s.loading()?6:s.orders().length===0?7:8))},dependencies:[x,D,Y,ie],styles:["[_nghost-%COMP%]{display:block}"]})};var Se=r=>["/product",r],Xe=()=>[];function Ye(r,n){if(r&1&&(i(0,"div",17)(1,"a",18),a(2,"img",19),N(3,"productImage"),t(),i(4,"div",20)(5,"div",21)(6,"div",22)(7,"a",23),o(8),t(),i(9,"p",24),o(10),t()()(),i(11,"div",25)(12,"p",2),o(13),N(14,"guaranies"),t(),i(15,"span",10),o(16),N(17,"guaranies"),t()()()()),r&2){let e=n.$implicit,s=v(4);l(),d("routerLink",c(17,Se,(e.product==null?null:e.product.id)||(e.product==null?null:e.product.slug)||"")),l(),d("alt",ge((e.product==null?null:e.product.title)||e.name))("src",K(3,10,(e.product==null?null:e.product.images)??S(19,Xe),"medium"),pe),l(5),d("routerLink",c(20,Se,(e.product==null?null:e.product.id)||(e.product==null?null:e.product.slug)||"")),l(),A(" ",(e.product==null?null:e.product.title)||e.name||"Producto"," "),l(2),A(" ",e.product==null?null:e.product.description," "),l(3),I(" ",e.quantity||1," x ",B(14,13,e.unitPrice??e.price??0)," "),l(3),f(B(17,15,s.itemSubtotal(e)))}}function et(r,n){if(r&1&&(i(0,"div",13),w(1,Ye,18,22,"div",17,fe),t()),r&2){let e=v();l(),k(e.items)}}function tt(r,n){r&1&&(i(0,"p",2),o(1,"No hay items en este pedido."),t())}function it(r,n){if(r&1&&(i(0,"div",1)(1,"div")(2,"p",2),o(3),t(),i(4,"h1",3),o(5),t(),i(6,"p",4),o(7),N(8,"date"),t()(),i(9,"div",5)(10,"p",6),o(11),N(12,"guaranies"),t()()(),i(13,"div",7)(14,"div",8)(15,"div",9)(16,"h3",10),o(17,"Direcci\xF3n de env\xEDo"),t(),i(18,"p",11),o(19),t(),i(20,"p",11),o(21),t(),i(22,"p",11),o(23),t()(),i(24,"div",9)(25,"h3",10),o(26,"Facturaci\xF3n"),t(),i(27,"p",11),o(28),t(),i(29,"p",11),o(30),t(),i(31,"p",11),o(32),t(),i(33,"p",11),o(34),t()()(),i(35,"div",12)(36,"h2",6),o(37,"Productos"),t(),y(38,et,3,0,"div",13)(39,tt,2,0,"p",2),t()(),i(40,"div",14)(41,"a",15),o(42,"Volver a pedidos"),t(),i(43,"a",16),o(44,"Seguir comprando"),t()()),r&2){let e=n,s=v(2);l(3),f(e.orderNumber||e.id),l(2),f(s.statusLabel(e.status)),l(2),f(K(8,19,e.createdAt,"dd/MM/yyyy HH:mm:ss")),l(4),f(B(12,22,e.total??0)),l(8),f(e.shippingAddress==null?null:e.shippingAddress.fullName),l(2),f(e.shippingAddress==null?null:e.shippingAddress.phone),l(2),U("",e.shippingAddress==null?null:e.shippingAddress.street,", ",e.shippingAddress==null?null:e.shippingAddress.city,", ",e.shippingAddress==null?null:e.shippingAddress.state," - ",e.shippingAddress==null?null:e.shippingAddress.country),l(5),f(e.billingProfile==null?null:e.billingProfile.legalName),l(2),A("RUC: ",e.billingProfile==null?null:e.billingProfile.taxId),l(2),I("",e.billingProfile==null?null:e.billingProfile.email," - ",e.billingProfile==null?null:e.billingProfile.phone),l(2),U("",e.billingProfile==null?null:e.billingProfile.addressLine1,", ",e.billingProfile==null?null:e.billingProfile.city,", ",e.billingProfile==null?null:e.billingProfile.state," - ",e.billingProfile==null?null:e.billingProfile.country),l(4),_(e.items!=null&&e.items.length?38:39)}}function nt(r,n){r&1&&(i(0,"p"),o(1,"No se encontr\xF3 el pedido."),t())}function rt(r,n){if(r&1&&(i(0,"section",0),y(1,it,45,24)(2,nt,2,0,"p"),t()),r&2){let e,s=v();l(),_((e=s.order())?1:2,e)}}function ot(r,n){r&1&&(i(0,"p"),o(1,"Cargando pedido..."),t())}var ue=class r{accountService=p(h);route=p(be);order=g(null);loading=g(!0);statusMap={pending:"Pendiente",paid:"Pagado",shipped:"Enviado",delivered:"Entregado",cancelled:"Cancelado",refunded:"Reembolsado"};ngOnInit(){let n=this.route.snapshot.params.id;n&&this.loadOrder(n)}loadOrder(n){this.loading.set(!0),this.accountService.getOrder(n).subscribe({next:e=>this.order.set(e),error:()=>this.order.set(null),complete:()=>this.loading.set(!1)})}statusLabel(n){if(!n)return"Pendiente";let e=n.toLowerCase();return this.statusMap[e]??n}itemCount(n){return n?.reduce((e,s)=>e+(s.quantity??0),0)??0}itemSubtotal(n){let e=n.quantity??0,s=n.unitPrice??n.price??0;return e*s}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-user-order-detail"]],decls:2,vars:1,consts:[[1,"space-y-4"],[1,"flex","items-center","justify-between","gap-3"],[1,"text-sm","text-base-content/70"],[1,"text-2xl","font-bold"],[1,"text-xs","text-base-content/70"],[1,"text-right"],[1,"text-lg","font-semibold"],[1,"grid","gap-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"p-4","border","border-base-300","rounded-xl","bg-base-100","space-y-1"],[1,"font-semibold"],[1,"text-sm","text-base-content/80"],[1,"p-4","border","border-base-300","rounded-xl","bg-base-100","space-y-3"],[1,"space-y-3"],[1,"pt-2","flex","gap-2"],["routerLink","/user/orders",1,"btn","btn-outline","btn-sm"],["routerLink","/products",1,"btn","btn-primary","btn-sm"],[1,"relative","flex","bg-base-100","shadow-sm","rounded-lg","border","border-base-200","overflow-hidden"],[1,"w-40","md:w-48","shrink-0","block",3,"routerLink"],[1,"w-full","h-28","md:h-32","object-cover",3,"src","alt"],[1,"flex-1","p-3","flex","flex-col","gap-2"],[1,"flex","items-start","gap-3"],[1,"flex-1"],[1,"font-semibold","text-base","leading-tight","line-clamp-2","no-underline",3,"routerLink"],[1,"text-sm","text-base-content/70","line-clamp-2"],[1,"flex","items-end","justify-between","mt-auto"]],template:function(e,s){e&1&&y(0,rt,3,1,"section",0)(1,ot,2,0,"p"),e&2&&_(s.loading()?1:0)},dependencies:[x,D,Y,ie,ye],styles:["[_nghost-%COMP%]{display:block}"]})};var st=[{path:"",component:ne,children:[{path:"profile",component:de},{path:"directions/new",component:se},{path:"directions",component:oe},{path:"billing/new",component:ae},{path:"billing",component:re},{path:"orders",component:ce},{path:"orders/:id",component:ue},{path:"**",redirectTo:"profile"}]}],yi=st;export{yi as default,st as userRoutes};
