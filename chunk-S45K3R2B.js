import{a as b,b as a,c as w,d as C,e as v,g as x,h as y,i as S,j as N}from"./chunk-UMUPNWUY.js";import{$ as r,Aa as A,C as p,Ga as h,J as P,K as R,P as f,Q as t,R as o,S as s,X as c,Y as L,aa as D,o as m,u,ya as T,z as d,za as g}from"./chunk-SFL4ZYLX.js";var E=class l{static \u0275fac=function(e){return new(e||l)};static \u0275cmp=p({type:l,selectors:[["app-auth-layout"]],decls:5,vars:0,consts:[[1,"flex","items-center","justify-center","min-h-screen","bg-gray-900"],[1,"w-full","max-w-md","bg-gray-800","shadow-2xl","rounded-lg","p-6"],[1,"text-3xl","font-bold","text-white","text-center","mb-6","mt-6"]],template:function(e,i){e&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),r(3," Autenticaci\xF3n "),o(),s(4,"router-outlet"),o()())},dependencies:[T],styles:["[_nghost-%COMP%]{display:block}"]})};var F=class l{fb=m(S);hasError=u(!1);isPosting=u(!1);router=m(g);authService=m(h);loginForm=this.fb.group({email:["",[a.required,a.email]],password:["",[a.required,a.minLength(6)]]});onSubmit(){this.loginForm.invalid&&(this.hasError.set(!0),setTimeout(()=>{this.hasError.set(!1)},2e3));let{email:n="",password:e=""}=this.loginForm.value;this.authService.login(n,e).subscribe(i=>{if(i){this.router.navigateByUrl("/");return}this.hasError.set(!0),setTimeout(()=>{this.hasError.set(!1)},2e3)})}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=p({type:l,selectors:[["app-login"]],decls:17,vars:1,consts:[[1,"gap-2",3,"ngSubmit","formGroup"],[1,"fieldset","bg-base-200","border-base-300","rounded-box","w-full","p-6"],[1,"fieldset-legend","text-lg","font-semibold"],[1,"flex","flex-col","gap-4"],["for","email",1,"label"],["type","email","placeholder","Email","formControlName","email",1,"input","w-full"],["for","password",1,"label"],["type","password","placeholder","Password","formControlName","password",1,"input","w-full"],[1,"w-full","flex","justify-end"],[1,"text-slate-700"],["routerLink","/auth/register",1,"text-primary","hover:underline"],[1,"btn","btn-neutral","w-full"]],template:function(e,i){e&1&&(t(0,"form",0),c("ngSubmit",function(){return i.onSubmit()}),t(1,"fieldset",1)(2,"legend",2),r(3,"Login"),o(),t(4,"div",3)(5,"label",4),r(6,"Email"),o(),s(7,"input",5),t(8,"label",6),r(9,"Password"),o(),s(10,"input",7),t(11,"div",8)(12,"p",9)(13,"a",10),r(14," Registrarse "),o()()(),t(15,"button",11),r(16,"Login"),o()()()()),e&2&&f("formGroup",i.loginForm)},dependencies:[A,N,v,b,w,C,x,y],styles:["[_nghost-%COMP%]{display:block}"]})};function j(l,n){l&1&&(t(0,"div",13),r(1," Las contrase\xF1as no coinciden "),o())}function B(l,n){if(l&1&&(t(0,"p",14),r(1),o()),l&2){let e=L();d(),D(e.error())}}var _=class l{fb=m(S);error=u(null);isPosting=u(!1);router=m(g);authService=m(h);registerForm=this.fb.group({email:["",[a.required,a.email]],password:["",[a.required,a.minLength(6)]],confirmPassword:["",[a.required]],fullName:["",[a.required,a.minLength(1)]]},{validators:this.passwordsMatchValidator});passwordsMatchValidator(n){let e=n.get("password")?.value,i=n.get("confirmPassword")?.value;return e===i?null:{passwordMismatch:!0}}onSubmit(){let{email:n="",password:e="",fullName:i=""}=this.registerForm.value,M=this.authService.register(n,e,i).subscribe(q=>{if(q){this.router.navigateByUrl("/");return}this.error.set("No se pudo crear la cuenta"),console.log(M),setTimeout(()=>{this.error.set(null)},5e3)})}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=p({type:l,selectors:[["app-register"]],decls:21,vars:3,consts:[[1,"gap-2",3,"ngSubmit","formGroup"],[1,"fieldset","bg-base-200","border-base-300","rounded-box","w-full","p-6"],[1,"fieldset-legend","text-lg","font-semibold"],[1,"flex","flex-col","gap-4"],["for","fullName",1,"label"],["type","fullName","placeholder","Nombre completo","formControlName","fullName",1,"input","w-full"],["for","email",1,"label"],["type","email","placeholder","Email","formControlName","email",1,"input","w-full"],["for","password",1,"label"],["type","password","placeholder","Password","formControlName","password",1,"input","w-full"],["for","confirmPassword",1,"label"],["type","password","placeholder","Repite tu password","formControlName","confirmPassword",1,"input","w-full"],[1,"btn","btn-neutral","w-full"],[1,"text-error","text-sm","mt-1"],[1,"text-red-500"]],template:function(e,i){e&1&&(t(0,"form",0),c("ngSubmit",function(){return i.onSubmit()}),t(1,"fieldset",1)(2,"legend",2),r(3,"Register"),o(),t(4,"div",3)(5,"label",4),r(6,"Nombre completo"),o(),s(7,"input",5),t(8,"label",6),r(9,"Email"),o(),s(10,"input",7),t(11,"label",8),r(12,"Password"),o(),s(13,"input",9),t(14,"label",10),r(15,"Confirmar password"),o(),s(16,"input",11),t(17,"button",12),r(18,"Login"),o(),P(19,j,2,0,"div",13),o()()(),P(20,B,2,1,"p",14)),e&2&&(f("formGroup",i.registerForm),d(19),R(i.registerForm.hasError("passwordMismatch")&&i.registerForm.touched?19:-1),d(),R(i.error()?20:-1))},dependencies:[N,v,b,w,C,x,y],styles:["[_nghost-%COMP%]{display:block}"]})};var I=[{path:"",component:E,children:[{path:"login",component:F},{path:"register",component:_},{path:"**",redirectTo:"login"}]}],ne=I;export{I as authRoutes,ne as default};
