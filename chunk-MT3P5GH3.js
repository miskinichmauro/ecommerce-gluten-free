import{k as U}from"./chunk-6BMQA4JT.js";import{$ as x,C as f,Ca as L,F as g,Ga as ie,I as J,Ia as re,Ja as k,Ka as ne,M as Q,N as W,Na as l,O as X,Oa as oe,P as Y,Pa as T,Q as R,R as $,S as I,T as s,U as p,V as z,Z as N,ba as C,e as c,f as H,g as q,ha as j,i as m,ia as h,j as o,ka as F,m as u,ma as D,na as Z,p as n,q as w,r as M,s as G,t as K,ta as ee,v as b,va as te,wa as y}from"./chunk-AZKX45BH.js";var ae=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=g({type:i,selectors:[["app-logo"]],decls:5,vars:0,consts:[["id","logo"],["routerLink","/",1,"text-lg","md:text-2xl","font-bold","text-white"],[1,"text-blue-500"]],template:function(t,r){t&1&&(s(0,"div",0)(1,"a",1),h(2,"Gluten"),s(3,"span",2),h(4," Free"),p()()())},dependencies:[k],styles:["[_nghost-%COMP%]{display:block}"]})};var ge=()=>({exact:!0});function he(i,e){if(i&1){let t=N();s(0,"a",2),x("click",function(){w(t);let a=C(2);return M([a.configurationService.toggleSidebarItemsStatus("closed"),a.configurationService.toggleSidebarPageStatus("closed")])}),h(1),p()}if(i&2){let t=C().$implicit;I("routerLink",t.route)("routerLinkActiveOptions",D(3,ge)),f(),F(" ",t.label," ")}}function ve(i,e){if(i&1&&Q(0,he,2,4,"a",1),i&2){let t=e.$implicit,r=C();W(!t.adminOnly||r.authService.isAdmin()?0:-1)}}var A=class i{menuItems=y.required();authService=n(T);configurationService=n(U);static \u0275fac=function(t){return new(t||i)};static \u0275cmp=g({type:i,selectors:[["nav-items"]],inputs:{menuItems:[1,"menuItems"]},decls:3,vars:0,consts:[[1,"flex","flex-col","gap-2","px-4"],["routerLinkActive","text-secondary",1,"p-2","rounded-md","hover:bg-gray-800","transition",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","text-secondary",1,"p-2","rounded-md","hover:bg-gray-800","transition",3,"click","routerLink","routerLinkActiveOptions"]],template:function(t,r){t&1&&(s(0,"nav",0),R(1,ve,1,1,null,null,X),p()),t&2&&(f(),$(r.menuItems()))},dependencies:[k,ne],styles:["[_nghost-%COMP%]{display:block}"]})};var se=class i{menuItems=y.required();authService=n(T);configurationService=n(U);open(){return this.configurationService.sidebarItemsStatus()==="open"}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=g({type:i,selectors:[["sidebar-items"]],inputs:{menuItems:[1,"menuItems"]},decls:6,vars:5,consts:[[1,"fixed","inset-0","bg-base-100","z-50","transform","transition-transform","duration-500","flex","flex-col"],[1,"flex","justify-end"],[1,"btn","btn-ghost",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[3,"menuItems"]],template:function(t,r){t&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),x("click",function(){return r.configurationService.toggleSidebarItemsStatus("closed")}),G(),s(3,"svg",3),z(4,"path",4),p()()(),K(),z(5,"nav-items",5),p()),t&2&&(j("translate-x-0",r.open())("-translate-x-full",!r.open()),f(5),I("menuItems",r.menuItems()))},dependencies:[A],styles:["[_nghost-%COMP%]{display:block}"]})};var v=class i{loading=b(!1);success=b(!1);activateLoading(){this.loading.set(!0),this.success.set(!1)}deactivateLoading(){this.loading.set(!1)}activateSuccess(){this.loading.set(!1),this.success.set(!0),setTimeout(()=>this.success.set(!1),800)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})};var _=`${l.baseUrl}/contacts`,be={id:"new",title:"",phone:"",email:""},ce=class i{http=n(L);contactsCache=new Map;toastService=n(v);getAll(){return this.contactsCache.size?c(Array.from(this.contactsCache.values())):this.http.get(_).pipe(o(e=>e.forEach(t=>this.contactsCache.set(t.id,t))))}getById(e){return e==="new"?c(be):this.contactsCache.has(e)?c(this.contactsCache.get(e)):this.http.get(`${_}/${e}`).pipe(o(t=>this.contactsCache.set(e,t)))}create(e){return this.toastService.activateLoading(),this.http.post(_,e).pipe(o(t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),m(()=>this.toastService.deactivateLoading()))}update(e,t){return this.toastService.activateLoading(),this.http.patch(`${_}/${e}`,t).pipe(o(async r=>{this.insertOrUpdateCache(r),this.toastService.activateSuccess()}),m(()=>this.toastService.deactivateLoading()))}delete(e){return this.toastService.activateLoading(),this.http.delete(`${_}/${e}`).pipe(o(async()=>{this.contactsCache.delete(e),this.toastService.activateSuccess()}),m(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.contactsCache.set(e.id,e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})};var pe=class i{activateRoute=n(ie);router=n(re);currentPage=oe(this.activateRoute.queryParamMap.pipe(q(e=>e.get("page")?+e.get("page"):1),q(e=>isNaN(e)?1:e)),{initialValue:1});setPage(e){this.router.navigate([],{queryParams:{page:e},queryParamsHandling:"merge"})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})};var E=`${l.baseUrl}/products`,Ce={id:"new",title:"",price:0,unitOfMeasure:"",description:"",slug:"",stock:0,tags:[""],deleteAt:null,imagesName:[""],user:{}},V=class i{constructor(){}http=n(L);productsCache=new Map;productCache=new Map;toastService=n(v);getProducts(e={}){let t=l.cantProducts,{limit:r=t,offset:a=0,isFeatured:P=!1}=e,S=P?"isFeatured":`${r}-${a}`;return this.productsCache.has(S)?c(this.productsCache.get(S)):this.http.get(E,{params:{limit:r,offset:a,isFeatured:P},responseType:"json"}).pipe(o(fe=>this.productsCache.set(S,fe)))}getProductByIdSlug(e){return e==="new"?c(Ce):this.productCache.has(e)?c(this.productCache.get(e)):this.http.get(`${E}/${e}`,{responseType:"json"}).pipe(o(r=>this.productCache.set(e,r)))}createProduct(e){return this.toastService.activateLoading(),this.http.post(`${E}`,e).pipe(o(t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),m(()=>this.toastService.deactivateLoading()))}updateProduct(e,t){return this.toastService.activateLoading(),this.http.patch(`${E}/${e}`,t).pipe(o(async r=>{this.insertOrUpdateCache(r),this.toastService.activateSuccess()}),m(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.productCache.get(e.id)?(this.productCache.set(e.id,e),this.productsCache.forEach(r=>{r.products=r.products.map(a=>a.id===e.id?e:a)})):(this.productCache.set(e.id,e),this.productsCache.clear())}static \u0275fac=function(t){return new(t||i)};static \u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})};function vt(){let i=n(V),e=b(null),t=b(!0),r=b(null);async function a(P){t.set(!0),r.set(null);try{let S=await H(i.getProducts(P));e.set(S)}catch{r.set("Error al cargar los productos")}finally{t.set(!1)}}return{productResponse:e,loading:t,error:r,loadProducts:a}}var ye=()=>[],Pe=i=>({page:i});function Se(i,e){if(i&1){let t=N();s(0,"button",3),x("click",function(){let a=w(t).$implicit,P=C();return M(P.activePage.set(a))}),h(1),p()}if(i&2){let t=e.$implicit,r=C();j("btn-primary",t===r.activePage()),I("routerLink",D(5,ye))("queryParams",Z(6,Pe,t)),f(),F(" ",t," ")}}function Ie(i,e){i&1&&(s(0,"button",2),h(1,"0"),p())}var me=class i{pages=y(0);currentPage=y(1);activePage=te(this.currentPage);getPagesList=ee(()=>Array.from({length:this.pages()},(e,t)=>t+1));static \u0275fac=function(t){return new(t||i)};static \u0275cmp=g({type:i,selectors:[["pagination"]],inputs:{pages:[1,"pages"],currentPage:[1,"currentPage"]},decls:4,vars:1,consts:[[1,"join","flex","justify-center","items-center"],[1,"join-item","btn",3,"btn-primary","routerLink","queryParams"],[1,"join-item","btn"],[1,"join-item","btn",3,"click","routerLink","queryParams"]],template:function(t,r){t&1&&(s(0,"div",0),R(1,Se,2,8,"button",1,Y,!1,Ie,2,0,"button",2),p()),t&2&&(f(),$(r.getPagesList()))},dependencies:[k],styles:["[_nghost-%COMP%]{display:block}"]})};var O=`${l.baseUrl}/recipes`,xe={id:"new",title:"",text:""},ue=class i{http=n(L);recipesCache=new Map;toastService=n(v);getAll(){return this.recipesCache.size?c(Array.from(this.recipesCache.values())):this.http.get(O).pipe(o(e=>e.forEach(t=>this.recipesCache.set(t.id,t))))}getById(e){return e==="new"?c(xe):this.recipesCache.has(e)?c(this.recipesCache.get(e)):this.http.get(`${O}/${e}`).pipe(o(t=>this.recipesCache.set(e,t)))}create(e){return this.toastService.activateLoading(),this.http.post(O,e).pipe(o(async t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),m(()=>this.toastService.deactivateLoading()))}update(e,t){return this.toastService.activateLoading(),this.http.patch(`${O}/${e}`,t).pipe(o(r=>{this.insertOrUpdateCache(r),this.toastService.activateSuccess()}),m(()=>this.toastService.deactivateLoading()))}delete(e){return this.toastService.activateLoading(),this.http.delete(`${O}/${e}`).pipe(o(async()=>{this.recipesCache.delete(e),this.toastService.activateSuccess()}),m(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.recipesCache.set(e.id,e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})};var le=l.baseUrl,de=class i{transform(e){if(typeof e=="string")return`${le}/files/product/${e}`;let t=e[0];return t?`${le}/files/product/${t}`:"assets/images/default-image.jpg"}static \u0275fac=function(t){return new(t||i)};static \u0275pipe=J({name:"productImage",type:i,pure:!0})};export{ae as a,A as b,se as c,v as d,ce as e,pe as f,V as g,de as h,vt as i,me as j,ue as k};
