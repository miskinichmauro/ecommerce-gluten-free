import{a as L,b as d,c as y,d as N,e as F,g as T,h as D,i as M,j as P,k as V,l as G,m as R}from"./chunk-MS27SCZK.js";import{B as l,E as C,Ha as _,Ia as w,L as m,M as u,Oa as E,R as b,S as n,T as r,U as c,Y as S,_ as v,aa as g,ha as a,ja as x,o as s,p as f,q as h,u as p}from"./chunk-S4N66AUQ.js";function j(e,i){e&1&&c(0,"loading")}function q(e,i){e&1&&c(0,"success")}function A(e,i){if(e&1){let t=S();n(0,"form",2),v("ngSubmit",function(){f(t);let I=g();return h(I.onSubmit())}),n(1,"fieldset",3)(2,"legend",4),a(3,"Login"),r(),n(4,"div",5)(5,"label",6),a(6,"Email"),r(),c(7,"input",7),n(8,"label",8),a(9,"Password"),r(),c(10,"input",9),n(11,"div",10)(12,"p",11)(13,"a",12),a(14," Registrarse "),r()()(),n(15,"button",13),a(16," Login "),r()()()()}if(e&2){let t=g();b("formGroup",t.loginForm)}}function B(e,i){if(e&1&&(n(0,"div",1),a(1),r()),e&2){let t=g();l(),x(" ",t.hasError()," ")}}var k=class e{authService=s(E);configurationService=s(V);fb=s(M);router=s(_);loading=p(!1);hasError=p(!1);success=p(!1);loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]]});onSubmit(){this.loginForm.invalid&&(this.hasError.set(!0),setTimeout(()=>{this.hasError.set(!1)},2e3));let{email:i="",password:t=""}=this.loginForm.value;this.loading.set(!0),this.authService.login(i,t).subscribe(async o=>{if(await this.isSuccess(),o){this.router.navigateByUrl("/");return}this.hasError.set(!0),setTimeout(()=>{this.hasError.set(!1)},2e3)})}async isSuccess(){this.loading.set(!1),this.success.set(!0),await new Promise(i=>setTimeout(i,800)),this.configurationService.toggleSidebarPageStatus("closed"),this.configurationService.toggleSidebarItemsStatus("closed")}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=C({type:e,selectors:[["app-login"]],decls:4,vars:4,consts:[[1,"gap-2",3,"formGroup"],[1,"text-error","text-sm","mt-1"],[1,"gap-2",3,"ngSubmit","formGroup"],[1,"fieldset","bg-base-200","border-base-300","rounded-box","w-full","p-6"],[1,"fieldset-legend","text-lg","font-semibold"],[1,"flex","flex-col","gap-4"],["for","email",1,"label"],["type","email","placeholder","Email","formControlName","email",1,"input","w-full"],["for","password",1,"label"],["type","password","placeholder","Password","formControlName","password",1,"input","w-full"],[1,"w-full","flex","justify-end"],[1,"text-slate-700"],["routerLink","/auth/register",1,"text-primary","hover:underline"],[1,"btn","btn-neutral","w-full"]],template:function(t,o){t&1&&(m(0,j,1,0,"loading"),m(1,q,1,0,"success"),m(2,A,17,1,"form",0),m(3,B,2,1,"div",1)),t&2&&(u(o.loading()?0:-1),l(),u(o.success()?1:-1),l(),u(!o.loading()&&!o.success()&&!o.hasError()?2:-1),l(),u(o.hasError()?3:-1))},dependencies:[w,P,F,L,y,N,T,D,G,R],styles:["[_nghost-%COMP%]{display:block}"]})};export{k as a};
