import{a as fe,b as v,c as ge,d as ve,e as be,f as he,g as xe,h as Pe,i as ye,j as Se}from"./chunk-AJLQRE6Z.js";import{a as Ce,b as O,c as q,d as _e,e as Ee,f as we}from"./chunk-4OLLHM4R.js";import{$ as a,Aa as S,Ba as ue,C as f,Fa as pe,Ga as R,J,K,M as oe,N,O as L,P as c,Q as o,R as n,S as d,T as ne,U as ie,W as V,X as h,Y as _,Z as ae,_ as b,a as ee,aa as P,ba as g,da as le,ea as Q,f as A,fa as W,g as te,ga as X,ka as se,la as E,na as y,o as u,p as M,pa as de,q as T,r as U,s as Z,u as x,xa as ce,y as re,ya as me,z as l,za as I}from"./chunk-ZQORN3D4.js";var z=class i{authService=u(R);user=se(()=>this.authService.user());static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["app-admin-dashboard-layout"]],decls:41,vars:1,consts:[[1,"bg-slate-800","overflow-y-scroll","w-screen","h-screen","antialiased","text-slate-300","selection:bg-blue-600","selection:text-white"],[1,"flex","flex-col","relative","w-screen"],["id","menu",1,"bg-gray-900","min-h-screen","z-10","text-slate-300","w-64","fixed","left-0","h-screen","overflow-y-scroll"],["id","logo",1,"my-4","px-6"],["routerLink","/",1,"text-lg","md:text-2xl","font-bold","text-white"],[1,"text-blue-500"],[1,"text-slate-500","text-sm"],["id","profile",1,"px-6","py-10"],[1,"text-slate-500"],["routerLink","/admin/products",1,"inline-flex","space-x-2","items-center"],[1,"text-sm","md:text-base","font-bold"],["id","nav",1,"w-full","px-6"],["routerLink","/admin/products",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"],[1,"flex","flex-col"],[1,"text-lg","font-bold","leading-5","text-white"],[1,"text-sm","text-white/50","hidden","md:block"],["routerLink","/admin/products","routerLinkActive","bg-blue-800",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"],[1,"text-lg","text-slate-300","font-bold","leading-5"],[1,"text-sm","text-slate-500","hidden","md:block"],[1,"divider","my-2"],[1,"btn","btn-ghost","text-secondary","w-full",3,"click"],[1,"flex-1","ml-64","pt-5","px-5"]],template:function(e,r){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),a(5,"Gluten"),o(6,"span",5),a(7," Free"),n()(),o(8,"p",6),a(9,"Panel administrativo"),n()(),o(10,"div",7)(11,"p",8),a(12,"Bienvenido"),n(),o(13,"a",9),d(14,"span"),o(15,"span",10),a(16),n()()(),o(17,"div",11)(18,"a",12)(19,"div"),U(),o(20,"svg",13),d(21,"path",14),n()(),Z(),o(22,"div",15)(23,"span",16),a(24,"Dashboard"),n(),o(25,"span",17),a(26,"Data Overview"),n()()(),o(27,"a",18)(28,"div"),U(),o(29,"svg",19),d(30,"path",20),n()(),Z(),o(31,"div",15)(32,"span",21),a(33,"Productos"),n(),o(34,"span",22),a(35,"Listado de productos"),n()()(),d(36,"div",23),o(37,"button",24),h("click",function(){return r.authService.logout()}),a(38," Cerrar sesi\xF3n "),n()()()(),o(39,"div",25),d(40,"router-outlet"),n()()),e&2){let s;l(16),g(" ",(s=r.user())==null?null:s.fullName," ")}},dependencies:[me,S,ue],styles:["[_nghost-%COMP%]{display:block}"]})};var Fe=async()=>{let i=u(R);return await A(i.checkStatus()),i.isAdmin()};var ke=i=>["/admin/product",i],Ae=(i,t)=>t.id;function Me(i,t){if(i&1&&(o(0,"tr")(1,"th")(2,"label"),a(3),n()(),o(4,"td")(5,"div",2)(6,"div",3)(7,"div",4),d(8,"img",5),W(9,"productImage"),n()(),o(10,"div")(11,"a",6),a(12),n(),o(13,"div",7),a(14),n()()()(),o(15,"td"),a(16),W(17,"currency"),n(),o(18,"td"),a(19),n(),o(20,"th")(21,"a",8),a(22," Detalles "),n()()()),i&2){let e=t.$implicit,r=t.$index;l(3),g(" ",r+1," "),l(5),c("src",X(9,9,e.imagesName),re)("alt",e.title),l(3),c("routerLink",Q(13,ke,e.id)),l(),g(" ",e.title," "),l(2),g(" ",e.description," "),l(2),g(" ",X(17,11,e.price)," "),l(3),g(" ",e.stock," "),l(2),c("routerLink",Q(15,ke,e.id))}}var $=class i{products=y.required();static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["products-table"]],inputs:{products:[1,"products"]},decls:17,vars:0,consts:[[1,"overflow-x-auto"],[1,"table"],[1,"flex","items-center","gap-3"],[1,"avatar"],[1,"mask","mask-squircle","h-12","w-12"],[3,"src","alt"],[1,"font-bold","hover:text-primary","transition-colors","duration-300",3,"routerLink"],[1,"text-sm","opacity-50"],[1,"btn","btn-ghost","text-primary","btn-xs",3,"routerLink"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th")(5,"label"),a(6," Nro "),n()(),o(7,"th"),a(8,"Titulo"),n(),o(9,"th"),a(10,"Precio"),n(),o(11,"th"),a(12,"Stock"),n(),d(13,"th"),n()(),o(14,"tbody"),N(15,Me,23,17,"tr",null,Ae),n()()()),e&2&&(l(15),L(r.products()))},dependencies:[S,Ce,de],styles:["[_nghost-%COMP%]{display:block}"]})};var Te=()=>[],j=class i{paginationService=u(O);productResponse;loading;error;loadProducts;productPerPage=x(10);constructor(){let{productResponse:t,loading:e,error:r,loadProducts:s}=_e();this.productResponse=t,this.loading=e,this.error=r,this.loadProducts=s,E(()=>{let m=this.paginationService.currentPage(),p=this.productPerPage(),k=(m-1)*p,D=p;this.loadProducts({offset:k,limit:D})})}updateProductsPerPage(t){this.productPerPage.set(t),this.paginationService.setPage(1)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["app-products-admin"]],decls:22,vars:5,consts:[["selectPerPage",""],[1,"text-2xl","font-bold"],[1,"text-lg"],[1,"text-primary"],[1,"flex","gap-2","items-center","h-20"],[1,"select","select-bordered","w-32",3,"change"],["value","10"],["value","20"],["value","50"],["value","100"],[3,"pages","currentPage"],[1,"flex","flex-1"],["routerLink","/admin/product/new",1,"btn","btn-primary"],[3,"products"]],template:function(e,r){if(e&1){let s=V();o(0,"h1",1),a(1,"Listado de productos"),n(),o(2,"h3",2),a(3," Total de productos "),o(4,"span",3),a(5),n()(),o(6,"div",4)(7,"select",5,0),h("change",function(){M(s);let p=ae(8);return T(r.updateProductsPerPage(+p.value))}),o(9,"option",6),a(10,"10"),n(),o(11,"option",7),a(12,"20"),n(),o(13,"option",8),a(14,"50"),n(),o(15,"option",9),a(16,"100"),n()(),d(17,"pagination",10)(18,"div",11),o(19,"button",12),a(20," Cargar producto "),n()(),d(21,"products-table",13)}if(e&2){let s,m,p;l(5),P((s=r.productResponse())==null?null:s.count),l(12),c("pages",((m=r.productResponse())==null?null:m.pages)??0)("currentPage",r.paginationService.currentPage()),l(4),c("products",((p=r.productResponse())==null?null:p.products)??le(4,Te))}},dependencies:[$,Ee,S],styles:["[_nghost-%COMP%]{display:block}"]})};function De(){let i=u(q),t=x(null),e=x(!0),r=x(null);async function s(m){e.set(!0),r.set(null);try{let p=await A(i.getProductByIdSlug(m));t.set(p)}catch{r.set("Error al carga el producto")}finally{e.set(!1)}}return{product:t,loading:e,error:r,loadProducts:s}}async function Ne(){return new Promise(i=>{setTimeout(()=>{i(!0)},2500)})}var C=class i{static namePattern="([a-zA-Z]+) ([a-zA-Z]+)";static emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$";static notOnlySpacesPattern="^[a-zA-Z0-9]+$";static slugPattern="^[a-z0-9_]+(?:-[a-z0-9_]+)*$";static getTextError(t){for(let e of Object.keys(t))switch(e){case"required":return"Este campo es requerido";case"minlength":return`M\xEDnimo de ${t.minlength.requiredLength} caracteres.`;case"min":return`Valor m\xEDnimo de ${t.min.min}`;case"email":return"El valor ingresado no es un correo electr\xF3nico";case"emailTaken":return"El correo electr\xF3nico ya est\xE1 siendo usado por otro usuario";case"noStrider":return"No se puede usar el username de strider en la app";case"pattern":return t.pattern.requiredPattern===i.emailPattern?"El valor ingresado no luce como un correo electr\xF3nico":"Error de patr\xF3n contra expresi\xF3n regular";default:return`Error de validaci\xF3n no controlado ${e}`}return null}static isValidField(t,e){return!!t.controls[e].errors&&t.controls[e].touched}static getFieldError(t,e){if(!t.controls[e])return null;let r=t.controls[e].errors??{};return i.getTextError(r)}static isValidFieldInArray(t,e){return t.controls[e].errors&&t.controls[e].touched}static getFieldErrorInArray(t,e){if(t.controls.length===0)return null;let r=t.controls[e].errors??{};return i.getTextError(r)}static isFieldOneEqualFieldTwo(t,e){return r=>{let s=r.get(t)?.value,m=r.get(e)?.value;return s===m?null:{passwordsNotEqual:!0}}}static async checkingServerResponse(t){return await Ne(),t.value==="hola@mundo.com"?{emailTaken:!0}:null}static notStrider(t){return t.value==="strider"?{noStrider:!0}:null}};var B=class i{control=y.required();get errorMessage(){let t=this.control().errors||{};return this.control().touched&&Object.keys(t).length>0?C.getTextError(t):null}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["form-error-label"]],inputs:{control:[1,"control"]},decls:2,vars:1,consts:[[1,"text-red-500","text-xs"]],template:function(e,r){e&1&&(ne(0,"span",0),a(1),ie()),e&2&&(l(),P(r.errorMessage))},styles:["[_nghost-%COMP%]{display:block}"]})};function Le(i,t){if(i&1){let e=V();o(0,"button",19),h("click",function(){let s=M(e).$implicit,m=_();return T(m.onTagsClicked(s))}),a(1),n()}if(i&2){let e=t.$implicit,r=_();b("btn-primary",r.isTagSelected(e)),l(),g(" ",e," ")}}var G=class i{router=u(I);productsService=u(q);product=y.required();fb=u(ye);productForm=this.fb.group({title:["",v.required],slug:["",[v.required,v.pattern(C.slugPattern)]],unitOfMeasure:["",[v.required]],description:["",v.required],price:[1,[v.required,v.min(1)]],stock:[1,[v.required,v.min(1)]],tags:[[""]],imagesName:[[""]]});tags=["Cerveza","Harina","Salado","Dulce"];ngOnInit(){this.productForm.reset(this.product())}isTagSelected(t){return(this.productForm.value.tags||[]).some(r=>r.toLowerCase()===t.toLowerCase())}onTagsClicked(t){let e=t.toLowerCase(),r=this.productForm.value.tags??[];r.includes(e)?r.splice(r.indexOf(e),1):r.push(e),this.productForm.patchValue({tags:r})}onSubmit(){this.productForm.markAllAsTouched();let t=this.productForm.value,e=ee({},t);this.product().id==="new"?this.productsService.createProduct(e).subscribe(r=>{this.router.navigate(["/admin/product",r.id])}):this.productsService.updateProduct(this.product().id,e).subscribe()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["product-details"]],inputs:{product:[1,"product"]},decls:32,vars:20,consts:[[1,"text-2xl","font-bold"],[1,"divider"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"text-2xl","font-bold","h-12"],["type","text","placeholder","T\xEDtulo","formControlName","title",1,"input","input-bordered","w-full"],[3,"control"],["type","text","placeholder","Slug","formControlName","slug",1,"input","input-bordered","w-full"],["type","text","placeholder","Unidad de medida","formControlName","unitOfMeasure",1,"input","input-bordered","w-full"],["placeholder","Descripci\xF3n","rows","6","formControlName","description",1,"textarea","textarea-bordered"],[1,"text-lg","font-bold"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-2"],["type","number","placeholder","Precio","formControlName","price",1,"input","input-bordered","w-full"],["type","number","placeholder","Stock","formControlName","stock",1,"input","input-bordered","w-full"],[1,"grid","grid-cols-6","gap-2"],["type","button",1,"btn","btn-sm",3,"btn-primary"],[1,"flex","justify-end","h-12"],["type","submit",1,"btn","btn-secondary"],["type","file","formControlName","imagesName",1,"file-input","file-input-bordered","w-full","mt-4"],["type","button",1,"btn","btn-sm",3,"click"]],template:function(e,r){if(e&1&&(o(0,"h1",0),a(1),n(),d(2,"div",1),o(3,"form",2),h("ngSubmit",function(){return r.onSubmit()}),o(4,"div",3)(5,"h2",4),a(6,"Datos generales"),n(),d(7,"input",5)(8,"form-error-label",6)(9,"input",7)(10,"form-error-label",6)(11,"input",8)(12,"form-error-label",6)(13,"textarea",9)(14,"form-error-label",6),o(15,"h2",10),a(16,"Datos de venta"),n(),o(17,"div",11)(18,"div"),d(19,"input",12)(20,"form-error-label",6),n(),o(21,"div"),d(22,"input",13)(23,"form-error-label",6),n()(),o(24,"div",14),N(25,Le,2,3,"button",15,oe),n()(),o(27,"div",3)(28,"div",16)(29,"button",17),a(30," Guardar "),n()(),d(31,"input",18),n()()),e&2){let s,m,p,k,D,Y;l(),P(r.product().title),l(2),c("formGroup",r.productForm),l(4),b("border-red-500",((s=r.productForm.get("title"))==null?null:s.errors)??!1),l(),c("control",r.productForm.get("title")),l(),b("border-red-500",((m=r.productForm.get("title"))==null?null:m.errors)??!1),l(),c("control",r.productForm.get("slug")),l(),b("border-red-500",((p=r.productForm.get("unitOfMeasure"))==null?null:p.errors)??!1),l(),c("control",r.productForm.get("unitOfMeasure")),l(),b("border-red-500",((k=r.productForm.get("description"))==null?null:k.errors)??!1),l(),c("control",r.productForm.get("description")),l(5),b("border-red-500",((D=r.productForm.get("price"))==null?null:D.errors)??!1),l(),c("control",r.productForm.get("price")),l(2),b("border-red-500",((Y=r.productForm.get("stock"))==null?null:Y.errors)??!1),l(),c("control",r.productForm.get("stock")),l(2),L(r.tags)}},dependencies:[Se,be,fe,he,ge,ve,xe,Pe,B],styles:["[_nghost-%COMP%]{display:block}"]})};function Ve(i,t){i&1&&d(0,"loading")}function Ie(i,t){if(i&1&&d(0,"product-details",0),i&2){let e=_();c("product",e.product())}}var H=class i{activateRoute=u(ce);router=u(I);productId=pe(this.activateRoute.params.pipe(te(t=>t.id)));paginationService=u(O);product;loading;error;loadProducts;constructor(){let{product:t,loading:e,error:r,loadProducts:s}=De();this.product=t,this.loading=e,this.error=r,this.loadProducts=s,E(()=>{let m=this.productId();this.loadProducts(m)}),E(()=>{this.error()&&this.router.navigate(["/admin/products"])})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["app-product-admin"]],decls:2,vars:2,consts:[[3,"product"]],template:function(e,r){if(e&1&&(J(0,Ve,1,0,"loading"),J(1,Ie,1,1,"product-details",0)),e&2){let s;K(r.loading()?0:-1),l(),K((s=r.product())!=null&&s.id?1:-1)}},dependencies:[we,G],styles:["[_nghost-%COMP%]{display:block}"]})};var Re=[{path:"",component:z,canMatch:[Fe],children:[{path:"products",component:j},{path:"product/:id",component:H},{path:"**",redirectTo:"products"}]}],Gt=Re;export{Re as AdminDashboardRoutes,Gt as default};
