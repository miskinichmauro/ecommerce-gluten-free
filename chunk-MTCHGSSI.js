import{a as D,b as u,c as P,d as F,e as T,g as V,h as G,i as O,j,k as I,l as R}from"./chunk-KT6R4KFD.js";import{B as l,E as f,Ga as L,Ha as M,L as m,M as c,Na as N,R as x,S as n,T as r,U as d,V as C,W as _,X as w,Y as E,_ as y,aa as g,ga as s,ia as k,o as a,p as S,q as b,r as v,u as p}from"./chunk-7L4JM7UI.js";var h=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["success"]],decls:3,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center"],["viewBox","0 0 52 52",1,"w-16","h-16","text-green-500"],["fill","none","stroke","currentColor","stroke-width","5","stroke-linecap","round","stroke-linejoin","round","d","M14 27l7 7 16-16",1,"checkmark","stroke-current"]],template:function(e,i){e&1&&(C(0,"div",0),v(),C(1,"svg",1),w(2,"path",2),_()())},styles:["[_nghost-%COMP%]{display:block}.checkmark[_ngcontent-%COMP%]{stroke-dasharray:48;stroke-dashoffset:48;animation:_ngcontent-%COMP%_draw-check .8s ease-out forwards}@keyframes _ngcontent-%COMP%_draw-check{0%{stroke-dashoffset:48}to{stroke-dashoffset:0}}"]})};function z(t,o){t&1&&d(0,"loading")}function H(t,o){t&1&&d(0,"success")}function J(t,o){if(t&1){let e=E();n(0,"form",2),y("ngSubmit",function(){S(e);let q=g();return b(q.onSubmit())}),n(1,"fieldset",3)(2,"legend",4),s(3,"Login"),r(),n(4,"div",5)(5,"label",6),s(6,"Email"),r(),d(7,"input",7),n(8,"label",8),s(9,"Password"),r(),d(10,"input",9),n(11,"div",10)(12,"p",11)(13,"a",12),s(14," Registrarse "),r()()(),n(15,"button",13),s(16," Login "),r()()()()}if(t&2){let e=g();x("formGroup",e.loginForm)}}function K(t,o){if(t&1&&(n(0,"div",1),s(1),r()),t&2){let e=g();l(),k(" ",e.hasError()," ")}}var B=class t{authService=a(N);configurationService=a(I);fb=a(O);router=a(L);loading=p(!1);hasError=p(!1);success=p(!1);loginForm=this.fb.group({email:["",[u.required,u.email]],password:["",[u.required,u.minLength(6)]]});onSubmit(){this.loginForm.invalid&&(this.hasError.set(!0),setTimeout(()=>{this.hasError.set(!1)},2e3));let{email:o="",password:e=""}=this.loginForm.value;this.loading.set(!0),this.authService.login(o,e).subscribe(async i=>{if(await this.isSuccess(),i){this.router.navigateByUrl("/");return}this.hasError.set(!0),setTimeout(()=>{this.hasError.set(!1)},2e3)})}async isSuccess(){this.loading.set(!1),this.success.set(!0),await new Promise(o=>setTimeout(o,600)),this.configurationService.toggleSidebarPageStatus("closed"),this.configurationService.toggleSidebarItemsStatus("closed")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-login"]],decls:4,vars:4,consts:[[1,"gap-2",3,"formGroup"],[1,"text-error","text-sm","mt-1"],[1,"gap-2",3,"ngSubmit","formGroup"],[1,"fieldset","bg-base-200","border-base-300","rounded-box","w-full","p-6"],[1,"fieldset-legend","text-lg","font-semibold"],[1,"flex","flex-col","gap-4"],["for","email",1,"label"],["type","email","placeholder","Email","formControlName","email",1,"input","w-full"],["for","password",1,"label"],["type","password","placeholder","Password","formControlName","password",1,"input","w-full"],[1,"w-full","flex","justify-end"],[1,"text-slate-700"],["routerLink","/auth/register",1,"text-primary","hover:underline"],[1,"btn","btn-neutral","w-full"]],template:function(e,i){e&1&&(m(0,z,1,0,"loading"),m(1,H,1,0,"success"),m(2,J,17,1,"form",0),m(3,K,2,1,"div",1)),e&2&&(c(i.loading()?0:-1),l(),c(i.success()?1:-1),l(),c(!i.loading()&&!i.success()&&!i.hasError()?2:-1),l(),c(i.hasError()?3:-1))},dependencies:[M,j,T,D,P,F,V,G,R,h],styles:["[_nghost-%COMP%]{display:block}"]})};export{B as a};
