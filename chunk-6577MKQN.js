import{Aa as I,B as g,E as l,Ea as ie,Ga as oe,H as K,Ha as O,Ia as se,J,L as Q,La as f,M as W,Ma as ae,N as X,Na as F,O as Y,P as R,Q as S,R as P,S as a,T as p,U as V,V as B,W as Z,X as ee,Y as N,_ as x,aa as b,e as c,f as H,fa as $,g as q,ga as u,i,ia as j,ka as L,l as m,la as te,o,p as M,q as w,r as z,ra as ne,s as G,ta as re,u as y,ua as h}from"./chunk-7L4JM7UI.js";var ce=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=l({type:n,selectors:[["app-logo"]],decls:5,vars:0,consts:[["id","logo"],["routerLink","/",1,"text-lg","md:text-2xl","font-bold","text-white"],[1,"text-blue-500"]],template:function(t,r){t&1&&(a(0,"div",0)(1,"a",1),u(2,"Gluten"),a(3,"span",2),u(4," Free"),p()()())},dependencies:[O],styles:["[_nghost-%COMP%]{display:block}"]})};var E=class n{sidebarOpen=y(!1);openSidebar(){this.sidebarOpen.set(!0)}closeSidebar(){this.sidebarOpen.set(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=m({token:n,factory:n.\u0275fac,providedIn:"root"})};var ve=()=>({exact:!0});function Ce(n,e){if(n&1){let t=N();a(0,"a",2),x("click",function(){M(t);let s=b(2);return w([s.sidebarService.closeSidebar()])}),u(1),p()}if(n&2){let t=b().$implicit;P("routerLink",t.route)("routerLinkActiveOptions",L(3,ve)),g(),j(" ",t.label," ")}}function ye(n,e){if(n&1&&Q(0,Ce,2,4,"a",1),n&2){let t=e.$implicit,r=b();W(!t.adminOnly||r.authService.isAdmin()?0:-1)}}var T=class n{menuItems=h.required();authService=o(F);sidebarService=o(E);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=l({type:n,selectors:[["nav-items"]],inputs:{menuItems:[1,"menuItems"]},decls:3,vars:0,consts:[[1,"flex","flex-col","gap-2","px-4"],["routerLinkActive","text-secondary",1,"p-2","rounded-md","hover:bg-gray-800","transition",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","text-secondary",1,"p-2","rounded-md","hover:bg-gray-800","transition",3,"click","routerLink","routerLinkActiveOptions"]],template:function(t,r){t&1&&(a(0,"nav",0),R(1,ye,1,1,null,null,X),p()),t&2&&(g(),S(r.menuItems()))},dependencies:[O,se],styles:["[_nghost-%COMP%]{display:block}"]})};var pe=class n{menuItems=h.required();open=h.required();closeSidebar=new J;authService=o(F);close(){this.closeSidebar.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=l({type:n,selectors:[["sidebar-items"]],inputs:{menuItems:[1,"menuItems"],open:[1,"open"]},outputs:{closeSidebar:"closeSidebar"},decls:6,vars:5,consts:[[1,"fixed","inset-0","bg-base-100","z-50","transform","transition-transform","duration-400","flex","flex-col"],[1,"flex","justify-end"],[1,"btn","btn-ghost",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[3,"menuItems"]],template:function(t,r){t&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),x("click",function(){return r.close()}),z(),a(3,"svg",3),V(4,"path",4),p()()(),G(),V(5,"nav-items",5),p()),t&2&&($("translate-x-0",r.open())("-translate-x-full",!r.open()),g(5),P("menuItems",r.menuItems()))},dependencies:[T],styles:["[_nghost-%COMP%]{display:block}"]})};var me=class n{activateRoute=o(ie);router=o(oe);currentPage=ae(this.activateRoute.queryParamMap.pipe(q(e=>e.get("page")?+e.get("page"):1),q(e=>isNaN(e)?1:e)),{initialValue:1});setPage(e){this.router.navigate([],{queryParams:{page:e},queryParamsHandling:"merge"})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=m({token:n,factory:n.\u0275fac,providedIn:"root"})};var U=`${f.baseUrl}/products`,Pe={id:"new",title:"",price:0,unitOfMeasure:"",description:"",slug:"",stock:0,tags:[""],deleteAt:null,imagesName:[""],user:{}},A=class n{constructor(){}http=o(I);productsCache=new Map;productCache=new Map;getProducts(e={}){let t=f.cantProducts,{limit:r=t,offset:s=0,isFeatured:v=!1}=e,C=v?"isFeatured":`${r}-${s}`;return this.productsCache.has(C)?c(this.productsCache.get(C)):this.http.get(U,{params:{limit:r,offset:s,isFeatured:v},responseType:"json"}).pipe(i(be=>this.productsCache.set(C,be)))}getProductByIdSlug(e){return e==="new"?c(Pe):this.productCache.has(e)?c(this.productCache.get(e)):this.http.get(`${U}/${e}`,{responseType:"json"}).pipe(i(r=>this.productCache.set(e,r)))}createProduct(e){return this.http.post(`${U}`,e).pipe(i(r=>this.insertOrUpdateCache(r)))}updateProduct(e,t){return this.http.patch(`${U}/${e}`,t).pipe(i(s=>this.insertOrUpdateCache(s)))}insertOrUpdateCache(e){this.productCache.get(e.id)?(this.productCache.set(e.id,e),this.productsCache.forEach(r=>{r.products=r.products.map(s=>s.id===e.id?e:s)})):(this.productCache.set(e.id,e),this.productsCache.clear())}static \u0275fac=function(t){return new(t||n)};static \u0275prov=m({token:n,factory:n.\u0275fac,providedIn:"root"})};function lt(){let n=o(A),e=y(null),t=y(!0),r=y(null);async function s(v){t.set(!0),r.set(null);try{let C=await H(n.getProducts(v));e.set(C)}catch{r.set("Error al cargar los productos")}finally{t.set(!1)}}return{productResponse:e,loading:t,error:r,loadProducts:s}}var xe=()=>[],Ie=n=>({page:n});function Oe(n,e){if(n&1){let t=N();a(0,"button",3),x("click",function(){let s=M(t).$implicit,v=b();return w(v.activePage.set(s))}),u(1),p()}if(n&2){let t=e.$implicit,r=b();$("btn-primary",t===r.activePage()),P("routerLink",L(5,xe))("queryParams",te(6,Ie,t)),g(),j(" ",t," ")}}function ke(n,e){n&1&&(a(0,"button",2),u(1,"0"),p())}var le=class n{pages=h(0);currentPage=h(1);activePage=re(this.currentPage);getPagesList=ne(()=>Array.from({length:this.pages()},(e,t)=>t+1));static \u0275fac=function(t){return new(t||n)};static \u0275cmp=l({type:n,selectors:[["pagination"]],inputs:{pages:[1,"pages"],currentPage:[1,"currentPage"]},decls:4,vars:1,consts:[[1,"join","flex","justify-center","items-center"],[1,"join-item","btn",3,"btn-primary","routerLink","queryParams"],[1,"join-item","btn"],[1,"join-item","btn",3,"click","routerLink","queryParams"]],template:function(t,r){t&1&&(a(0,"div",0),R(1,Oe,2,8,"button",1,Y,!1,ke,2,0,"button",2),p()),t&2&&(g(),S(r.getPagesList()))},dependencies:[O],styles:["[_nghost-%COMP%]{display:block}"]})};var ue=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=l({type:n,selectors:[["loading"]],decls:4,vars:0,consts:[[1,"flex","flex-col","justify-center","items-center"],[1,"loading","loading-spinner","loading-lg"]],template:function(t,r){t&1&&(B(0,"div",0),ee(1,"span",1),B(2,"p"),u(3," Cargando... "),Z()())},styles:["[_nghost-%COMP%]{display:block}"]})};var k=`${f.baseUrl}/recipes`,_e={id:"new",title:"",text:""},de=class n{http=o(I);recipesCache=new Map;getAll(){return this.recipesCache.size?c(Array.from(this.recipesCache.values())):this.http.get(k).pipe(i(e=>e.forEach(t=>this.recipesCache.set(t.id,t))))}getById(e){return e==="new"?c(_e):this.recipesCache.has(e)?c(this.recipesCache.get(e)):this.http.get(`${k}/${e}`).pipe(i(t=>this.recipesCache.set(e,t)))}create(e){return this.http.post(k,e).pipe(i(t=>this.insertOrUpdateCache(t)))}update(e,t){return this.http.patch(`${k}/${e}`,t).pipe(i(r=>this.insertOrUpdateCache(r)))}delete(e){return this.http.delete(`${k}/${e}`).pipe(i(()=>this.recipesCache.delete(e)))}insertOrUpdateCache(e){this.recipesCache.set(e.id,e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=m({token:n,factory:n.\u0275fac,providedIn:"root"})};var _=`${f.baseUrl}/contacts`,Me={id:"new",title:"",phone:"",email:""},fe=class n{http=o(I);contactsCache=new Map;getAll(){return this.contactsCache.size?c(Array.from(this.contactsCache.values())):this.http.get(_).pipe(i(e=>e.forEach(t=>this.contactsCache.set(t.id,t))))}getById(e){return e==="new"?c(Me):this.contactsCache.has(e)?c(this.contactsCache.get(e)):this.http.get(`${_}/${e}`).pipe(i(t=>this.contactsCache.set(e,t)))}create(e){return this.http.post(_,e).pipe(i(t=>this.insertOrUpdateCache(t)))}update(e,t){return this.http.patch(`${_}/${e}`,t).pipe(i(r=>this.insertOrUpdateCache(r)))}delete(e){return this.http.delete(`${_}/${e}`).pipe(i(()=>this.contactsCache.delete(e)))}insertOrUpdateCache(e){this.contactsCache.set(e.id,e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=m({token:n,factory:n.\u0275fac,providedIn:"root"})};var ge=f.baseUrl,he=class n{transform(e){if(typeof e=="string")return`${ge}/files/product/${e}`;let t=e[0];return t?`${ge}/files/product/${t}`:"assets/images/default-image.jpg"}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=K({name:"productImage",type:n,pure:!0})};export{ce as a,E as b,T as c,pe as d,he as e,me as f,A as g,lt as h,le as i,ue as j,de as k,fe as l};
