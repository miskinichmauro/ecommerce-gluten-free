import{b as S,c as s,d as _,e as x,g as N,j as y,k as E,n as F,o as M,p as P,q as B,r as q}from"./chunk-HLCJS4TW.js";import{C as p,J as u,M as h,X as c,Z as d,Za as C,ca as v,da as r,ea as n,eb as w,fa as l,ja as V,la as b,na as f,ua as a,v as m,va as k,w as L,wa as G,x as T,y as D,z as R}from"./chunk-Q4RGGE4J.js";function Z(i,o){i&1&&l(0,"loading")}function z(i,o){i&1&&l(0,"success")}function J(i,o){if(i&1){let e=V();r(0,"form",2),b("ngSubmit",function(){L(e);let g=f();return T(g.onSubmit())}),r(1,"fieldset",3)(2,"div",4)(3,"label",5),a(4,"Email"),n(),l(5,"input",6),r(6,"label",7),a(7,"Password"),n(),l(8,"input",8),r(9,"div",9)(10,"button",10),b("click",function(){L(e);let g=f();return T(g.openRegister())}),a(11," Registrarme "),n()(),r(12,"button",11),a(13," Login "),n()()()()}if(i&2){let e=f();v("formGroup",e.loginForm)}}function K(i,o){if(i&1&&(r(0,"div",1),a(1),n()),i&2){let e=f();u(),G(" ",e.hasError()," ")}}var I=class i{authService=m(w);configurationService=m(P);fb=m(F);router=m(C);loading=p(!1);hasError=p(!1);success=p(!1);loginForm=this.fb.group({email:["",[s.required,s.email]],password:["",[s.required,s.minLength(6)]]});openRegister(){this.configurationService.openSidebar("register")}onSubmit(){this.loginForm.invalid&&(this.hasError.set(!0),setTimeout(()=>{this.hasError.set(!1)},2e3));let{email:o="",password:e=""}=this.loginForm.value;this.loading.set(!0),this.authService.login(o,e).subscribe(async t=>{if(await this.isSuccess(),t){this.router.navigateByUrl("/");return}this.hasError.set(!0),setTimeout(()=>{this.hasError.set(!1)},2e3)})}async isSuccess(){this.loading.set(!1),this.success.set(!0),await new Promise(o=>setTimeout(o,800)),this.configurationService.toggleSidebarPageStatus("closed"),this.configurationService.toggleSidebarItemsStatus("closed")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["login"]],decls:4,vars:4,consts:[[1,"gap-2",3,"formGroup"],[1,"text-error","text-sm","mt-1"],[1,"gap-2",3,"ngSubmit","formGroup"],[1,"fieldset","bg-base-200","border-base-300","rounded-box","w-full","p-6"],[1,"flex","flex-col","gap-4"],["for","email",1,"label"],["type","email","placeholder","Email","formControlName","email",1,"input","w-full"],["for","password",1,"label"],["type","password","placeholder","Password","formControlName","password",1,"input","w-full"],[1,"w-full","flex","justify-end"],["type","button",1,"text-primary","hover:underline","cursor-pointer",3,"click"],[1,"btn","btn-neutral","w-full"]],template:function(e,t){e&1&&(c(0,Z,1,0,"loading"),c(1,z,1,0,"success"),c(2,J,14,1,"form",0),c(3,K,2,1,"div",1)),e&2&&(d(t.loading()?0:-1),u(),d(t.success()?1:-1),u(),d(!t.loading()&&!t.success()&&!t.hasError()?2:-1),u(),d(t.hasError()?3:-1))},dependencies:[M,N,S,_,x,y,E,B,q],styles:["[_nghost-%COMP%]{display:block}"]})};function Q(i,o){i&1&&(r(0,"div",15),a(1," Las contrase\xF1as no coinciden "),n())}function W(i,o){if(i&1&&(r(0,"p",16),a(1),n()),i&2){let e=f();u(),k(e.error())}}var j=class i{fb=m(F);error=p(null);isPosting=p(!1);router=m(C);authService=m(w);configurationService=m(P);registerForm=this.fb.group({email:["",[s.required,s.email]],password:["",[s.required,s.minLength(6)]],confirmPassword:["",[s.required]],fullName:["",[s.required,s.minLength(1)]]},{validators:this.passwordsMatchValidator});passwordsMatchValidator(o){let e=o.get("password")?.value,t=o.get("confirmPassword")?.value;return e===t?null:{passwordMismatch:!0}}onSubmit(){let{email:o="",password:e="",fullName:t=""}=this.registerForm.value,g=this.authService.register(o,e,t).subscribe(A=>{if(A){this.router.navigateByUrl("/");return}this.error.set("No se pudo crear la cuenta"),setTimeout(()=>{this.error.set(null)},5e3)})}goBack(){this.configurationService.sidebarPageStatus()==="open"?this.configurationService.openSidebar("auth"):this.router.navigate(["/auth/login"])}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-register"]],decls:22,vars:3,consts:[[1,"gap-2",3,"ngSubmit","formGroup"],[1,"fieldset","bg-base-200","border-base-300","rounded-box","w-full","p-6","relative"],["type","button",1,"inline-flex","items-center","justify-center","p-2","rounded-full","transition-colors","duration-200","hover:bg-base-300","text-slate-700","absolute","top-4","left-6","bg-base-200","cursor-pointer","shadow",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"h-4","w-4"],["fill-rule","evenodd","d","M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z","clip-rule","evenodd"],[1,"flex","flex-col","gap-4","mt-10"],["for","fullName",1,"label"],["type","fullName","placeholder","Nombre completo","formControlName","fullName",1,"input","w-full"],["for","email",1,"label"],["type","email","placeholder","Email","formControlName","email",1,"input","w-full"],["for","password",1,"label"],["type","password","placeholder","Password","formControlName","password",1,"input","w-full"],["for","confirmPassword",1,"label"],["type","password","placeholder","Repite tu password","formControlName","confirmPassword",1,"input","w-full"],[1,"btn","btn-neutral","w-full"],[1,"text-error","text-sm","mt-1"],[1,"text-red-500"]],template:function(e,t){e&1&&(r(0,"form",0),b("ngSubmit",function(){return t.onSubmit()}),r(1,"fieldset",1)(2,"button",2),b("click",function(){return t.goBack()}),D(),r(3,"svg",3),l(4,"path",4),n()(),R(),r(5,"div",5)(6,"label",6),a(7,"Nombre completo"),n(),l(8,"input",7),r(9,"label",8),a(10,"Email"),n(),l(11,"input",9),r(12,"label",10),a(13,"Password"),n(),l(14,"input",11),r(15,"label",12),a(16,"Confirmar password"),n(),l(17,"input",13),r(18,"button",14),a(19,"Login"),n(),c(20,Q,2,0,"div",15),n()()(),c(21,W,2,1,"p",16)),e&2&&(v("formGroup",t.registerForm),u(20),d(t.registerForm.hasError("passwordMismatch")&&t.registerForm.touched?20:-1),u(),d(t.error()?21:-1))},dependencies:[M,N,S,_,x,y,E],styles:["[_nghost-%COMP%]{display:block}"]})};export{I as a,j as b};
