import{a as te,b as h,c as ne,d as oe,e as ie,f as je,g as re,h as ae,i as le,j as se}from"./chunk-3AWZ25YC.js";import{a as ze,b as ve,c as be,d as $e,e as Ze,f as R,g as ce,h as de}from"./chunk-IW2JOV2R.js";import{$ as b,A as a,D as u,Ea as Y,Fa as Be,Ga as A,Ha as w,I as K,Ia as Ge,K as C,L as x,Ma as ee,N as Le,Na as ge,O as q,P as B,Q as m,R as o,S as i,T as c,U as j,V as z,X as N,Z as g,_ as Te,a as $,aa as Q,ba as U,ca as J,da as Ve,ea as P,f as E,g as Z,ga as l,ha as v,ia as _,ka as W,la as O,ma as pe,na as Ne,o as p,oa as Ie,p as F,q as T,r as D,ra as X,s as L,sa as H,u as f,ua as S,wa as Oe,xa as He,y as Re,ya as qe,z as V}from"./chunk-LRPCWCEJ.js";var he=class r{authService=p(ge);user=X(()=>this.authService.user());static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-admin-dashboard-layout"]],decls:59,vars:1,consts:[[1,"bg-slate-800","overflow-y-scroll","w-screen","h-screen","antialiased","text-slate-300","selection:bg-blue-600","selection:text-white"],[1,"flex","flex-col","relative","w-screen"],["id","menu",1,"bg-gray-900","min-h-screen","z-10","text-slate-300","w-64","fixed","left-0","h-screen","overflow-y-scroll"],["id","logo",1,"my-4","px-6"],["routerLink","/",1,"text-lg","md:text-2xl","font-bold","text-white"],[1,"text-blue-500"],[1,"text-slate-500","text-sm"],["id","profile",1,"px-6","py-10"],[1,"text-slate-500"],["routerLink","/admin/products",1,"inline-flex","space-x-2","items-center"],[1,"text-sm","md:text-base","font-bold"],["id","nav",1,"w-full","px-6"],["routerLink","/admin/products",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"],[1,"flex","flex-col"],[1,"text-lg","font-bold","leading-5","text-white"],[1,"text-sm","text-white/50","hidden","md:block"],["routerLink","/admin/products","routerLinkActive","bg-blue-800",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"],[1,"text-lg","text-slate-300","font-bold","leading-5"],[1,"text-sm","text-slate-500","hidden","md:block"],["routerLink","/admin/recipes","routerLinkActive","bg-blue-800",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"],["routerLink","/admin/contacts","routerLinkActive","bg-blue-800",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["stroke-linecap","round","stroke-linejoin","round","d","M15.75 3.75 18 6m0 0 2.25 2.25M18 6l2.25-2.25M18 6l-2.25 2.25m1.5 13.5c-8.284 0-15-6.716-15-15V4.5A2.25 2.25 0 0 1 4.5 2.25h1.372c.516 0 .966.351 1.091.852l1.106 4.423c.11.44-.054.902-.417 1.173l-1.293.97a1.062 1.062 0 0 0-.38 1.21 12.035 12.035 0 0 0 7.143 7.143c.441.162.928-.004 1.21-.38l.97-1.293a1.125 1.125 0 0 1 1.173-.417l4.423 1.106c.5.125.852.575.852 1.091V19.5a2.25 2.25 0 0 1-2.25 2.25h-2.25Z"],[1,"divider","my-2"],["routerLink","/",1,"btn","btn-ghost","text-secondary","w-full",3,"click"],[1,"flex-1","ml-64","pt-5","px-5"]],template:function(e,n){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),l(5,"Gluten"),o(6,"span",5),l(7," Free"),i()(),o(8,"p",6),l(9,"Panel administrativo"),i()(),o(10,"div",7)(11,"p",8),l(12,"Bienvenido"),i(),o(13,"a",9),c(14,"span"),o(15,"span",10),l(16),i()()(),o(17,"div",11)(18,"a",12)(19,"div"),D(),o(20,"svg",13),c(21,"path",14),i()(),L(),o(22,"div",15)(23,"span",16),l(24,"Dashboard"),i(),o(25,"span",17),l(26,"Data Overview"),i()()(),o(27,"a",18)(28,"div"),D(),o(29,"svg",19),c(30,"path",20),i()(),L(),o(31,"div",15)(32,"span",21),l(33,"Productos"),i(),o(34,"span",22),l(35,"Listado de productos"),i()()(),o(36,"a",23)(37,"div"),D(),o(38,"svg",24),c(39,"path",25),i()(),L(),o(40,"div",15)(41,"span",21),l(42,"Recetas"),i(),o(43,"span",22),l(44,"Listado de recetas"),i()()(),o(45,"a",26)(46,"div"),D(),o(47,"svg",24),c(48,"path",27),i()(),L(),o(49,"div",15)(50,"span",21),l(51,"Contactos"),i(),o(52,"span",22),l(53,"Listado de contactos"),i()()(),c(54,"div",28),o(55,"button",29),g("click",function(){return n.authService.logout()}),l(56," Cerrar sesi\xF3n "),i()()()(),o(57,"div",30),c(58,"router-outlet"),i()()),e&2){let s;a(16),_(" ",(s=n.user())==null?null:s.fullName," ")}},dependencies:[Be,w,Ge],styles:["[_nghost-%COMP%]{display:block}"]})};var Ke=async()=>{let r=p(ge);return await E(r.checkStatus()),r.isAdmin()};function Ye(r,t){if(r&1){let e=N();j(0,"div",0)(1,"div",1)(2,"h2",2),l(3),z(),j(4,"p",3),l(5),z(),j(6,"div",4)(7,"button",5),Te("click",function(){F(e);let s=b();return T(s.close(!0))}),l(8," Si "),z(),j(9,"button",6),Te("click",function(){F(e);let s=b();return T(s.close(!1))}),l(10," No "),z()()()()}if(r&2){let e=b();a(3),v(e.title()),a(2),v(e.message())}}var I=class r{visible=f(!1);message=f("");title=f("Confirmar");resolver;open(t,e="Confirmar"){return this.message.set(t),this.title.set(e),this.visible.set(!0),new Promise(n=>{this.resolver=n})}close(t){this.visible.set(!1),this.resolver&&(this.resolver(t),this.resolver?.(!1))}handleKeyboardEvent(t){if(this.visible)switch(t.key){case"Enter":case" ":t.preventDefault(),this.close(!0);break;case"Escape":t.preventDefault(),this.close(!1);break}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["confirm-dialog"]],hostBindings:function(e,n){e&1&&g("keydown",function(d){return n.handleKeyboardEvent(d)},V)},decls:1,vars:1,consts:[[1,"fixed","inset-0","flex","items-center","justify-center","z-50"],[1,"bg-base-100","border","border-slate-700","rounded-xl","shadow-xl","p-6","w-[320px]","text-center","backdrop-blur-sm"],[1,"text-lg","font-bold","mb-3","text-slate-200"],[1,"mb-6","text-slate-400"],[1,"flex","justify-center","gap-4"],[1,"btn","btn-sm","bg-red-500","hover:bg-red-600","text-white","font-semibold","cursor-pointer",3,"click"],[1,"btn","btn-sm","bg-slate-700","hover:bg-slate-600","text-slate-100","font-semibold","cursor-pointer",3,"click"]],template:function(e,n){e&1&&C(0,Ye,11,2,"div",0),e&2&&x(n.visible()?0:-1)},dependencies:[qe],styles:["[_nghost-%COMP%]{display:block}"]})};var Qe=r=>["/admin/products",r],et=(r,t)=>t.id;function tt(r,t){if(r&1){let e=N();o(0,"tr")(1,"th")(2,"label"),l(3),i()(),o(4,"td")(5,"div",3)(6,"div",4)(7,"div",5),c(8,"img",6),pe(9,"productImage"),i()(),o(10,"div")(11,"a",7),l(12),i(),o(13,"div",8),l(14),i()()()(),o(15,"td"),l(16),i(),o(17,"td"),l(18),pe(19,"currency"),i(),o(20,"td"),l(21),i(),o(22,"th",9)(23,"a",10),D(),o(24,"svg",11),c(25,"path",12),i()(),L(),o(26,"a",13),g("click",function(){let s=F(e).$implicit,d=b();return T(d.onDelete(s.id))}),D(),o(27,"svg",11),c(28,"path",14),i()()()()}if(r&2){let e=t.$implicit,n=t.$index,s=b();a(3),_(" ",(s.currentPage()-1)*s.countPage()+(n+1)," "),a(5),m("src",Ne(9,10,e.imagesName),Re)("alt",e.title),a(3),m("routerLink",O(14,Qe,e.id)),a(),_(" ",e.title," "),a(2),_(" ",e.description," "),a(2),v(e.unitOfMeasure),a(2),v(Ne(19,12,e.price)),a(3),v(e.stock),a(2),m("routerLink",O(16,Qe,e.id))}}var Ce=class r{products=S.required();currentPage=S.required();countPage=S.required();delete=new K;confirmDialog;async onDelete(t){await this.confirmDialog.open("\xBFEst\xE1s seguro que deseas eliminar este producto?")&&this.delete.emit(t)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["products-table"]],viewQuery:function(e,n){if(e&1&&Q(I,5),e&2){let s;U(s=J())&&(n.confirmDialog=s.first)}},inputs:{products:[1,"products"],currentPage:[1,"currentPage"],countPage:[1,"countPage"]},outputs:{delete:"delete"},decls:18,vars:0,consts:[[1,"overflow-y-auto","max-h-[75vh]","overflow-x-auto","border","border-slate-700","rounded-xl"],[1,"table","table-zebra","w-full"],[1,"sticky","top-0","bg-slate-900","z-10"],[1,"flex","items-center","gap-3"],[1,"avatar"],[1,"mask","mask-squircle","h-12","w-12"],[3,"src","alt"],[1,"font-bold","hover:text-primary","transition-colors","duration-300",3,"routerLink"],[1,"text-sm","opacity-50"],[1,"flex","justify-end"],[1,"btn","btn-ghost","text-primary","btn-xs",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-6"],["d","M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"],[1,"btn","btn-ghost","text-error","btn-xs",3,"click"],["fill-rule","evenodd","d","M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z","clip-rule","evenodd"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),c(4,"th"),o(5,"th"),l(6,"T\xEDtulo"),i(),o(7,"th"),l(8,"Unidad de medida"),i(),o(9,"th"),l(10,"Precio"),i(),o(11,"th"),l(12,"Stock"),i(),c(13,"th"),i()(),o(14,"tbody"),q(15,tt,29,18,"tr",null,et),i()()(),c(17,"confirm-dialog")),e&2&&(a(15),B(n.products()))},dependencies:[w,I,ze,Oe],styles:["[_nghost-%COMP%]{display:block}"]})};var nt=()=>[],xe=class r{paginationService=p(ve);productResponse;loading;error;loadProducts;productPerPage=f(10);constructor(){let{productResponse:t,loading:e,error:n,loadProducts:s}=$e();this.productResponse=t,this.loading=e,this.error=n,this.loadProducts=s,H(()=>{let d=this.paginationService.currentPage(),y=this.productPerPage(),ue=(d-1)*y,fe=y;this.loadProducts({offset:ue,limit:fe})})}updateProductsPerPage(t){this.productPerPage.set(t),this.paginationService.setPage(1)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["products-admin"]],decls:22,vars:7,consts:[["selectPerPage",""],[1,"text-2xl","font-bold"],[1,"text-lg"],[1,"text-primary"],[1,"flex","gap-2","items-center","h-20"],[1,"select","select-bordered","w-32",3,"change"],["value","10"],["value","20"],["value","50"],["value","100"],[3,"pages","currentPage"],[1,"flex","flex-1"],["routerLink","/admin/products/new",1,"btn","btn-primary"],[3,"products","currentPage","countPage"]],template:function(e,n){if(e&1){let s=N();o(0,"h1",1),l(1,"Listado de productos"),i(),o(2,"h3",2),l(3," Total de productos "),o(4,"span",3),l(5),i()(),o(6,"div",4)(7,"select",5,0),g("change",function(){F(s);let y=Ve(8);return T(n.updateProductsPerPage(+y.value))}),o(9,"option",6),l(10,"10"),i(),o(11,"option",7),l(12,"20"),i(),o(13,"option",8),l(14,"50"),i(),o(15,"option",9),l(16,"100"),i()(),c(17,"pagination",10)(18,"div",11),o(19,"button",12),l(20," Cargar producto "),i()(),c(21,"products-table",13)}if(e&2){let s,d,y;a(5),v((s=n.productResponse())==null?null:s.count),a(12),m("pages",((d=n.productResponse())==null?null:d.pages)??0)("currentPage",n.paginationService.currentPage()),a(4),m("products",((y=n.productResponse())==null?null:y.products)??W(6,nt))("currentPage",n.paginationService.currentPage())("countPage",n.productPerPage())}},dependencies:[Ce,Ze,w],styles:["[_nghost-%COMP%]{display:block}"]})};function Ue(){let r=p(be),t=f(null),e=f(!0),n=f(null);async function s(d){e.set(!0),n.set(null);try{let y=await E(r.getProductByIdSlug(d));t.set(y)}catch{n.set("Error al carga el producto")}finally{e.set(!1)}}return{product:t,loading:e,error:n,loadProducts:s}}async function ot(){return new Promise(r=>{setTimeout(()=>{r(!0)},2500)})}var me=class r{static namePattern="([a-zA-Z]+) ([a-zA-Z]+)";static emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$";static notOnlySpacesPattern="^[a-zA-Z0-9]+$";static slugPattern="^[a-z0-9_]+(?:-[a-z0-9_]+)*$";static getTextError(t){for(let e of Object.keys(t))switch(e){case"required":return"Este campo es requerido";case"minlength":return`M\xEDnimo de ${t.minlength.requiredLength} caracteres.`;case"min":return`Valor m\xEDnimo de ${t.min.min}`;case"email":return"El valor ingresado no es un correo electr\xF3nico";case"emailTaken":return"El correo electr\xF3nico ya est\xE1 siendo usado por otro usuario";case"noStrider":return"No se puede usar el username de strider en la app";case"pattern":return t.pattern.requiredPattern===r.emailPattern?"El valor ingresado no luce como un correo electr\xF3nico":"Error de patr\xF3n contra expresi\xF3n regular";default:return`Error de validaci\xF3n no controlado ${e}`}return null}static isValidField(t,e){return!!t.controls[e].errors&&t.controls[e].touched}static getFieldError(t,e){if(!t.controls[e])return null;let n=t.controls[e].errors??{};return r.getTextError(n)}static isValidFieldInArray(t,e){return t.controls[e].errors&&t.controls[e].touched}static getFieldErrorInArray(t,e){if(t.controls.length===0)return null;let n=t.controls[e].errors??{};return r.getTextError(n)}static isFieldOneEqualFieldTwo(t,e){return n=>{let s=n.get(t)?.value,d=n.get(e)?.value;return s===d?null:{passwordsNotEqual:!0}}}static async checkingServerResponse(t){return await ot(),t.value==="hola@mundo.com"?{emailTaken:!0}:null}static notStrider(t){return t.value==="strider"?{noStrider:!0}:null}};var G=class r{control=S.required();get errorMessage(){let t=this.control().errors||{};return this.control().touched&&Object.keys(t).length>0?me.getTextError(t):null}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["form-error-label"]],inputs:{control:[1,"control"]},decls:2,vars:1,consts:[[1,"text-red-500","text-xs"]],template:function(e,n){e&1&&(j(0,"span",0),l(1),z()),e&2&&(a(),v(n.errorMessage))},styles:["[_nghost-%COMP%]{display:block}"]})};function it(r,t){if(r&1){let e=N();o(0,"button",19),g("click",function(){let s=F(e).$implicit,d=b();return T(d.onTagsClicked(s))}),l(1),i()}if(r&2){let e=t.$implicit,n=b();P("btn-primary",n.isTagSelected(e)),a(),_(" ",e," ")}}var ye=class r{router=p(A);productsService=p(be);product=S.required();fb=p(le);productForm=this.fb.group({title:["",h.required],slug:["",[h.required,h.pattern(me.slugPattern)]],unitOfMeasure:["",[h.required]],description:["",h.required],price:[1,[h.required,h.min(1)]],stock:[1,[h.required,h.min(1)]],tags:[[""]],imagesName:[[""]]});tags=["Cerveza","Harina","Salado","Dulce"];ngOnInit(){this.productForm.reset(this.product())}isTagSelected(t){return(this.productForm.value.tags||[]).some(n=>n.toLowerCase()===t.toLowerCase())}onTagsClicked(t){let e=t.toLowerCase(),n=this.productForm.value.tags??[];n.includes(e)?n.splice(n.indexOf(e),1):n.push(e),this.productForm.patchValue({tags:n})}onSubmit(){this.productForm.markAllAsTouched();let t=this.productForm.value,e=$({},t);this.product().id==="new"?this.productsService.createProduct(e).subscribe():this.productsService.updateProduct(this.product().id,e).subscribe(),this.router.navigate(["/admin/products"])}controlPresionado=!1;handleKeyboardEvent(t){t.key==="Control"?this.controlPresionado=!0:t.key==="Enter"&&this.controlPresionado&&this.onSubmit()}handleKeyboardUp(t){t.key==="Control"&&(this.controlPresionado=!1)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["product-details"]],hostBindings:function(e,n){e&1&&g("keydown",function(d){return n.handleKeyboardEvent(d)},V)("keyup",function(d){return n.handleKeyboardUp(d)},V)},inputs:{product:[1,"product"]},decls:32,vars:20,consts:[[1,"text-2xl","font-bold"],[1,"divider"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"text-xl","font-bold","h-12"],["type","text","placeholder","T\xEDtulo","formControlName","title",1,"input","input-bordered","w-full"],[3,"control"],["type","text","placeholder","Slug","formControlName","slug",1,"input","input-bordered","w-full"],["type","text","placeholder","Unidad de medida","formControlName","unitOfMeasure",1,"input","input-bordered","w-full"],["placeholder","Descripci\xF3n","rows","6","formControlName","description",1,"textarea","textarea-bordered"],[1,"text-lg","font-bold"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-2"],["type","number","placeholder","Precio","formControlName","price",1,"input","input-bordered","w-full"],["type","number","placeholder","Stock","formControlName","stock",1,"input","input-bordered","w-full"],[1,"grid","grid-cols-6","gap-2"],["type","button",1,"btn","btn-sm",3,"btn-primary"],[1,"flex","justify-end","h-12"],["type","submit",1,"btn","btn-secondary"],["type","file","formControlName","imagesName",1,"file-input","file-input-bordered","w-full","mt-4"],["type","button",1,"btn","btn-sm",3,"click"]],template:function(e,n){if(e&1&&(o(0,"h1",0),l(1),i(),c(2,"div",1),o(3,"form",2),g("ngSubmit",function(){return n.onSubmit()}),o(4,"div",3)(5,"h2",4),l(6,"Datos generales"),i(),c(7,"input",5)(8,"form-error-label",6)(9,"input",7)(10,"form-error-label",6)(11,"input",8)(12,"form-error-label",6)(13,"textarea",9)(14,"form-error-label",6),o(15,"h2",10),l(16,"Datos de venta"),i(),o(17,"div",11)(18,"div"),c(19,"input",12)(20,"form-error-label",6),i(),o(21,"div"),c(22,"input",13)(23,"form-error-label",6),i()(),o(24,"div",14),q(25,it,2,3,"button",15,Le),i()(),o(27,"div",3)(28,"div",16)(29,"button",17),l(30," Guardar "),i()(),c(31,"input",18),i()()),e&2){let s,d,y,ue,fe,Ae;a(),v(n.product().title||"Crear nuevo producto"),a(2),m("formGroup",n.productForm),a(4),P("border-red-500",((s=n.productForm.get("title"))==null?null:s.errors)??!1),a(),m("control",n.productForm.get("title")),a(),P("border-red-500",((d=n.productForm.get("title"))==null?null:d.errors)??!1),a(),m("control",n.productForm.get("slug")),a(),P("border-red-500",((y=n.productForm.get("unitOfMeasure"))==null?null:y.errors)??!1),a(),m("control",n.productForm.get("unitOfMeasure")),a(),P("border-red-500",((ue=n.productForm.get("description"))==null?null:ue.errors)??!1),a(),m("control",n.productForm.get("description")),a(5),P("border-red-500",((fe=n.productForm.get("price"))==null?null:fe.errors)??!1),a(),m("control",n.productForm.get("price")),a(2),P("border-red-500",((Ae=n.productForm.get("stock"))==null?null:Ae.errors)??!1),a(),m("control",n.productForm.get("stock")),a(2),B(n.tags)}},dependencies:[se,ie,te,je,ne,oe,re,ae,G],styles:["[_nghost-%COMP%]{display:block}"]})};function rt(r,t){r&1&&(o(0,"div",0),c(1,"loading"),i())}function at(r,t){if(r&1&&c(0,"product-details",1),r&2){let e=b();m("product",e.product())}}var _e=class r{activateRoute=p(Y);router=p(A);productId=ee(this.activateRoute.params.pipe(Z(t=>t.id)));paginationService=p(ve);product;loading;error;loadProducts;constructor(){let{product:t,loading:e,error:n,loadProducts:s}=Ue();this.product=t,this.loading=e,this.error=n,this.loadProducts=s,H(()=>{let d=this.productId();this.loadProducts(d)}),H(()=>{this.error()&&this.router.navigate(["/admin/products"])})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-product-admin"]],decls:2,vars:2,consts:[[1,"min-h-[50vh]","gap-4"],[3,"product"]],template:function(e,n){if(e&1&&(C(0,rt,2,0,"div",0),C(1,at,1,1,"product-details",1)),e&2){let s;x(n.loading()?0:-1),a(),x((s=n.product())!=null&&s.id?1:-1)}},dependencies:[R,ye],styles:["[_nghost-%COMP%]{display:block}"]})};var We=r=>["/admin/recipes",r],lt=(r,t)=>t.id;function st(r,t){if(r&1){let e=N();o(0,"tr")(1,"th")(2,"label"),l(3),i()(),o(4,"td")(5,"a",3),l(6),i()(),o(7,"td")(8,"div",4),l(9),pe(10,"slice"),i()(),o(11,"th",5)(12,"a",6),D(),o(13,"svg",7),c(14,"path",8),i()(),L(),o(15,"a",9),g("click",function(){let s=F(e).$implicit,d=b();return T(d.onDelete(s.id))}),D(),o(16,"svg",7),c(17,"path",10),i()()()()}if(r&2){let e=t.$implicit,n=t.$index;a(3),_(" ",n+1," "),a(2),m("routerLink",O(9,We,e.id)),a(),_(" ",e.title," "),a(3),_(" ",Ie(10,5,e.text,0,50),"... "),a(3),m("routerLink",O(11,We,e.id))}}var Se=class r{recipes=S.required();delete=new K;confirmDialog;async onDelete(t){await this.confirmDialog.open("\xBFEst\xE1s seguro que deseas eliminar esta receta?")&&this.delete.emit(t)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["recipes-table"]],viewQuery:function(e,n){if(e&1&&Q(I,5),e&2){let s;U(s=J())&&(n.confirmDialog=s.first)}},inputs:{recipes:[1,"recipes"]},outputs:{delete:"delete"},decls:14,vars:0,consts:[[1,"overflow-y-auto","max-h-[75vh]","overflow-x-auto","border","border-slate-700","rounded-xl"],[1,"table","table-zebra","w-full"],[1,"sticky","top-0","bg-slate-900","z-10"],[1,"font-bold","hover:text-primary","transition-colors","duration-300",3,"routerLink"],[1,"text-sm","opacity-70"],[1,"flex","justify-end"],[1,"btn","btn-ghost","text-primary","btn-xs",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-6"],["d","M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"],[1,"btn","btn-ghost","text-error","btn-xs",3,"click"],["fill-rule","evenodd","d","M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z","clip-rule","evenodd"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),c(4,"th"),o(5,"th"),l(6,"T\xEDtulo"),i(),o(7,"th"),l(8,"Texto"),i(),c(9,"th"),i()(),o(10,"tbody"),q(11,st,18,13,"tr",null,lt),i()()(),c(13,"confirm-dialog")),e&2&&(a(11),B(n.recipes()))},dependencies:[w,I,He],styles:["[_nghost-%COMP%]{display:block}"]})};var ct=()=>[];function dt(r,t){r&1&&(o(0,"div",6),c(1,"loading"),i())}var Pe=class r{recipeService=p(ce);recipes=f(null);total=X(()=>this.recipes()?.length??0);loading=f(!0);error=f(null);ngOnInit(){this.getRecipes()}async getRecipes(){this.loading.set(!0),this.error.set(null);try{let t=await E(this.recipeService.getAll());this.recipes.set(t)}catch{this.error.set("Error al cargar las recetas")}finally{this.loading.set(!1)}}async delete(t){try{await E(this.recipeService.delete(t)),this.recipes.set(this.recipes()?.filter(e=>e.id!==t))}catch(e){console.error("Error al eliminar",e),this.error.set("No se pudo eliminar la receta.")}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["recipes-admin"]],decls:12,vars:4,consts:[[1,"text-2xl","font-bold"],[1,"text-lg"],[1,"text-primary"],[1,"flex","gap-2","items-center","h-20"],[1,"flex","flex-1"],["routerLink","/admin/recipes/new",1,"btn","btn-primary"],[1,"min-h-[50vh]","gap-4"],[3,"delete","recipes"]],template:function(e,n){e&1&&(o(0,"h1",0),l(1,"Listado de recetas"),i(),o(2,"h3",1),l(3," Total de recetas: "),o(4,"span",2),l(5),i()(),o(6,"div",3),c(7,"div",4),o(8,"button",5),l(9," Cargar receta "),i()(),C(10,dt,2,0,"div",6),o(11,"recipes-table",7),g("delete",function(d){return n.delete(d)}),i()),e&2&&(a(5),v(n.total()),a(5),x(n.loading()?10:-1),a(),m("recipes",n.recipes()??W(3,ct)))},dependencies:[w,Se,R],styles:["[_nghost-%COMP%]{display:block}"]})};function mt(r,t){r&1&&c(0,"loading")}var Ee=class r{router=p(A);recipeService=p(ce);recipe=S.required();loading=f(!1);fb=p(le);recipeForm=this.fb.group({title:["",h.required],text:["",h.required]});ngOnInit(){this.recipeForm.reset(this.recipe())}onSubmit(){this.loading.set(!0),this.recipeForm.markAllAsTouched();let t=this.recipeForm.value,e=$({},t),n;this.recipe().id==="new"?n=this.recipeService.create(e):n=this.recipeService.update(this.recipe().id,e),n.subscribe({next:()=>{this.loading.set(!1),this.router.navigate(["/admin/recipes"])},error:()=>{this.loading.set(!1)}})}controlPresionado=!1;handleKeyboardEvent(t){t.key==="Control"?this.controlPresionado=!0:t.key==="Enter"&&this.controlPresionado&&this.onSubmit()}handleKeyboardUp(t){t.key==="Control"&&(this.controlPresionado=!1)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["recipe-details"]],hostBindings:function(e,n){e&1&&g("keydown",function(d){return n.handleKeyboardEvent(d)},V)("keyup",function(d){return n.handleKeyboardUp(d)},V)},inputs:{recipe:[1,"recipe"]},decls:17,vars:9,consts:[[1,"flex","justify-between","items-center","mb-2"],[1,"text-2xl","font-bold"],[1,"divider"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"text-xl","font-bold","h-12"],["type","text","placeholder","T\xEDtulo","formControlName","title",1,"input","input-bordered","w-full"],[3,"control"],["placeholder","Detalles","rows","20","formControlName","text",1,"textarea","textarea-bordered","w-full"],[1,"flex","justify-end","h-12"],["type","submit",1,"btn","btn-secondary"]],template:function(e,n){if(e&1&&(o(0,"div",0)(1,"h1",1),l(2),i(),C(3,mt,1,0,"loading"),i(),c(4,"div",2),o(5,"form",3),g("ngSubmit",function(){return n.onSubmit()}),o(6,"div",4)(7,"h2",5),l(8,"Datos generales"),i(),c(9,"input",6)(10,"form-error-label",7)(11,"textarea",8)(12,"form-error-label",7),i(),o(13,"div",4)(14,"div",9)(15,"button",10),l(16,"Guardar"),i()()()()),e&2){let s,d;a(2),_(" ",n.recipe().title||"Crear nueva receta"," "),a(),x(n.loading()?3:-1),a(2),m("formGroup",n.recipeForm),a(4),P("border-red-500",((s=n.recipeForm.get("title"))==null?null:s.errors)??!1),a(),m("control",n.recipeForm.get("title")),a(),P("border-red-500",((d=n.recipeForm.get("text"))==null?null:d.errors)??!1),a(),m("control",n.recipeForm.get("text"))}},dependencies:[se,ie,te,ne,oe,re,ae,G,R],styles:["[_nghost-%COMP%]{display:block}"]})};function pt(r,t){r&1&&(o(0,"div",0),c(1,"loading"),i())}function ut(r,t){if(r&1&&c(0,"recipe-details",1),r&2){let e=b();m("recipe",e.recipe())}}var De=class r{activateRoute=p(Y);router=p(A);recipeService=p(ce);recipeId=ee(this.activateRoute.params.pipe(Z(t=>t.id)));recipe=f(null);loading=f(!0);error=f(null);constructor(){H(()=>{let t=this.recipeId();this.loadRecipe(t)})}async loadRecipe(t){this.loading.set(!0),this.error.set(null);try{let e=await E(this.recipeService.getById(t));this.recipe.set(e)}catch{this.error.set("Error al cargar la receta"),this.router.navigate(["/admin/recipes"])}finally{this.loading.set(!1)}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["recipe-admin"]],decls:2,vars:2,consts:[[1,"min-h-[50vh]","gap-4"],[3,"recipe"]],template:function(e,n){if(e&1&&(C(0,pt,2,0,"div",0),C(1,ut,1,1,"recipe-details",1)),e&2){let s;x(n.loading()?0:-1),a(),x((s=n.recipe())!=null&&s.id?1:-1)}},dependencies:[R,Ee],styles:["[_nghost-%COMP%]{display:block}"]})};var Xe=r=>["/admin/contacts",r],ft=(r,t)=>t.id;function gt(r,t){if(r&1){let e=N();o(0,"tr")(1,"th"),l(2),i(),o(3,"td")(4,"a",3),l(5),i()(),o(6,"td"),l(7),i(),o(8,"td"),l(9),i(),o(10,"th",4)(11,"a",5),D(),o(12,"svg",6),c(13,"path",7),i()(),L(),o(14,"a",8),g("click",function(){let s=F(e).$implicit,d=b();return T(d.onDelete(s.id))}),D(),o(15,"svg",6),c(16,"path",9),i()()()()}if(r&2){let e=t.$implicit,n=t.$index;a(2),v(n+1),a(2),m("routerLink",O(6,Xe,e.id)),a(),_(" ",e.title," "),a(2),v(e.phone),a(2),v(e.email),a(2),m("routerLink",O(8,Xe,e.id))}}var we=class r{contacts=S.required();delete=new K;confirmDialog;async onDelete(t){await this.confirmDialog.open("\xBFEst\xE1s seguro que deseas eliminar este contacto?")&&this.delete.emit(t)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["contacts-table"]],viewQuery:function(e,n){if(e&1&&Q(I,5),e&2){let s;U(s=J())&&(n.confirmDialog=s.first)}},inputs:{contacts:[1,"contacts"]},outputs:{delete:"delete"},decls:16,vars:0,consts:[[1,"overflow-y-auto","max-h-[75vh]","overflow-x-auto","border","border-slate-700","rounded-xl"],[1,"table","table-zebra","w-full"],[1,"sticky","top-0","bg-slate-900","z-10"],[1,"font-bold","hover:text-primary","transition-colors","duration-300",3,"routerLink"],[1,"flex","justify-end"],[1,"btn","btn-ghost","text-primary","btn-xs",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-6"],["d","M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"],[1,"btn","btn-ghost","text-error","btn-xs",3,"click"],["fill-rule","evenodd","d","M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z","clip-rule","evenodd"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),c(4,"th"),o(5,"th"),l(6,"Nombre"),i(),o(7,"th"),l(8,"Tel\xE9fono"),i(),o(9,"th"),l(10,"Email"),i(),c(11,"th"),i()(),o(12,"tbody"),q(13,gt,17,10,"tr",null,ft),i()()(),c(15,"confirm-dialog")),e&2&&(a(13),B(n.contacts()))},dependencies:[w,I],styles:["[_nghost-%COMP%]{display:block}"]})};var vt=()=>[];function bt(r,t){r&1&&(o(0,"div",6),c(1,"loading"),i())}var ke=class r{contactService=p(de);contacts=f(null);total=X(()=>this.contacts()?.length??0);loading=f(!0);error=f(null);ngOnInit(){this.getContacts()}async getContacts(){this.loading.set(!0),this.error.set(null);try{let t=await E(this.contactService.getAll());this.contacts.set(t)}catch{this.error.set("Error al cargar los contactos")}finally{this.loading.set(!1)}}async delete(t){try{await E(this.contactService.delete(t)),this.contacts.set(this.contacts()?.filter(e=>e.id!==t))}catch(e){console.error("Error al eliminar",e),this.error.set("No se pudo eliminar el contacto.")}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["contacts-admin"]],decls:12,vars:4,consts:[[1,"text-2xl","font-bold"],[1,"text-lg"],[1,"text-primary"],[1,"flex","gap-2","items-center","h-20"],[1,"flex","flex-1"],["routerLink","/admin/contacts/new",1,"btn","btn-primary"],[1,"min-h-[50vh]","gap-4"],[3,"delete","contacts"]],template:function(e,n){e&1&&(o(0,"h1",0),l(1,"Listado de contactos"),i(),o(2,"h3",1),l(3," Total de contactos: "),o(4,"span",2),l(5),i()(),o(6,"div",3),c(7,"div",4),o(8,"button",5),l(9," Cargar contacto "),i()(),C(10,bt,2,0,"div",6),o(11,"contacts-table",7),g("delete",function(d){return n.delete(d)}),i()),e&2&&(a(5),v(n.total()),a(5),x(n.loading()?10:-1),a(),m("contacts",n.contacts()??W(3,vt)))},dependencies:[w,we,R],styles:["[_nghost-%COMP%]{display:block}"]})};var Me=class r{router=p(A);contactService=p(de);contact=S.required();fb=p(le);contactForm=this.fb.group({title:["",h.required],phone:["",h.required],email:["",[h.required,h.email]]});ngOnInit(){this.contactForm.reset(this.contact())}onSubmit(){this.contactForm.markAllAsTouched();let t=this.contactForm.value,e=$({},t);this.contact().id==="new"?this.contactService.create(e).subscribe():this.contactService.update(this.contact().id,e).subscribe(),this.router.navigate(["/admin/contacts"])}controlPresionado=!1;handleKeyboardEvent(t){t.key==="Control"?this.controlPresionado=!0:t.key==="Enter"&&this.controlPresionado&&this.onSubmit()}handleKeyboardUp(t){t.key==="Control"&&(this.controlPresionado=!1)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["contact-details"]],hostBindings:function(e,n){e&1&&g("keydown",function(d){return n.handleKeyboardEvent(d)},V)("keyup",function(d){return n.handleKeyboardUp(d)},V)},inputs:{contact:[1,"contact"]},decls:17,vars:11,consts:[[1,"text-2xl","font-bold"],[1,"divider"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"text-xl","font-bold","h-12"],["type","text","placeholder","Nombre","formControlName","title",1,"input","input-bordered","w-full"],[3,"control"],["type","text","placeholder","Tel\xE9fono","formControlName","phone",1,"input","input-bordered","w-full"],["type","email","placeholder","Email","formControlName","email",1,"input","input-bordered","w-full"],[1,"flex","justify-end","h-12"],["type","submit",1,"btn","btn-secondary"]],template:function(e,n){if(e&1&&(o(0,"h1",0),l(1),i(),c(2,"div",1),o(3,"form",2),g("ngSubmit",function(){return n.onSubmit()}),o(4,"div",3)(5,"h2",4),l(6,"Datos generales"),i(),c(7,"input",5)(8,"form-error-label",6)(9,"input",7)(10,"form-error-label",6)(11,"input",8)(12,"form-error-label",6),i(),o(13,"div",3)(14,"div",9)(15,"button",10),l(16,"Guardar"),i()()()()),e&2){let s,d,y;a(),v(n.contact().title||"Crear nuevo contacto"),a(2),m("formGroup",n.contactForm),a(4),P("border-red-500",((s=n.contactForm.get("title"))==null?null:s.errors)??!1),a(),m("control",n.contactForm.get("title")),a(),P("border-red-500",((d=n.contactForm.get("phone"))==null?null:d.errors)??!1),a(),m("control",n.contactForm.get("phone")),a(),P("border-red-500",((y=n.contactForm.get("email"))==null?null:y.errors)??!1),a(),m("control",n.contactForm.get("email"))}},dependencies:[se,ie,te,ne,oe,re,ae,G],styles:["[_nghost-%COMP%]{display:block}"]})};function ht(r,t){r&1&&(o(0,"div",0),c(1,"loading"),i())}function Ct(r,t){if(r&1&&c(0,"contact-details",1),r&2){let e=b();m("contact",e.contact())}}var Fe=class r{activateRoute=p(Y);router=p(A);contactService=p(de);contactId=ee(this.activateRoute.params.pipe(Z(t=>t.id)));contact=f(null);loading=f(!0);error=f(null);constructor(){H(()=>{let t=this.contactId();this.loadContact(t)})}async loadContact(t){this.loading.set(!0),this.error.set(null);try{let e=await E(this.contactService.getById(t));this.contact.set(e)}catch{this.error.set("Error al cargar el contacto"),this.router.navigate(["/admin/contacts"])}finally{this.loading.set(!1)}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["contact-admin"]],decls:2,vars:2,consts:[[1,"min-h-[50vh]","gap-4"],[3,"contact"]],template:function(e,n){if(e&1&&(C(0,ht,2,0,"div",0),C(1,Ct,1,1,"contact-details",1)),e&2){let s;x(n.loading()?0:-1),a(),x((s=n.contact())!=null&&s.id?1:-1)}},dependencies:[R,Me],styles:["[_nghost-%COMP%]{display:block}"]})};var xt=[{path:"",component:he,canMatch:[Ke],children:[{path:"products",component:xe},{path:"products/:id",component:_e},{path:"recipes",component:Pe},{path:"recipes/:id",component:De},{path:"contacts",component:ke},{path:"contacts/:id",component:Fe},{path:"**",redirectTo:"products"}]}],li=xt;export{xt as AdminDashboardRoutes,li as default};
