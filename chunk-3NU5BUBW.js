import{$ as s,Aa as Q,C as u,Ea as f,F as w,Fa as z,M as k,N as D,O as E,P as R,Q as d,R as l,T as C,U as I,V as L,W as N,X as T,Y as x,_ as $,ba as O,da as S,e as P,ea as q,f as j,g as y,i as v,ka as V,l as p,ma as U,na as _,o as i,p as F,q as M,ta as H,u as m,xa as A,z as h,za as B}from"./chunk-SFL4ZYLX.js";var J=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["loading"]],decls:4,vars:0,consts:[[1,"flex","flex-col","justify-center","items-center","h-screen","gap-4"],[1,"loading","loading-spinner","loading-lg"]],template:function(e,r){e&1&&(C(0,"div",0),L(1,"span",1),C(2,"p"),s(3," Cargando... "),I()())},styles:["[_nghost-%COMP%]{display:block}"]})};var K=class n{activateRoute=i(A);router=i(B);currentPage=z(this.activateRoute.queryParamMap.pipe(y(t=>t.get("page")?+t.get("page"):1),y(t=>isNaN(t)?1:t)),{initialValue:1});setPage(t){this.router.navigate([],{queryParams:{page:t},queryParamsHandling:"merge"})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=p({token:n,factory:n.\u0275fac,providedIn:"root"})};var X=f.baseUrl,b=class n{constructor(){}http=i(H);productsCache=new Map;productCache=new Map;getProducts(t={}){let{limit:e=12,offset:r=0,isFeatured:a=!1}=t,o=a?"isFeatured":`${e}-${r}`;return this.productsCache.has(o)?P(this.productsCache.get(o)):this.http.get(`${X}/products`,{params:{limit:e,offset:r,isFeatured:a},responseType:"json"}).pipe(v(Z=>this.productsCache.set(o,Z)))}getProductByIdSlug(t){return this.productCache.has(t)?P(this.productCache.get(t)):this.http.get(`${X}/products/${t}`,{responseType:"json"}).pipe(v(r=>this.productCache.set(t,r)))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=p({token:n,factory:n.\u0275fac,providedIn:"root"})};function xe(){let n=i(b),t=m(null),e=m(!0),r=m(null);async function a(o){e.set(!0),r.set(null);try{let c=await j(n.getProducts(o));t.set(c)}catch(c){console.error(c),r.set("Error al cargar los productos")}finally{e.set(!1)}}return{productResponse:t,loading:e,error:r,loadProducts:a}}var te=()=>[],ne=n=>({page:n});function re(n,t){if(n&1){let e=N();d(0,"button",3),T("click",function(){let a=F(e).$implicit,o=x();return M(o.activePage.set(a))}),s(1),l()}if(n&2){let e=t.$implicit,r=x();$("btn-primary",e===r.activePage()),R("routerLink",S(5,te))("queryParams",q(6,ne,e)),h(),O(" ",e," ")}}function oe(n,t){n&1&&(d(0,"button",2),s(1,"0"),l())}var G=class n{pages=_(0);currentPage=_(1);activePage=U(this.currentPage);getPagesList=V(()=>Array.from({length:this.pages()},(t,e)=>e+1));static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["pagination"]],inputs:{pages:[1,"pages"],currentPage:[1,"currentPage"]},decls:4,vars:1,consts:[[1,"join","flex","justify-center","items-center"],[1,"join-item","btn",3,"btn-primary","routerLink","queryParams"],[1,"join-item","btn"],[1,"join-item","btn",3,"click","routerLink","queryParams"]],template:function(e,r){e&1&&(d(0,"div",0),D(1,re,2,8,"button",1,k,!1,oe,2,0,"button",2),l()),e&2&&(h(),E(r.getPagesList()))},dependencies:[Q],styles:["[_nghost-%COMP%]{display:block}"]})};var W=f.baseUrl,Y=class n{transform(t){if(typeof t=="string")return`${W}/files/product/${t}`;let e=t[0];return e?`${W}/files/product/${e}`:"https://www.foodnavigator.com/resizer/v2/3MET5T7L4JO25FVOXQDQ67EHOE.jpg?auth=d16d65b4d7f1ff6620ee4d54a2abb29750e275e5721fcd954f2aecd5a78ab6f7&smart=true"}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=w({name:"productImage",type:n,pure:!0})};export{J as a,K as b,b as c,Y as d,xe as e,G as f};
