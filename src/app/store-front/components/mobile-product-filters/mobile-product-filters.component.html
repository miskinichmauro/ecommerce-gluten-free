<div class="mobile-filters space-y-4 border-t border-base-300 px-3 pt-3 pb-2">
  <div class="flex items-center justify-between">
    <h4 class="font-semibold text-base-content">Categorias</h4>
  </div>

  <ul class="flex flex-col gap-2">
    <li>
      <button
        type="button"
        class="w-full text-left p-2 rounded-md cursor-pointer text-base-content transition-colors duration-200 hover:bg-base-200 hover:text-base-content"
        [class.bg-base-200]="pendingCategory() === 'all'"
        [class.font-semibold]="pendingCategory() === 'all'"
        (click)="selectCategory('all')"
      >
        Todos
      </button>
    </li>
    @for (cat of categories(); track cat.id) {
      <li>
        <button
          type="button"
          class="w-full text-left p-2 rounded-md cursor-pointer text-base-content transition-colors duration-200 hover:bg-base-200 hover:text-base-content"
          [class.bg-base-200]="pendingCategory() === cat.id"
          [class.font-semibold]="pendingCategory() === cat.id"
          (click)="selectCategory(cat.id)"
        >
          {{ cat.name }}
        </button>
      </li>
    }
  </ul>

  <div class="flex items-center justify-between">
    <h4 class="font-semibold text-base-content">Tags</h4>
  </div>

  <div class="flex flex-wrap gap-2">
    @for (tag of tags(); track tag.id) {
      <button
        type="button"
        class="filter-tag btn btn-sm rounded-md min-h-9 px-4"
        [ngClass]="pendingTags().has(tag.id) ? 'btn-outline border-base-200 bg-base-200 text-base-content font-semibold' : 'btn-outline border-base-200 text-base-content'"
        (click)="toggleTag(tag.id)"
      >
        {{ tag.name }}
      </button>
    }
  </div>

  <div class="flex gap-2">
    <button class="btn btn-sm btn-outline flex-1" type="button" (click)="resetTags()" [disabled]="!pendingTags().size && !selectedTags().size">
      Limpiar
    </button>
    <button class="btn btn-sm btn-primary flex-1" type="button" (click)="applyFilters()" [disabled]="!hasPendingChanges()">
      Aplicar
    </button>
  </div>
</div>
