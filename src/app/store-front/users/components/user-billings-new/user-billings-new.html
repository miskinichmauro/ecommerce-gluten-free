<section class="space-y-4">
  <div class="flex items-center justify-between gap-3">
    <div>
      <h2 class="text-xl font-bold">{{ editingId ? 'Editar facturación' : 'Nuevo perfil de facturación' }}</h2>
      <p class="text-sm text-base-content/70">Completa los datos de facturación.</p>
    </div>
  </div>

  <form
    class="grid grid-cols-1 md:grid-cols-2 gap-4 bg-base-200/60 rounded-lg p-5"
    [formGroup]="form"
    (ngSubmit)="save()"
  >
    <div class="flex flex-col gap-2">
      <span class="font-semibold">Razón social</span>
      <input
        class="input input-bordered border border-base-300 focus:outline-none focus:ring-[1px] focus:ring-base-300 focus:border-base-400"
        [ngClass]="{ 'border-error focus:border-error': isInvalid('legalName') }"
        formControlName="legalName"
      />
    </div>

    <div class="flex flex-col gap-2">
      <span class="font-semibold">Email</span>
      <input
        class="input input-bordered border border-base-300 focus:outline-none focus:ring-[1px] focus:ring-base-300 focus:border-base-400"
        type="email"
        [ngClass]="{ 'border-error focus:border-error': isInvalid('email') }"
        formControlName="email"
      />
    </div>

    <div class="flex flex-col gap-2">
      <span class="font-semibold">RUC</span>
      <input
        class="input input-bordered border border-base-300 focus:outline-none focus:ring-[1px] focus:ring-base-300 focus:border-base-400"
        [ngClass]="{ 'border-error focus:border-error': isInvalid('taxId') }"
        formControlName="taxId"
      />
    </div>

    <div class="flex flex-col gap-2">
      <span class="font-semibold">Teléfono</span>
      <input
        class="input input-bordered border border-base-300 focus:outline-none focus:ring-[1px] focus:ring-base-300 focus:border-base-400"
        [ngClass]="{ 'border-error focus:border-error': isInvalid('phone') }"
        formControlName="phone"
      />
    </div>

    <div class="flex flex-col gap-2">
      <span class="font-semibold">País</span>
      <input
        class="input input-bordered border border-base-300 focus:outline-none focus:ring-[1px] focus:ring-base-300 focus:border-base-400"
        [ngClass]="{ 'border-error focus:border-error': isInvalid('country') }"
        formControlName="country"
      />
    </div>

    <div class="flex flex-col gap-2">
      <span class="font-semibold">Departamento</span>
      <input
        class="input input-bordered border border-base-300 focus:outline-none focus:ring-[1px] focus:ring-base-300 focus:border-base-400"
        [ngClass]="{ 'border-error focus:border-error': isInvalid('state') }"
        formControlName="state"
      />
    </div>

    <div class="md:col-span-2 flex flex-col gap-2">
      <span class="font-semibold">Dirección</span>
      <input
        class="input input-bordered border border-base-300 focus:outline-none focus:ring-[1px] focus:ring-base-300 focus:border-base-400"
        [ngClass]="{ 'border-error focus:border-error': isInvalid('addressLine1') }"
        formControlName="addressLine1"
      />
    </div>

    <div class="flex flex-col gap-2">
      <span class="font-semibold">Ciudad</span>
      <input
        class="input input-bordered border border-base-300 focus:outline-none focus:ring-[1px] focus:ring-base-300 focus:border-base-400"
        [ngClass]="{ 'border-error focus:border-error': isInvalid('city') }"
        formControlName="city"
      />
    </div>
    <div class="hidden md:block"></div>

    <label class="md:col-span-2 flex items-center gap-2 pt-1">
      <input type="checkbox" class="checkbox checkbox-primary" formControlName="isDefault" />
      <span class="font-semibold">Usar como perfil principal</span>
    </label>

    <div class="md:col-span-2 flex justify-end pt-1">
      <button class="btn btn-primary min-w-32" type="submit" [disabled]="form.invalid || !hasChanges() || submitting()">
        Guardar
      </button>
    </div>
  </form>
</section>
