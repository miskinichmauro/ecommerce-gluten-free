<div class="navbar bg-base-100 shadow-sm sticky top-0 z-40">
  <div class="navbar-start mx-3">
    <app-logo />
  </div>

  <div class="navbar-center w-full max-w-2xl px-3">
    <div class="relative w-full" #suggestContainer>
      <form class="w-full" (submit)="onSubmit($event)">
        <label class="input w-full">
          <input
            type="text"
            [formControl]="searchControl"
            placeholder="Buscar productos..."
            class="grow"
            aria-label="Buscar productos"
            (keydown.escape)="closeSuggestions()"
            (keydown)="onKeyDown($event)"
          />
        </label>
      </form>

      @if (suggestions.length > 0) {
        <ul
          class="absolute top-[105%] w-full bg-base-100 shadow-lg rounded-lg border border-base-300 z-9999 p-2 flex flex-col gap-1"
        >
          @for (item of suggestions; track $index; let i = $index) {
            <li
              (click)="selectSuggestion(item)"
              class="cursor-pointer p-2 rounded-md flex justify-between"
              [class.bg-primary/20]="i === activeIndex"
              [class.text-primary]="i === activeIndex"
            >
              <span>{{ item.title }}</span>
              <span class="opacity-70">{{ item.price | guaranies }}</span>
            </li>
          }

          <li
            class="text-center text-sm text-primary cursor-pointer hover:bg-base-200 p-2 rounded-md"
            (click)="performSearch(searchControl.value!)"
          >
            Ver todos los resultados â†’
          </li>
        </ul>
      }
    </div>
  </div>

  <div class="navbar-end gap-2 mx-3">
    <nav-user-options />
  </div>
</div>
