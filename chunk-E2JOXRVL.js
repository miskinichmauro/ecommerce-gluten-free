import{a as te,b as re}from"./chunk-HGAV54CU.js";import{Aa as b,B as C,E as u,Ea as X,Ga as Y,H as T,Ha as R,La as m,Ma as Z,Na as ee,O as A,P as q,Q as V,R as I,S as c,T as p,U as j,V as S,W as B,X as H,Y as z,_ as O,aa as _,e as a,f as D,fa as w,g as k,ga as d,i as o,ia as G,ka as K,l,la as J,o as i,p as N,q as U,r as L,ra as Q,s as E,ta as W,u as x,ua as v}from"./chunk-JMJRKYHN.js";var ne=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=u({type:r,selectors:[["app-logo"]],decls:5,vars:0,consts:[["id","logo"],["routerLink","/",1,"text-lg","md:text-2xl","font-bold","text-white"],[1,"text-blue-500"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"a",1),d(2,"Gluten"),c(3,"span",2),d(4," Free"),p()()())},dependencies:[R],styles:["[_nghost-%COMP%]{display:block}"]})};var oe=class r{menuItems=v.required();authService=i(ee);configurationService=i(te);open(){return this.configurationService.sidebarItemsStatus()==="open"}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=u({type:r,selectors:[["sidebar-items"]],inputs:{menuItems:[1,"menuItems"]},decls:6,vars:5,consts:[[1,"fixed","inset-0","bg-base-100","z-50","transform","transition-transform","duration-400","flex","flex-col"],[1,"flex","justify-end"],[1,"btn","btn-ghost",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[3,"menuItems"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1)(2,"button",2),O("click",function(){return n.configurationService.toggleSidebarItemsStatus("closed")}),L(),c(3,"svg",3),j(4,"path",4),p()()(),E(),j(5,"nav-items",5),p()),t&2&&(w("translate-x-0",n.open())("-translate-x-full",!n.open()),C(5),I("menuItems",n.menuItems()))},dependencies:[re],styles:["[_nghost-%COMP%]{display:block}"]})};var ie=class r{activateRoute=i(X);router=i(Y);currentPage=Z(this.activateRoute.queryParamMap.pipe(k(e=>e.get("page")?+e.get("page"):1),k(e=>isNaN(e)?1:e)),{initialValue:1});setPage(e){this.router.navigate([],{queryParams:{page:e},queryParamsHandling:"merge"})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};var M=`${m.baseUrl}/products`,de={id:"new",title:"",price:0,unitOfMeasure:"",description:"",slug:"",stock:0,tags:[""],deleteAt:null,imagesName:[""],user:{}},$=class r{constructor(){}http=i(b);productsCache=new Map;productCache=new Map;getProducts(e={}){let t=m.cantProducts,{limit:n=t,offset:s=0,isFeatured:g=!1}=e,h=g?"isFeatured":`${n}-${s}`;return this.productsCache.has(h)?a(this.productsCache.get(h)):this.http.get(M,{params:{limit:n,offset:s,isFeatured:g},responseType:"json"}).pipe(o(ue=>this.productsCache.set(h,ue)))}getProductByIdSlug(e){return e==="new"?a(de):this.productCache.has(e)?a(this.productCache.get(e)):this.http.get(`${M}/${e}`,{responseType:"json"}).pipe(o(n=>this.productCache.set(e,n)))}createProduct(e){return this.http.post(`${M}`,e).pipe(o(n=>this.insertOrUpdateCache(n)))}updateProduct(e,t){return this.http.patch(`${M}/${e}`,t).pipe(o(s=>this.insertOrUpdateCache(s)))}insertOrUpdateCache(e){this.productCache.get(e.id)?(this.productCache.set(e.id,e),this.productsCache.forEach(n=>{n.products=n.products.map(s=>s.id===e.id?e:s)})):(this.productCache.set(e.id,e),this.productsCache.clear())}static \u0275fac=function(t){return new(t||r)};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};function Ge(){let r=i($),e=x(null),t=x(!0),n=x(null);async function s(g){t.set(!0),n.set(null);try{let h=await D(r.getProducts(g));e.set(h)}catch{n.set("Error al cargar los productos")}finally{t.set(!1)}}return{productResponse:e,loading:t,error:n,loadProducts:s}}var fe=()=>[],ge=r=>({page:r});function he(r,e){if(r&1){let t=z();c(0,"button",3),O("click",function(){let s=N(t).$implicit,g=_();return U(g.activePage.set(s))}),d(1),p()}if(r&2){let t=e.$implicit,n=_();w("btn-primary",t===n.activePage()),I("routerLink",K(5,fe))("queryParams",J(6,ge,t)),C(),G(" ",t," ")}}function be(r,e){r&1&&(c(0,"button",2),d(1,"0"),p())}var se=class r{pages=v(0);currentPage=v(1);activePage=W(this.currentPage);getPagesList=Q(()=>Array.from({length:this.pages()},(e,t)=>t+1));static \u0275fac=function(t){return new(t||r)};static \u0275cmp=u({type:r,selectors:[["pagination"]],inputs:{pages:[1,"pages"],currentPage:[1,"currentPage"]},decls:4,vars:1,consts:[[1,"join","flex","justify-center","items-center"],[1,"join-item","btn",3,"btn-primary","routerLink","queryParams"],[1,"join-item","btn"],[1,"join-item","btn",3,"click","routerLink","queryParams"]],template:function(t,n){t&1&&(c(0,"div",0),q(1,he,2,8,"button",1,A,!1,be,2,0,"button",2),p()),t&2&&(C(),V(n.getPagesList()))},dependencies:[R],styles:["[_nghost-%COMP%]{display:block}"]})};var ae=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=u({type:r,selectors:[["loading"]],decls:4,vars:0,consts:[[1,"flex","flex-col","justify-center","items-center"],[1,"loading","loading-spinner","loading-lg"]],template:function(t,n){t&1&&(S(0,"div",0),H(1,"span",1),S(2,"p"),d(3," Cargando... "),B()())},styles:["[_nghost-%COMP%]{display:block}"]})};var P=`${m.baseUrl}/recipes`,Ce={id:"new",title:"",text:""},ce=class r{http=i(b);recipesCache=new Map;getAll(){return this.recipesCache.size?a(Array.from(this.recipesCache.values())):this.http.get(P).pipe(o(e=>e.forEach(t=>this.recipesCache.set(t.id,t))))}getById(e){return e==="new"?a(Ce):this.recipesCache.has(e)?a(this.recipesCache.get(e)):this.http.get(`${P}/${e}`).pipe(o(t=>this.recipesCache.set(e,t)))}create(e){return this.http.post(P,e).pipe(o(t=>this.insertOrUpdateCache(t)))}update(e,t){return this.http.patch(`${P}/${e}`,t).pipe(o(n=>this.insertOrUpdateCache(n)))}delete(e){return this.http.delete(`${P}/${e}`).pipe(o(()=>this.recipesCache.delete(e)))}insertOrUpdateCache(e){this.recipesCache.set(e.id,e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};var y=`${m.baseUrl}/contacts`,ve={id:"new",title:"",phone:"",email:""},pe=class r{http=i(b);contactsCache=new Map;getAll(){return this.contactsCache.size?a(Array.from(this.contactsCache.values())):this.http.get(y).pipe(o(e=>e.forEach(t=>this.contactsCache.set(t.id,t))))}getById(e){return e==="new"?a(ve):this.contactsCache.has(e)?a(this.contactsCache.get(e)):this.http.get(`${y}/${e}`).pipe(o(t=>this.contactsCache.set(e,t)))}create(e){return this.http.post(y,e).pipe(o(t=>this.insertOrUpdateCache(t)))}update(e,t){return this.http.patch(`${y}/${e}`,t).pipe(o(n=>this.insertOrUpdateCache(n)))}delete(e){return this.http.delete(`${y}/${e}`).pipe(o(()=>this.contactsCache.delete(e)))}insertOrUpdateCache(e){this.contactsCache.set(e.id,e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};var me=m.baseUrl,le=class r{transform(e){if(typeof e=="string")return`${me}/files/product/${e}`;let t=e[0];return t?`${me}/files/product/${t}`:"assets/images/default-image.jpg"}static \u0275fac=function(t){return new(t||r)};static \u0275pipe=T({name:"productImage",type:r,pure:!0})};export{ne as a,oe as b,le as c,ie as d,$ as e,Ge as f,se as g,ae as h,ce as i,pe as j};
