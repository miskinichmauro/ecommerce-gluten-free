import{Aa as U,C as F,Ea as d,F as w,Fa as A,N as M,O as k,P as R,Q as I,R as u,S as m,W as T,X as $,Y as y,Z as D,_ as v,aa as N,ca as L,da as O,e as l,f as _,g,i as b,ja as E,l as c,la as V,ma as h,o as a,p as x,q as j,ta as S,u as p,xa as q,z as P}from"./chunk-YPEBCAFG.js";var B=class r{activateRoute=a(q);currentPage=A(this.activateRoute.queryParamMap.pipe(g(t=>t.get("page")?+t.get("page"):1),g(t=>isNaN(t)?1:t)),{initialValue:1});static \u0275fac=function(e){return new(e||r)};static \u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})};var H=d.baseUrl,f=class r{constructor(){}http=a(S);productsCache=new Map;productCache=new Map;getProducts(t={}){let{limit:e=12,offset:o=0,isFeatured:i=!1}=t,n=i?"isFeatured":`${e}-${o}`;return this.productsCache.has(n)?l(this.productsCache.get(n)):this.http.get(`${H}/products`,{params:{limit:e,offset:o,isFeatured:i},responseType:"json"}).pipe(b(K=>this.productsCache.set(n,K)))}getProductByIdSlug(t){return this.productCache.has(t)?l(this.productCache.get(t)):this.http.get(`${H}/products/${t}`,{responseType:"json"}).pipe(b(o=>this.productCache.set(t,o)))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})};function ge(){let r=a(f),t=p(null),e=p(!0),o=p(null);async function i(n){e.set(!0),o.set(null);try{let s=await _(r.getProducts(n));t.set(s)}catch(s){console.error(s),o.set("Error al cargar los productos")}finally{e.set(!1)}}return{productResponse:t,loading:e,error:o,loadProducts:i}}var X=()=>[],G=r=>({page:r});function W(r,t){if(r&1){let e=T();u(0,"button",3),$("click",function(){let i=x(e).$implicit,n=y();return j(n.activePage.set(i))}),v(1),m()}if(r&2){let e=t.$implicit,o=y();D("btn-primary",e===o.activePage()),I("routerLink",L(5,X))("queryParams",O(6,G,e)),P(),N(" ",e," ")}}function Y(r,t){r&1&&(u(0,"button",2),v(1,"0"),m())}var Q=class r{pages=h(0);currentPage=h(1);activePage=V(this.currentPage);getPagesList=E(()=>Array.from({length:this.pages()},(t,e)=>e+1));static \u0275fac=function(e){return new(e||r)};static \u0275cmp=F({type:r,selectors:[["pagination"]],inputs:{pages:[1,"pages"],currentPage:[1,"currentPage"]},decls:4,vars:1,consts:[[1,"join","flex","justify-center","items-center","mt-4","mb-10"],[1,"join-item","btn",3,"btn-primary","routerLink","queryParams"],[1,"join-item","btn"],[1,"join-item","btn",3,"click","routerLink","queryParams"]],template:function(e,o){e&1&&(u(0,"div",0),k(1,W,2,8,"button",1,M,!1,Y,2,0,"button",2),m()),e&2&&(P(),R(o.getPagesList()))},dependencies:[U],styles:["[_nghost-%COMP%]{display:block}"]})};var z=d.baseUrl,J=class r{transform(t){if(typeof t=="string")return`${z}/files/product/${t}`;let e=t[0];return e?`${z}/files/product/${e}`:"https://www.foodnavigator.com/resizer/v2/3MET5T7L4JO25FVOXQDQ67EHOE.jpg?auth=d16d65b4d7f1ff6620ee4d54a2abb29750e275e5721fcd954f2aecd5a78ab6f7&smart=true"}static \u0275fac=function(e){return new(e||r)};static \u0275pipe=w({name:"productImage",type:r,pure:!0})};export{J as a,B as b,f as c,ge as d,Q as e};
