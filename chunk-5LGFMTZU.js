import{p as X}from"./chunk-ZFQKFX5O.js";import{$ as A,$a as h,C as _,Fa as M,H as ie,Ha as pe,Ia as k,J as m,M as f,P as U,Pa as O,Ua as le,W as ne,Wa as z,Xa as Z,Y as re,Z as ae,_ as oe,aa as H,ab as me,ba as b,bb as ue,ca as s,da as u,ea as P,fa as w,g as p,ga as F,h as ee,ha as se,i as te,ia as V,ka as v,la as ce,ma as y,n as l,p as o,s as g,sa as B,ta as C,v as r,va as G,w as D,x as N,y as I,ya as L,z as q,za as R}from"./chunk-HVAOKWIU.js";var de=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-logo"]],decls:5,vars:0,consts:[["id","logo"],["routerLink","/",1,"text-lg","md:text-2xl","font-bold"],[1,"text-amber-500"]],template:function(t,i){t&1&&(s(0,"div",0)(1,"a",1),C(2," Gluten "),s(3,"span",2),C(4," Free"),u()()())},dependencies:[Z],styles:["[_nghost-%COMP%]{display:block}"]})};function Ie(n,e){if(n&1){let t=V();w(0,"a",2),ce("click",function(){D(t);let a=y().$implicit,c=y();return N(c.handleOnClick(a.routerLink))}),C(1),F()}if(n&2){let t=y().$implicit;m(),G(" ",t.label," ")}}function _e(n,e){if(n&1&&ne(0,Ie,2,1,"a",1),n&2){let t=e.$implicit,i=y();re(!t.adminOnly||i.authService.isAdmin()?0:-1)}}var W=class n{menuItems=k.required();authService=r(ue);configurationService=r(X);router=r(z);handleOnClick(e){this.configurationService.toggleSidebarItemsStatus("closed"),this.configurationService.toggleSidebarPageStatus("closed"),typeof e=="string"?this.router.navigateByUrl(e):this.router.navigate([e])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["menu-items"]],inputs:{menuItems:[1,"menuItems"]},decls:3,vars:0,consts:[[1,"flex","flex-col","gap-2","px-4"],[1,"p-2","cursor-pointer","rounded-md","text-base-content","hover:bg-base-200","hover:text-base-content","transition-colors","duration-200"],[1,"p-2","cursor-pointer","rounded-md","text-base-content","hover:bg-base-200","hover:text-base-content","transition-colors","duration-200",3,"click"]],template:function(t,i){t&1&&(w(0,"nav",0),A(1,_e,1,1,null,null,ae),F()),t&2&&(m(),H(i.menuItems()))},styles:["[_nghost-%COMP%]{display:block}"]})};var J=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["x-circle"]],decls:3,vars:0,consts:[[1,"x-circle-btn","cursor-pointer","inline-flex","items-center","justify-center","p-2","rounded-full","transition-colors","duration-200","hover:bg-base-200","text-base-content"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"]],template:function(t,i){t&1&&(w(0,"div",0),I(),w(1,"svg",1),se(2,"path",2),F()())},styles:["[_nghost-%COMP%]{display:inline-flex}"]})};var ge=class n{menuItems=k.required();configurationService=r(X);isOpen(){return this.configurationService.sidebarItemsStatus()==="open"}close(){this.configurationService.toggleSidebarItemsStatus("closed")}handleEscape(e){e.key==="Escape"&&this.isOpen()&&this.close()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["sidebar-items"]],hostBindings:function(t,i){t&1&&v("keydown",function(c){return i.handleEscape(c)},ie)},inputs:{menuItems:[1,"menuItems"]},decls:5,vars:3,consts:[[1,"fixed","inset-0","bg-base-100","z-50","transform","transition-transform","duration-500","flex","flex-col","-translate-x-full"],[1,"flex","justify-end"],[1,"btn","btn-ghost",3,"click"],[3,"menuItems"]],template:function(t,i){t&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),v("click",function(){return i.configurationService.toggleSidebarItemsStatus("closed")}),P(3,"x-circle"),u()(),P(4,"menu-items",3),u()),t&2&&(B("translate-x-0",i.isOpen()),m(4),b("menuItems",i.menuItems()))},dependencies:[W,J],styles:["[_nghost-%COMP%]{display:block}"]})};var S=class n{loading=_(!1);success=_(!1);activateLoading(){this.loading.set(!0),this.success.set(!1)}deactivateLoading(){this.loading.set(!1)}activateSuccess(){this.loading.set(!1),this.success.set(!0),setTimeout(()=>this.success.set(!1),800)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"})};var E=`${h.baseUrl}/contacts`,Le={id:"new",title:"",phone:"",email:""},fe=class n{http=r(O);contactsCache=new Map;toastService=r(S);getAll(){return this.contactsCache.size?p(Array.from(this.contactsCache.values())):this.http.get(E).pipe(o(e=>e.forEach(t=>this.contactsCache.set(t.id,t))))}getById(e){return e==="new"?p(Le):this.contactsCache.has(e)?p(this.contactsCache.get(e)):this.http.get(`${E}/${e}`).pipe(o(t=>this.contactsCache.set(e,t)))}create(e){return this.toastService.activateLoading(),this.http.post(E,e).pipe(o(t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}update(e,t){return this.toastService.activateLoading(),this.http.patch(`${E}/${e}`,t).pipe(o(async i=>{this.insertOrUpdateCache(i),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}delete(e){return this.toastService.activateLoading(),this.http.delete(`${E}/${e}`).pipe(o(async()=>{this.contactsCache.delete(e),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.contactsCache.set(e.id,e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"})};var he=class n{activateRoute=r(le);router=r(z);currentPage=me(this.activateRoute.queryParamMap.pipe(te(e=>e.get("page")?+e.get("page"):1),te(e=>isNaN(e)?1:e)),{initialValue:1});setCurrentPage(e){this.router.navigate([],{queryParams:{page:e},queryParamsHandling:"merge"})}resetPage(){this.router.navigate([],{queryParams:{page:null},queryParamsHandling:"merge"})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"})};var T=`${h.baseUrl}/products`,Me={id:"new",title:"",price:0,description:"",slug:"",stock:0,isFeatured:!1,tags:[],deleteAt:null,images:[],imageIds:[],user:{}},Q=class n{constructor(){}http=r(O);productsCache=new Map;productCache=new Map;toastService=r(S);getProducts(e={}){let t=h.cantProducts,{limit:i=t,offset:a=0,isFeatured:c=!1}=e,x=c?"isFeatured":`${i}-${a}`;return this.productsCache.has(x)?p(this.productsCache.get(x)):this.http.get(T,{params:{limit:i,offset:a,isFeatured:c},responseType:"json"}).pipe(o(Se=>this.productsCache.set(x,Se)))}searchProducts(e={}){let{query:t="",limit:i=h.cantProducts,offset:a=0}=e;return this.http.get(`${T}/search`,{params:{query:t,limit:i,offset:a},responseType:"json"})}getProductByIdSlug(e){return e==="new"?p(Me):this.productCache.has(e)?p(this.productCache.get(e)):this.http.get(`${T}/${e}`,{responseType:"json"}).pipe(o(i=>this.productCache.set(e,i)))}createProduct(e){return this.toastService.activateLoading(),this.http.post(`${T}`,e).pipe(o(t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}updateProduct(e,t){return this.toastService.activateLoading(),this.http.patch(`${T}/${e}`,t).pipe(o(i=>{this.insertOrUpdateCache(i),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}deleteProduct(e){return this.toastService.activateLoading(),this.http.delete(`${T}/${e}`).pipe(o(()=>{this.productCache.delete(e),this.productsCache.clear(),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.productCache.get(e.id)?(this.productCache.set(e.id,e),this.productsCache.forEach(i=>{i.products=i.products.map(a=>a.id===e.id?e:a)})):(this.productCache.set(e.id,e),this.productsCache.clear())}static \u0275fac=function(t){return new(t||n)};static \u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"})};function kt(){let n=r(Q),e=_(null),t=_(!0),i=_(null);async function a(c){t.set(!0),i.set(null);try{let x=c.query?await ee(n.searchProducts(c)):await ee(n.getProducts(c));e.set(x)}catch{i.set("Error al cargar los productos")}finally{t.set(!1)}}return{productResponse:e,loading:t,error:i,loadProducts:a}}var j=()=>[],ke=()=>({page:1}),Y=n=>({page:n});function xe(n,e){if(n&1){let t=V();s(0,"button",14),v("click",function(){let a=D(t).$implicit,c=y();return N(c.goToPage(a))}),C(1),u()}if(n&2){let t=e.$implicit,i=y();B("btn-primary",t===i.activePage()),b("routerLink",L(5,j))("queryParams",R(6,Y,t)),m(),G(" ",t," ")}}function we(n,e){n&1&&(s(0,"button",8),C(1,"0"),u())}var ve=class n{pages=k(0);currentPage=k(1);activePage=pe(this.currentPage);totalPages=M(()=>Math.max(0,this.pages()??0));getPagesList=M(()=>{let e=this.totalPages();return e?Array.from({length:e},(t,i)=>i+1):[]});isFirstPage=M(()=>this.activePage()<=1);isLastPage=M(()=>this.activePage()>=this.totalPages()&&this.totalPages()>0);previousPage=M(()=>Math.max(1,this.activePage()-1));nextPage=M(()=>Math.min(this.totalPages(),this.activePage()+1));goToPage(e){if(!this.totalPages())return;let t=Math.min(Math.max(e,1),this.totalPages());this.activePage.set(t)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["pagination"]],inputs:{pages:[1,"pages"],currentPage:[1,"currentPage"]},decls:18,vars:24,consts:[[1,"join","flex","justify-center","items-center"],["type","button","aria-label","Primera p\xE1gina","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"click","disabled","routerLink","queryParams"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-4"],["fill-rule","evenodd","d","M10.72 11.47a.75.75 0 0 0 0 1.06l7.5 7.5a.75.75 0 1 0 1.06-1.06L12.31 12l6.97-6.97a.75.75 0 0 0-1.06-1.06l-7.5 7.5Z","clip-rule","evenodd"],["fill-rule","evenodd","d","M4.72 11.47a.75.75 0 0 0 0 1.06l7.5 7.5a.75.75 0 1 0 1.06-1.06L6.31 12l6.97-6.97a.75.75 0 0 0-1.06-1.06l-7.5 7.5Z","clip-rule","evenodd"],["type","button","aria-label","P\xE1gina anterior","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"click","disabled","routerLink","queryParams"],["fill-rule","evenodd","d","M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z","clip-rule","evenodd"],["type","button","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"btn-primary","routerLink","queryParams"],["type","button","disabled","",1,"join-item","btn"],["type","button","aria-label","P\xE1gina siguiente","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"click","disabled","routerLink","queryParams"],["fill-rule","evenodd","d","M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z","clip-rule","evenodd"],["type","button","aria-label","\xDAltima p\xE1gina","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"click","disabled","routerLink","queryParams"],["fill-rule","evenodd","d","M13.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L11.69 12 4.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z","clip-rule","evenodd"],["fill-rule","evenodd","d","M19.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06L17.69 12l-6.97-6.97a.75.75 0 0 1 1.06-1.06l7.5 7.5Z","clip-rule","evenodd"],["type","button","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"click","routerLink","queryParams"]],template:function(t,i){t&1&&(s(0,"div",0)(1,"button",1),v("click",function(){return i.goToPage(1)}),I(),s(2,"svg",2),P(3,"path",3)(4,"path",4),u()(),q(),s(5,"button",5),v("click",function(){return i.goToPage(i.previousPage())}),I(),s(6,"svg",2),P(7,"path",6),u()(),A(8,xe,2,8,"button",7,oe,!1,we,2,0,"button",8),q(),s(11,"button",9),v("click",function(){return i.goToPage(i.nextPage())}),I(),s(12,"svg",2),P(13,"path",10),u()(),q(),s(14,"button",11),v("click",function(){return i.goToPage(i.totalPages())}),I(),s(15,"svg",2),P(16,"path",12)(17,"path",13),u()()()),t&2&&(m(),b("disabled",i.isFirstPage()||!i.totalPages())("routerLink",L(13,j))("queryParams",L(14,ke)),m(4),b("disabled",i.isFirstPage()||!i.totalPages())("routerLink",L(15,j))("queryParams",R(16,Y,i.previousPage())),m(3),H(i.getPagesList()),m(3),b("disabled",i.isLastPage()||!i.totalPages())("routerLink",L(18,j))("queryParams",R(19,Y,i.nextPage())),m(3),b("disabled",i.isLastPage()||!i.totalPages())("routerLink",L(21,j))("queryParams",R(22,Y,i.totalPages()||1)))},dependencies:[Z],styles:["[_nghost-%COMP%]{display:block}"]})};var $=`${h.baseUrl}/recipes`,Oe={id:"new",title:"",text:""},be=class n{http=r(O);recipesCache=new Map;toastService=r(S);getAll(){return this.recipesCache.size?p(Array.from(this.recipesCache.values())):this.http.get($).pipe(o(e=>e.forEach(t=>this.recipesCache.set(t.id,t))))}getById(e){return e==="new"?p(Oe):this.recipesCache.has(e)?p(this.recipesCache.get(e)):this.http.get(`${$}/${e}`).pipe(o(t=>this.recipesCache.set(e,t)))}create(e){return this.toastService.activateLoading(),this.http.post($,e).pipe(o(async t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}update(e,t){return this.toastService.activateLoading(),this.http.patch(`${$}/${e}`,t).pipe(o(i=>{this.insertOrUpdateCache(i),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}delete(e){return this.toastService.activateLoading(),this.http.delete(`${$}/${e}`).pipe(o(async()=>{this.recipesCache.delete(e),this.toastService.activateSuccess()}),l(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.recipesCache.set(e.id,e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"})};var Te=h.baseUrl,Pe="assets/images/default-image.jpg",ye=class n{transform(e){if(!e||Array.isArray(e)&&e.length===0)return Pe;let t=Array.isArray(e)?e[0]:e,i=this.resolveImageValue(t);return i?i.startsWith("assets/")||/^https?:\/\//.test(i)?i:`${Te}/files/product/${i}`:Pe}resolveImageValue(e){return e?typeof e=="string"?e:e.secureUrl||e.url||e.path||e.fileName||e.filename||e.name||e.id||null:null}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=U({name:"productImage",type:n,pure:!0})};var Ce=class n{transform(e){return e==null?"0":"Gs. "+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=U({name:"guaranies",type:n,pure:!0})};export{de as a,W as b,J as c,ge as d,S as e,fe as f,he as g,Q as h,ye as i,Ce as j,kt as k,ve as l,be as m};
