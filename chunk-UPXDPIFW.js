import{a as xn,b as _n}from"./chunk-OJFKPZCT.js";import{a as yn,b as ke,c as Wt,d as Sn,e as wn,f as En,g as Zt,h as We,i as kn,j as Pn,k as Yt,l as Ze}from"./chunk-ANSRD63B.js";import{a as X}from"./chunk-I7QOAKR5.js";import{a as Mn}from"./chunk-ORG7AH5K.js";import{a as In,b as Bi,c as Kt,d as ve,e as Tn}from"./chunk-YTL7BEFZ.js";import{a as Gt}from"./chunk-Q3RP3Q74.js";import{b as jt,d as qt,e as $t,f as Ge,g as Ut,i as Qt,l as vn,m as bn,o as Cn,p as Ie}from"./chunk-KIYFELFV.js";import{$ as x,A as g,Aa as F,B as y,Ba as D,C as S,Ca as Li,D as he,Da as mn,E as Ee,F as ln,Fa as Nt,H as C,Ha as W,Ia as Ve,Ja as V,Ka as H,L as ze,La as Vt,M as je,Ma as $e,N as Ft,O as l,Pa as re,Qa as Ce,R as v,Ta as $,Ua as Ue,W as Ne,Wa as At,Xa as Lt,Za as Bt,_ as Dt,_a as Z,a as ge,aa as cn,b as we,ba as _,ca as te,cb as pn,d as tn,da as q,e as nn,ea as E,f as on,fa as I,g as j,ga as b,gb as un,ha as a,hb as Qe,i as ue,ia as r,ib as gn,j as Q,ja as f,jb as fn,k as rn,ka as m,kb as Ht,l as Pt,la as p,lb as hn,m as Tt,ma as N,mb as B,n as Mt,na as k,nb as K,o as He,oa as Rt,p as an,pa as h,q as sn,qa as qe,r as Re,ra as d,rb as zt,sa as ie,sb as lt,t as fe,ta as ne,u as se,ua as oe,ub as Y,va as Ai,x as Ot,xa as G,ya as dn,za as s}from"./chunk-6H3SXBKT.js";var Xt=class i{ngOnInit(){document.documentElement.setAttribute("data-theme","emerald");let e=document.querySelector(".theme-controller");e&&(e.checked=!0)}toggleTheme(e){let t=e.target,n=t.checked?"coffee":"emerald";document.documentElement.setAttribute("data-theme",n),t.blur()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["theme-controller"]],decls:6,vars:0,consts:[[1,"swap","swap-rotate"],["type","checkbox",3,"change"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"swap-off","h-6","w-6","fill-current"],["d","M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"swap-on","h-6","w-6","fill-current"],["d","M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"]],template:function(t,n){t&1&&(m(0,"label",0)(1,"input",1),qe("change",function(c){return n.toggleTheme(c)}),p(),he(),m(2,"svg",2),N(3,"path",3),p(),m(4,"svg",4),N(5,"path",5),p()())},styles:["[_nghost-%COMP%]{display:block}"]})};var ho=["mobileSearchToggle"],Jt=class i{mobileSearchToggle;authService=g(Y);configurationService=g(X);blurTarget(e){e?.currentTarget?.blur()}openUserOptions(e){this.blurTarget(e),this.authService.isAuthenticated()?this.configurationService.openSidebar("userOptions"):this.configurationService.openSidebar("auth")}openCart(e){this.blurTarget(e),this.configurationService.openSidebar("cartSidebar")}openMobileSearch(e){this.blurTarget(e);let t=this.mobileSearchToggle?.nativeElement;t&&(t.checked=!0,t.dispatchEvent(new Event("change",{bubbles:!0})))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["nav-user-options"]],viewQuery:function(t,n){if(t&1&&ie(ho,5),t&2){let o;ne(o=oe())&&(n.mobileSearchToggle=o.first)}},decls:16,vars:0,consts:[[1,"menu","menu-horizontal","px-1"],["aria-label","Buscar","role","button","aria-controls","mobile-search-toggle-end","for","mobile-search-toggle-end",1,"sm:hidden","p-2","rounded-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-6"],["fill-rule","evenodd","d","M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z","clip-rule","evenodd"],[1,"p-2","rounded-full",3,"click"],["d","M2.25 2.25a.75.75 0 0 0 0 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 0 0-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 0 0 0-1.5H5.378A2.25 2.25 0 0 1 7.5 15h11.218a.75.75 0 0 0 .674-.421 60.358 60.358 0 0 0 2.96-7.228.75.75 0 0 0-.525-.965A60.864 60.864 0 0 0 5.68 4.509l-.232-.867A1.875 1.875 0 0 0 3.636 2.25H2.25ZM3.75 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM16.5 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z"],["fill-rule","evenodd","d","M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z","clip-rule","evenodd"],[1,"p-2","rounded-full"]],template:function(t,n){t&1&&(a(0,"ul",0)(1,"li")(2,"label",1),h("click",function(c){return n.openMobileSearch(c)}),he(),a(3,"svg",2),f(4,"path",3),r()()(),Ee(),a(5,"li")(6,"label",4),h("click",function(c){return n.openCart(c)}),he(),a(7,"svg",2),f(8,"path",5),r()()(),Ee(),a(9,"li")(10,"label",4),h("click",function(c){return n.openUserOptions(c)}),he(),a(11,"svg",2),f(12,"path",6),r()()(),Ee(),a(13,"li")(14,"label",7),f(15,"theme-controller"),r()()())},dependencies:[Xt],styles:["[_nghost-%COMP%]{display:block}"]})};var On=[{label:"Inicio",routerLink:"/",adminOnly:!1},{label:"Productos",routerLink:"/products",adminOnly:!1},{label:"Recetas",routerLink:"/recipe",adminOnly:!1},{label:"Panel Administrativo",routerLink:"/admin",adminOnly:!0}];var vo=["searchInput"],bo=["suggestContainer"];function Co(i,e){if(i&1){let t=k();a(0,"span",6)(1,"x-circle",8),h("click",function(){y(t);let o=d();return S(o.clearSearch())}),r()()}}function xo(i,e){if(i&1){let t=k();a(0,"li",11),h("click",function(){let o=y(t).$implicit,c=d(2);return S(c.selectSuggestion(o))}),a(1,"span"),s(2),r(),a(3,"span",12),s(4),V(5,"guaranies"),r()()}if(i&2){let t=e.$implicit,n=e.$index,o=d(2);G("bg-primary/20",n===o.activeIndex)("text-primary",n===o.activeIndex),l(2),F(t.title),l(2),F(H(5,6,t.price))}}function _o(i,e){if(i&1){let t=k();a(0,"ul",7),E(1,xo,6,8,"li",9,te),a(3,"li",10),h("click",function(){y(t);let o=d();return S(o.performSearch(o.searchControl.value))}),s(4," Ver todos los resultados \u2192 "),r()()}if(i&2){let t=d();l(),I(t.suggestions)}}var ei=class i{router=g(B);productService=g(We);cdr=g(Ue);searchControl=new Ge("");suggestions=[];static nextInputId=0;inputId=`searchControl-${i.nextInputId++}`;suggestionCache=new Map;suppressSuggestions=!1;activeIndex=-1;searched=new Ne;dismissed=new Ne;searchInput;suggestContainer;constructor(){this.searchControl.valueChanges.pipe(se(()=>{this.suppressSuggestions=!1}),He(80),fe(e=>{let t=(e??"").trim();return t.length<1?(this.closeSuggestions(),j([])):this.fetchSuggestions(t)})).subscribe(e=>{this.suppressSuggestions||(this.suggestions=e,this.activeIndex=-1,this.cdr.markForCheck())}),this.router.events.pipe(Tt(e=>e instanceof Qe)).subscribe(e=>{(e.urlAfterRedirects==="/"||e.url==="/")&&(this.searchControl.setValue("",{emitEvent:!1}),this.closeSuggestions())})}onClickOutside(e){this.suggestContainer&&(this.suggestContainer.nativeElement.contains(e.target)||this.closeSuggestions())}closeSuggestions(){this.suppressSuggestions=!0,this.suggestions=[],this.activeIndex=-1,this.cdr.markForCheck()}onEscapePressed(){this.closeSuggestions(),this.dismissed.emit(),this.searchInput?.nativeElement?.blur()}clearSearch(){this.searchControl.setValue("",{emitEvent:!1}),this.closeSuggestions(),this.searchInput?.nativeElement?.focus()}onKeyDown(e){switch(e.key){case"ArrowDown":if(!this.suggestions.length)return;e.preventDefault(),this.activeIndex=(this.activeIndex+1)%this.suggestions.length;break;case"ArrowUp":if(!this.suggestions.length)return;e.preventDefault(),this.activeIndex=(this.activeIndex-1+this.suggestions.length)%this.suggestions.length;break;case"Enter":e.preventDefault(),this.activeIndex>=0?this.selectSuggestion(this.suggestions[this.activeIndex]):this.performSearch(this.searchControl.value??"");break}}onSubmit(e){e.preventDefault(),this.performSearch(this.searchControl.value??"")}performSearch(e){this.suppressSuggestions=!0,this.closeSuggestions(),this.router.navigate(["/products"],{queryParams:{q:e}}),this.searchControl.setValue("",{emitEvent:!1}),this.blurInput(),this.searched.emit()}selectSuggestion(e){this.suppressSuggestions=!0,this.closeSuggestions(),this.router.navigate(["/product",e.slug]),this.searchControl.setValue("",{emitEvent:!1}),this.searched.emit()}focusInput(){setTimeout(()=>this.searchInput?.nativeElement?.focus(),0)}hasSearchValue(){return!!(this.searchControl.value??"").length}onFocusInput(){let e=(this.searchControl.value??"").trim();e.length&&this.fetchSuggestions(e).pipe(an(1)).subscribe(t=>{this.suppressSuggestions||(this.suggestions=t,this.activeIndex=-1,this.cdr.markForCheck())})}blurInput(){this.searchInput?.nativeElement?.blur()}fetchSuggestions(e){let t=e.toLowerCase(),n=this.suggestionCache.get(t);return n?j(n):this.productService.searchProducts({query:e,limit:5}).pipe(Q(o=>o?.products??[]),se(o=>this.suggestionCache.set(t,o)))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["form-search"]],viewQuery:function(t,n){if(t&1&&(ie(vo,5),ie(bo,5)),t&2){let o;ne(o=oe())&&(n.searchInput=o.first),ne(o=oe())&&(n.suggestContainer=o.first)}},hostBindings:function(t,n){t&1&&h("click",function(c){return n.onClickOutside(c)},Ft)},outputs:{searched:"searched",dismissed:"dismissed"},decls:8,vars:4,consts:[["suggestContainer",""],["searchInput",""],[1,"relative","w-full","sm:min-w-[24rem]","lg:min-w-[32rem]","xl:min-w-[38rem]"],[1,"w-full",3,"submit"],[1,"input","w-full","focus-within:outline-none"],["type","text","placeholder","Buscar productos...","aria-label","Buscar productos",1,"grow","focus:outline-none","focus:ring-0",3,"keydown.escape","keydown","focus","formControl"],[1,"inline-flex"],[1,"absolute","top-full","left-0","right-0","bg-base-100","shadow-lg","rounded-lg","border","border-base-300","z-9999","p-2","flex","flex-col","gap-1"],[3,"click"],[1,"cursor-pointer","p-2","rounded-md","flex","justify-between",3,"bg-primary/20","text-primary"],[1,"text-center","text-sm","text-primary","cursor-pointer","hover:bg-base-200","p-2","rounded-md",3,"click"],[1,"cursor-pointer","p-2","rounded-md","flex","justify-between",3,"click"],[1,"opacity-70"]],template:function(t,n){if(t&1){let o=k();a(0,"div",2,0)(2,"form",3),h("submit",function(u){return y(o),S(n.onSubmit(u))}),a(3,"label",4)(4,"input",5,1),h("keydown.escape",function(){return y(o),S(n.onEscapePressed())})("keydown",function(u){return y(o),S(n.onKeyDown(u))})("focus",function(){return y(o),S(n.onFocusInput())}),r(),x(6,Co,2,0,"span",6),r()(),x(7,_o,5,0,"ul",7),r()}t&2&&(l(4),b("formControl",n.searchControl),Dt("id",n.inputId),l(2),_(n.hasSearchValue()?6:-1),l(),_(n.suggestions.length>0?7:-1))},dependencies:[Ie,Ut,jt,qt,$t,Qt,ke,ve],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, [_nghost-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:hover, [_nghost-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{-webkit-box-shadow:0 0 0 1000px transparent inset;box-shadow:0 0 0 1000px transparent inset;-webkit-text-fill-color:inherit;background-color:transparent!important}"]})};var Pe=class i{ingredients=C([]);queryIngredients=C([]);searchTextSegments=C([]);searchTextRaw=C("");results=C(null);setIngredients(e){this.ingredients.set(e)}setQueryIngredients(e){this.queryIngredients.set(e)}setSearchTextSegments(e){this.searchTextSegments.set(e)}setSearchTextRaw(e){this.searchTextRaw.set(e)}setResults(e){this.results.set(e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Ot({token:i,factory:i.\u0275fac,providedIn:"root"})};var yo=["searchInput"],So=["suggestContainer"];function wo(i,e){if(i&1){let t=k();a(0,"span",6)(1,"x-circle",8),h("click",function(){y(t);let o=d();return S(o.resetInput())}),r()()}}function Eo(i,e){i&1&&(a(0,"ul",7),f(1,"li",9),r())}function Io(i,e){if(i&1){let t=k();a(0,"li",11),h("click",function(){let o=y(t).$implicit,c=d(2);return S(c.selectSuggestion(o))}),a(1,"span",12),s(2),r()()}if(i&2){let t=e.$implicit,n=e.$index,o=d(2);G("suggestion--active",n===o.activeIndex()),l(2),F(t)}}function ko(i,e){if(i&1&&(a(0,"ul",7),E(1,Io,3,3,"li",10,q),r()),i&2){let t=d();l(),I(t.suggestions())}}var ti=class i{recipeService=g(Ze);cdr=g(Ue);destroyRef=g(ln);state=g(Pe);searchControl=new Ge("");static nextInputId=0;inputId=`ingredient-input-${i.nextInputId++}`;suggestions=C([]);suggestionPool=C([]);selectedIngredients=C([]);activeIndex=C(-1);loading=C(!1);suggestionsLoading=C(!1);results=C(null);resultsChange=new Ne;ingredientsChange=new Ne;submitted=new Ne;searchInput;suggestContainer;dropdownOpen=re(()=>this.suggestions().length>0);constructor(){Ce(()=>{let e=this.state.ingredients();this.selectedIngredients.set(e??[])}),this.recipeService.getAll().pipe(lt(this.destroyRef)).subscribe(e=>this.updateSuggestionPool(e)),this.searchControl.valueChanges.pipe(He(80),lt(this.destroyRef),fe(e=>this.buildSuggestions(e??""))).subscribe(e=>{this.suggestions.set(e),this.activeIndex.set(e.length?0:-1),this.cdr.markForCheck()})}onClickOutside(e){this.suggestContainer&&(this.suggestContainer.nativeElement.contains(e.target)||this.closeSuggestions())}onFocusInput(){let e=(this.searchControl.value??"").trim();this.buildSuggestions(e).pipe(lt(this.destroyRef)).subscribe(t=>{let n=this.suggestionPool().slice(0,8),o=t.length?t:n;this.suggestions.set(o),this.activeIndex.set(o.length?0:-1),this.cdr.markForCheck()})}onKeyDown(e){if(this.suggestions().length)switch(e.key){case"ArrowDown":e.preventDefault(),this.activeIndex.update(t=>(t+1)%this.suggestions().length);break;case"ArrowUp":e.preventDefault(),this.activeIndex.update(t=>(t-1+this.suggestions().length)%this.suggestions().length);break;case"Enter":e.preventDefault(),this.activeIndex()>=0?this.addIngredient(this.suggestions()[this.activeIndex()]):this.commitFreeText();break}}onSubmit(e){e.preventDefault(),this.commitFreeText()}addIngredient(e,t){let n=(e??"").trim();if(!n)return;let o=this.selectedIngredients();if(o.some(c=>c.toLowerCase()===n.toLowerCase())){this.resetInput(),this.closeSuggestions();return}this.selectedIngredients.set([...o,n]),this.state.setIngredients(this.selectedIngredients()),t?.suppressReset||this.resetInput(),t?.suppressClose||this.closeSuggestions(),t?.suppressEmit||this.submitted.emit(),t?.skipFetch||this.fetchRecipes()}removeIngredient(e){this.selectedIngredients.set(this.selectedIngredients().filter(t=>t!==e)),this.state.setIngredients(this.selectedIngredients()),this.fetchRecipes()}selectSuggestion(e){this.addIngredient(e)}closeSuggestions(){this.suggestions.set([]),this.activeIndex.set(-1),this.cdr.markForCheck()}hasValue(){return!!(this.searchControl.value??"").length}onEscapePressed(){this.closeSuggestions(),this.searchInput?.nativeElement?.blur()}commitFreeText(){let e=(this.searchControl.value??"").trim();e&&this.addIngredientsFromCommaSeparated(e)}async addIngredientsFromCommaSeparated(e){let t=e.trim();if(!t)return;this.state.setSearchTextRaw(t);let n=t.split(",").map(P=>P.trim()).filter(P=>P.length>0);if(!n.length)return;this.state.setSearchTextSegments(n);let o=new Set;for(let P of n)try{(await ue(this.recipeService.searchIngredients(P,{limit:5}))).forEach(A=>{A&&o.add(A)})}catch{}let c=o.size>0,u=[...this.selectedIngredients()],w=new Set(u.map(P=>P.trim().toLowerCase()));if(c){let P=[];Array.from(o).forEach(L=>{let A=L.trim().toLowerCase();w.has(A)||(w.add(A),P.push(L))}),P.length&&this.selectedIngredients.set([...u,...P])}let R=c?void 0:n;this.resetInput(),this.closeSuggestions(),this.submitted.emit(),c?this.fetchRecipes():R?.length&&this.fetchRecipes(R,{updateState:!1})}resetInput(){this.searchControl.setValue("",{emitEvent:!1})}buildSuggestions(e){let t=e.trim();if(!t)return this.suggestionsLoading.set(!1),this.suggestionPool().length?j(this.suggestionPool().slice(0,8)):this.recipeService.getAll().pipe(se(c=>this.updateSuggestionPool(c)),Q(()=>this.suggestionPool().slice(0,8)));let n=this.suggestionPool().filter(c=>c.toLowerCase().includes(t.toLowerCase())).slice(0,8);if(n.length)return this.suggestionsLoading.set(!1),j(n);this.suggestionsLoading.set(!0);let o=[...this.selectedIngredients(),t];return this.recipeService.searchByIngredients(o,{limit:5,offset:0}).pipe(Re(()=>this.suggestionsLoading.set(!1)),se(c=>this.updateSuggestionPool(c)),Q(()=>this.suggestionPool().filter(u=>u.toLowerCase().includes(t.toLowerCase())).slice(0,8)))}fetchRecipes(e,t){let n=e??this.selectedIngredients();if(!n.length){this.results.set(null),this.resultsChange.emit({count:0,pages:0,recipes:[]}),this.ingredientsChange.emit([]),(t?.updateState??!0)&&this.state.setIngredients([]),this.state.setResults(null),this.state.setQueryIngredients([]),this.state.setSearchTextSegments([]),this.state.setSearchTextRaw("");return}this.ingredientsChange.emit(n),(t?.updateState??!0)&&this.state.setIngredients(n),this.state.setQueryIngredients(n),this.loading.set(!0),this.recipeService.searchByIngredients(n,{limit:10,offset:0}).pipe(lt(this.destroyRef)).subscribe({next:o=>{this.results.set(o),this.state.setResults(o),this.updateSuggestionPool(o),this.resultsChange.emit(o)},error:()=>{this.results.set(null),this.state.setResults(null)},complete:()=>{this.loading.set(!1),this.cdr.markForCheck()}})}updateSuggestionPool(e){let t=new Set(this.suggestionPool());(Array.isArray(e)?e:e.recipes??[]).forEach(o=>{let c=!1;o.recipeIngredients?.forEach(u=>{let w=u?.ingredient?.name?.trim();w&&(t.add(w),c=!0)}),!c&&o.title&&t.add(o.title.trim())}),this.suggestionPool.set(Array.from(t))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["ingredient-search"]],viewQuery:function(t,n){if(t&1&&(ie(yo,5),ie(So,5)),t&2){let o;ne(o=oe())&&(n.searchInput=o.first),ne(o=oe())&&(n.suggestContainer=o.first)}},hostBindings:function(t,n){t&1&&h("click",function(c){return n.onClickOutside(c)},Ft)},outputs:{resultsChange:"resultsChange",ingredientsChange:"ingredientsChange",submitted:"submitted"},decls:9,vars:4,consts:[["suggestContainer",""],["searchInput",""],[1,"relative","w-full","sm:min-w-[24rem]","lg:min-w-lg","xl:min-w-152"],[1,"w-full",3,"submit"],[1,"input","w-full","flex","items-center","gap-2","focus-within:outline-none"],["type","text","placeholder","Escribe tus ingredientes o una receta que desees realizar...","aria-label","Buscar por ingredientes",1,"grow","focus:outline-none","focus:ring-0","min-w-32",3,"keydown.escape","keydown","focus","formControl"],[1,"inline-flex"],[1,"absolute","top-full","left-0","right-0","bg-base-100","shadow-lg","rounded-lg","border","border-base-300","z-50","p-2","flex","flex-col","gap-1"],[3,"click"],[1,"h-7","rounded-md","skeletor-line"],[1,"suggestion",3,"suggestion--active"],[1,"suggestion",3,"click"],[1,"truncate"]],template:function(t,n){if(t&1){let o=k();a(0,"div",2,0)(2,"form",3),h("submit",function(u){return y(o),S(n.onSubmit(u))}),a(3,"label",4)(4,"input",5,1),h("keydown.escape",function(){return y(o),S(n.onEscapePressed())})("keydown",function(u){return y(o),S(n.onKeyDown(u))})("focus",function(){return y(o),S(n.onFocusInput())}),r(),x(6,wo,2,0,"span",6),r()(),x(7,Eo,2,0,"ul",7)(8,ko,3,0,"ul",7),r()}t&2&&(l(4),b("formControl",n.searchControl),Dt("id",n.inputId),l(2),_(n.hasValue()?6:-1),l(),_(n.suggestionsLoading()&&!n.suggestions().length?7:n.suggestions().length>0?8:-1))},dependencies:[Z,Ie,Ut,jt,qt,$t,Qt,ke],styles:["[_nghost-%COMP%]{display:block}.suggestion[_ngcontent-%COMP%]{cursor:pointer;padding:.5rem .6rem;border-radius:.5rem;display:flex;justify-content:space-between;gap:.5rem;color:hsl(var(--bc))}.suggestion[_ngcontent-%COMP%]:hover{background:hsl(var(--b2))}.suggestion--active[_ngcontent-%COMP%]{background:hsl(var(--b3) / .5);color:hsl(var(--bc))}"]})};var Po=["mobileSearch"],To=["mobileIngredientSearch"],Mo=["mobileSearchToggle"];function Oo(i,e){if(i&1){let t=k();a(0,"ingredient-search",17),h("submitted",function(){y(t);let o=d();return S(o.onSearchSubmitted())}),r()}}function Fo(i,e){if(i&1){let t=k();a(0,"form-search",18),h("searched",function(){y(t);let o=d();return S(o.onSearchSubmitted())})("dismissed",function(){y(t);let o=d();return S(o.onSearchDismissed())}),r()}}function Do(i,e){if(i&1){let t=k();a(0,"ingredient-search",17,1),h("submitted",function(){y(t);let o=d();return S(o.onSearchSubmitted())}),r()}}function Ro(i,e){if(i&1){let t=k();a(0,"form-search",18,2),h("searched",function(){y(t);let o=d();return S(o.onSearchSubmitted())})("dismissed",function(){y(t);let o=d();return S(o.onSearchDismissed())}),r()}}var ii=class i{configurationService=g(X);router=g(B);menuItems=On;isRecipePage=C(this.router.url?.startsWith("/recipe")??!1);mobileSearch;mobileIngredientSearch;mobileSearchToggle;constructor(){this.updateRouteState(this.router.url),this.router.events.pipe(Tt(e=>e instanceof Qe)).subscribe(e=>this.updateRouteState(e.urlAfterRedirects||e.url))}updateRouteState(e){let t=e||"";this.isRecipePage.set(t.startsWith("/recipe"))}openSidebarItems(e){this.configurationService.toggleSidebarItemsStatus("open"),e.currentTarget?.blur()}onMobileToggleEnd(e){let t=e.target;t&&t.checked&&setTimeout(()=>{this.isRecipePage()?this.mobileIngredientSearch?.searchInput?.nativeElement?.focus():this.mobileSearch?.focusInput()},0)}closeMobileSearchOverlay(){let e=this.mobileSearchToggle?.nativeElement;e&&e.checked&&(e.checked=!1,e.dispatchEvent(new Event("change",{bubbles:!0})))}onSearchSubmitted(){this.closeMobileSearchOverlay()}onSearchDismissed(){this.closeMobileSearchOverlay()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["navbar"]],viewQuery:function(t,n){if(t&1&&(ie(Po,5),ie(To,5),ie(Mo,5)),t&2){let o;ne(o=oe())&&(n.mobileSearch=o.first),ne(o=oe())&&(n.mobileIngredientSearch=o.first),ne(o=oe())&&(n.mobileSearchToggle=o.first)}},decls:20,vars:3,consts:[["mobileSearchToggle",""],["mobileIngredientSearch",""],["mobileSearch",""],[1,"navbar","bg-base-100"],[1,"navbar-start"],["aria-label","Abrir men\xFA",1,"btn","btn-ghost","lg:hidden",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h8m-8 6h16"],[1,"lg:mx-3"],[3,"menuItems"],[1,"navbar-center","hidden","sm:flex"],[1,"navbar-end"],[1,"sm:hidden"],["id","mobile-search-toggle-end","type","checkbox",1,"peer","hidden",3,"change"],["for","mobile-search-toggle-end",1,"fixed","inset-0","bg-black/40","z-40","opacity-0","pointer-events-none","peer-checked:opacity-100","peer-checked:pointer-events-auto"],[1,"fixed","top-0","inset-x-0","z-50","bg-base-100","shadow-md","-translate-y-full","transition-transform","duration-200","peer-checked:translate-y-0"],[1,"p-4"],[3,"submitted"],[3,"searched","dismissed"]],template:function(t,n){if(t&1){let o=k();a(0,"div",3)(1,"div",4)(2,"button",5),h("click",function(u){return y(o),S(n.openSidebarItems(u))}),he(),a(3,"svg",6),f(4,"path",7),r()(),Ee(),f(5,"app-logo",8)(6,"sidebar-items",9),r(),a(7,"div",10),x(8,Oo,1,0,"ingredient-search")(9,Fo,1,0,"form-search"),r(),a(10,"div",11),f(11,"nav-user-options"),r()(),a(12,"div",12)(13,"input",13,0),h("change",function(u){return y(o),S(n.onMobileToggleEnd(u))}),r(),f(15,"label",14),a(16,"div",15)(17,"div",16),x(18,Do,2,0,"ingredient-search")(19,Ro,2,0,"form-search"),r()()()}t&2&&(l(6),b("menuItems",n.menuItems),l(2),_(n.isRecipePage()?8:9),l(10),_(n.isRecipePage()?18:19))},dependencies:[yn,Jt,Ie,wn,ei,ti],styles:["[_nghost-%COMP%]{display:block}"]})};var ni=class i{authService=g(Y);router=g(B);configurationService=g(X);isMobile=!1;onResize(){this.isMobile=window.innerWidth<1024}ngOnInit(){this.onResize()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["front-menu"]],hostBindings:function(t,n){t&1&&h("resize",function(){return n.onResize()},je)},decls:1,vars:0,template:function(t,n){t&1&&f(0,"navbar")},dependencies:[ii],styles:["[_nghost-%COMP%]{display:block}"]})};var oi=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-footer"]],decls:11,vars:0,consts:[[1,"footer","footer-center","p-10","bg-base-200","text-base-content"],[1,"grid","grid-flow-col","gap-4"],[1,"flex","flex-col","sm:flex-row","gap-4"],["routerLink","/privacy-policies",1,"link","link-hover"],["routerLink","/terms-conditions",1,"link","link-hover"],["routerLink","/contact",1,"link","link-hover"]],template:function(t,n){t&1&&(a(0,"footer",0)(1,"nav",1)(2,"p"),s(3,"\xA9 2025 Gluten Free \u2014 Todos los derechos reservados"),r()(),a(4,"aside",2)(5,"a",3),s(6," Pol\xEDtica de Privacidad "),r(),a(7,"a",4),s(8," T\xE9rminos y Condiciones "),r(),a(9,"a",5),s(10," Contacto "),r()()())},dependencies:[K],styles:["[_nghost-%COMP%]{display:block}"]})};function No(i,e){if(i&1){let t=k();m(0,"a",2),qe("click",function(){y(t);let o=d().$implicit,c=d();return S(c.handleOnClick(o.routerLink,o))}),s(1),p()}if(i&2){let t=d().$implicit;l(),D(" ",t.label," ")}}function Vo(i,e){if(i&1&&x(0,No,2,1,"a",1),i&2){let t=e.$implicit,n=d();_(!t.adminOnly||n.authService.isAdmin()?0:-1)}}var ri=class i{menuItems=$.required();interceptor=$(void 0);authService=g(Y);configurationService=g(X);router=g(B);handleOnClick(e,t){let n=this.interceptor();n&&n(t)||(this.configurationService.toggleSidebarItemsStatus("closed"),this.configurationService.toggleSidebarPageStatus("closed"),typeof e=="string"?this.router.navigateByUrl(e):this.router.navigate([e]))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["menu-items"]],inputs:{menuItems:[1,"menuItems"],interceptor:[1,"interceptor"]},decls:3,vars:0,consts:[[1,"flex","flex-col","gap-2","px-4"],[1,"p-2","cursor-pointer","rounded-md","text-base-content","hover:bg-base-200","hover:text-base-content","transition-colors","duration-200"],[1,"p-2","cursor-pointer","rounded-md","text-base-content","hover:bg-base-200","hover:text-base-content","transition-colors","duration-200",3,"click"]],template:function(t,n){t&1&&(m(0,"nav",0),E(1,Vo,1,1,null,null,te),p()),t&2&&(l(),I(n.menuItems()))},styles:["[_nghost-%COMP%]{display:block}"]})};var ai=class i{authService=g(Y);configurationService=g(X);menuItems=[{label:"Mi perfil",routerLink:"/user/profile"},{label:"Mis direcciones",routerLink:"/user/directions"},{label:"Mis datos de facturaci\xF3n",routerLink:"/user/billing"},{label:"Mis pedidos",routerLink:"/user/orders"},{label:"Panel administrativo",routerLink:"/admin",adminOnly:!0}];static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["user-sidebar-options"]],decls:6,vars:1,consts:[[1,"sidebar-options"],[3,"menuItems"],[1,"logout-block"],[1,"divider","my-2"],[1,"btn","btn-ghost","w-full","justify-center","text-error","hover:bg-base-200",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0),f(1,"menu-items",1),a(2,"div",2),f(3,"div",3),a(4,"button",4),h("click",function(){return[n.authService.logout(),n.configurationService.toggleSidebarPageStatus("closed")]}),s(5," Cerrar sesion "),r()()()),t&2&&(l(),b("menuItems",n.menuItems))},dependencies:[ri],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.sidebar-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.logout-block[_ngcontent-%COMP%]{margin-top:auto;padding-inline:1rem;padding-bottom:.75rem}"]})};var Ke=`${zt.baseUrl}/cart`,le=class i{http=g(pn);toast=g(Gt);auth=g(Y);cartCache=new Map;cartSubject=new tn([]);cart$=this.cartSubject.asObservable();constructor(){this.loadCart().subscribe();let e=this.auth.authStatus();Ce(()=>{let t=this.auth.authStatus();t==="authenticated"&&e!==t&&this.loadCart(!0).subscribe(),e=t})}loadCart(e=!1){if(!e&&this.cartCache.size>0){let t=Array.from(this.cartCache.values());return this.cartSubject.next(t),j(t)}if(this.auth.isAuthenticated()){let t=this.getCartFromLocalStorage(),n=t.length>0,o=this.http.get(Ke).pipe(Q(c=>this.normalizeCartItems(c)),se(c=>this.updateCacheAndEmit(c)));return n?this.syncGuestCartToServer(t).pipe(fe(()=>o)):o}else return j(this.getCartFromLocalStorage()).pipe(Q(t=>this.normalizeCartItems(t)),se(t=>this.updateCacheAndEmit(t)))}addItem(e,t=1,n){let o=n?.showToast??!0,c=this.normalizeItem({id:e.id,product:e,productId:e.id,quantity:t},e,t);if(this.auth.isAuthenticated())return this.updateCacheAndEmit([...this.cartSubject.value,c]),o&&this.toast.activateLoading(),this.http.post(`${Ke}/items`,{productId:e.id,quantity:t}).pipe(se(()=>{this.loadCart(!0).subscribe(),o&&this.toast.activateSuccess()}),Re(()=>o&&this.toast.deactivateLoading()));{let u=this.getCartFromLocalStorage(),w=u.find(R=>R.productId===e.id);return w?w.quantity+=t:u.push(c),this.saveCartToLocalStorage(u),this.updateCacheAndEmit(u),j(c)}}updateItem(e,t){if(this.auth.isAuthenticated())return this.toast.activateLoading(),this.http.patch(`${Ke}/items/${e}`,{quantity:t}).pipe(se(n=>{let o=this.normalizeItem(n,this.cartCache.get(e)?.product,t);this.cartCache.set(n.id,o),this.updateCacheAndEmit(Array.from(this.cartCache.values())),this.loadCart(!0).subscribe(),this.toast.activateSuccess()}),Re(()=>this.toast.deactivateLoading()));{let n=this.getCartFromLocalStorage().map(o=>o.id===e?we(ge({},o),{quantity:t}):o);return this.saveCartToLocalStorage(n),this.updateCacheAndEmit(n),j()}}removeItem(e){if(this.auth.isAuthenticated())return this.toast.activateLoading(),this.cartCache.delete(e),this.updateCacheAndEmit(Array.from(this.cartCache.values())),this.http.delete(`${Ke}/items/${e}`).pipe(se(()=>{this.loadCart(!0).subscribe(),this.toast.activateSuccess()}),Re(()=>this.toast.deactivateLoading()));{let t=this.getCartFromLocalStorage().filter(n=>n.id!==e);return this.saveCartToLocalStorage(t),this.updateCacheAndEmit(t),j()}}getTotal(){return this.cartSubject.getValue().reduce((t,n)=>t+(n.product?.price??0)*n.quantity,0)}clearCart(e){let t=e?.delayMs??0,n=()=>{this.resetCart(),this.auth.isAuthenticated()||localStorage.removeItem("guestCart")};return t>0?setTimeout(n,t):n(),this.auth.isAuthenticated()?this.http.delete(Ke).pipe(se(()=>{}),Re(()=>{})):j()}getCartFromLocalStorage(){let e=localStorage.getItem("guestCart");return e?JSON.parse(e):[]}saveCartToLocalStorage(e){localStorage.setItem("guestCart",JSON.stringify(e))}updateCacheAndEmit(e){let t=this.normalizeCartItems(e);this.cartCache.clear(),t.forEach(n=>this.cartCache.set(n.id,n)),this.cartSubject.next(t)}normalizeCartItems(e){let t=(()=>{if(!e)return[];if(Array.isArray(e))return e;let n=e,o=["items","cartItems","data","cart","results"];for(let c of o){let u=n[c];if(Array.isArray(u))return u}return[]})();return Array.isArray(t)?t.map(n=>{let o=this.cartCache.get(n.id);return this.normalizeItem(n,o?.product,o?.quantity)}):[]}normalizeItem(e,t,n){let o=e?.product??t,c=e?.productId??o?.id??e?.id??"",u=e?.quantity??n??1,w=o?.price??e?.unitPrice??e?.price??(typeof t?.price=="number"?t.price:0),R=typeof w=="number"?w:Number(w)||0;return we(ge({},e),{productId:c,product:o?we(ge({},o),{price:R}):void 0,quantity:typeof u=="number"?u:Number(u)||1})}resetCart(){this.cartCache.clear(),this.cartSubject.next([])}syncGuestCartToServer(e){let t=e.map(n=>{let o=n.productId||n.id,c=n.quantity||1;return o?this.http.post(`${Ke}/items`,{productId:o,quantity:c}):null}).filter(n=>!!n);return t.length?Pt(t).pipe(se(()=>localStorage.removeItem("guestCart"))):(localStorage.removeItem("guestCart"),j(null))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Ot({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ao=()=>[],Lo=i=>["/product",i],Bo=(i,e)=>e.id;function Ho(i,e){if(i&1){let t=k();a(0,"div",1)(1,"figure",2),f(2,"img",3),V(3,"productImage"),r(),a(4,"div",4)(5,"div",5)(6,"div",6)(7,"button",7),h("click",function(){let o=y(t).$implicit,c=d();return S(c.startRemove(o))}),he(),a(8,"svg",8),f(9,"path",9),r()()(),Ee(),a(10,"h2",10),s(11),V(12,"slice"),r(),a(13,"p",11),s(14),V(15,"slice"),r()(),a(16,"div",12)(17,"p",13),s(18),V(19,"guaranies"),r(),a(20,"div",14)(21,"div",15)(22,"button",16),h("click",function(){let o=y(t).$implicit,c=d();return S(c.decreaseQuantity(o))}),s(23," - "),r(),a(24,"input",17),h("input",function(o){let c=y(t).$implicit,u=d();return S(u.onQuantityInput(o,c))}),r(),a(25,"button",16),h("click",function(){let o=y(t).$implicit,c=d();return S(c.increaseQuantity(o))}),s(26," + "),r()()()()()()}if(i&2){let t=e.$implicit,n=d();G("min-h-[14rem]",n.variant()==="page")("min-h-[11rem]",n.variant()==="sidebar")("cart-item-removing",n.isRemoving(t.id)||n.clearing()),l(2),b("alt",Nt(t.product==null?null:t.product.title))("src",Vt(3,18,(t.product==null?null:t.product.images)??W(31,Ao),"small"),ze),l(8),G("line-clamp-2",n.variant()==="sidebar"),b("routerLink",Ve(32,Lo,t.productId)),l(),D(" ",n.variant()==="sidebar"?$e(12,21,t.product==null?null:t.product.title,0,70):t.product==null?null:t.product.title," "),l(2),G("line-clamp-3",n.variant()==="sidebar"),l(),D(" ",n.variant()==="sidebar"?$e(15,25,t.product==null?null:t.product.description,0,100):t.product==null?null:t.product.description," "),l(4),D(" ",H(19,29,(t.product==null?null:t.product.price)*t.quantity)," "),l(6),b("value",t.quantity)}}var Ye=class i{cartItems=$.required();clearing=$(!1);variant=$("page");cartService=g(le);removingIds=new Set;animationDelay=250;isRemoving(e){return this.removingIds.has(e)}startRemove(e){this.removingIds.has(e.id)||(this.removingIds.add(e.id),setTimeout(()=>{this.cartService.removeItem(e.id).subscribe({next:()=>this.removingIds.delete(e.id),error:()=>this.removingIds.delete(e.id),complete:()=>this.removingIds.delete(e.id)})},this.animationDelay))}increaseQuantity(e){this.cartService.updateItem(e.id,e.quantity+1).subscribe()}decreaseQuantity(e){e.quantity>1&&this.cartService.updateItem(e.id,e.quantity-1).subscribe()}onQuantityInput(e,t){let n=e.target;if(!n)return;let o=parseInt(n.value,10);(isNaN(o)||o<1)&&(o=1),this.cartService.updateItem(t.id,o).subscribe()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["cart-items"]],inputs:{cartItems:[1,"cartItems"],clearing:[1,"clearing"],variant:[1,"variant"]},decls:2,vars:0,consts:[[1,"relative","flex","bg-base-100","shadow-sm","rounded-lg","mb-4","min-h-40","w-full","overflow-hidden","cart-item-card",3,"min-h-[14rem]","min-h-[11rem]","cart-item-removing"],[1,"relative","flex","bg-base-100","shadow-sm","rounded-lg","mb-4","min-h-40","w-full","overflow-hidden","cart-item-card"],[1,"w-28","md:w-32","h-full","shrink-0"],[1,"w-full","h-full","object-cover","rounded-l-lg",3,"src","alt"],[1,"flex-1","p-3","flex","flex-col","justify-between"],[1,"relative","pr-6"],[1,"absolute","top-0","right-0"],[1,"cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"h-4","w-4"],["fill-rule","evenodd","d","M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z","clip-rule","evenodd"],[1,"card-title","cursor-pointer","min-h-10","sm:min-h-12","md:min-h-14","text-sm","sm:text-base","md:text-lg",3,"routerLink"],[1,"min-h-12","sm:min-h-16","md:min-h-18","text-xs","sm:text-sm","md:text-base","text-base-content/70","mt-1"],[1,"flex","justify-between","items-center","mt-2"],[1,"font-bold","text-base"],[1,"flex","items-center","space-x-2"],[1,"inline-flex","items-center","border","border-base-200","bg-base-200/60","rounded-md","overflow-hidden"],["type","button",1,"w-9","h-9","flex","items-center","justify-center","text-lg","font-semibold","text-base-content","hover:bg-base-300/80","active:bg-base-300","focus:outline-none","cursor-pointer",3,"click"],["type","number","min","1",1,"w-10","h-9","text-center","bg-base-100/90","text-sm","font-semibold","text-base-content","border-none","focus:outline-none",3,"input","value"]],template:function(t,n){t&1&&E(0,Ho,27,34,"div",0,Bo),t&2&&I(n.cartItems())},dependencies:[K,Kt,Bt,ve],styles:["[_nghost-%COMP%]{display:block}.cart-item-card[_ngcontent-%COMP%]{transition:opacity .25s ease,transform .25s ease,filter .25s ease}.cart-item-removing[_ngcontent-%COMP%]{opacity:0;transform:translateY(12px);filter:blur(2px)}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}"]})};function zo(i,e){if(i&1&&(a(0,"div",1),f(1,"cart-items",4),V(2,"async"),r()),i&2){let t=d();l(),b("cartItems",H(2,2,t.cartItems$))("clearing",t.clearing())}}function jo(i,e){i&1&&(a(0,"div",2),s(1," Tu carrito est\xE1 vac\xEDo "),r())}function qo(i,e){if(i&1){let t=k();a(0,"div",3)(1,"div",5),s(2),V(3,"async"),V(4,"guaranies"),r(),a(5,"div",6)(6,"button",7),h("click",function(){y(t);let o=d();return S(o.clearCart())}),s(7," Vaciar carrito "),r(),a(8,"button",8),h("click",function(){y(t);let o=d();return S(o.goToCart())}),s(9," Ir al carrito "),r()()()}if(i&2){let t=d();l(2),D(" Total: ",H(4,3,H(3,1,t.total$))," ")}}var si=class i{cartService=g(le);configurationService=g(X);router=g(B);cartItems$=this.cartService.cart$;clearing=C(!1);total$=this.cartItems$.pipe(Q(e=>e.reduce((t,n)=>t+(n.product?.price??0)*n.quantity,0)));clearCart(){this.clearing.set(!0);let e=250;this.cartService.clearCart({delayMs:e}).subscribe({complete:()=>setTimeout(()=>this.clearing.set(!1),e)})}goToCart(){this.configurationService.closeSidebar(),this.router.navigateByUrl("/cart")}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["cart-sidebar"]],decls:6,vars:8,consts:[[1,"flex","flex-col","h-full"],[1,"flex-1","overflow-y-auto","pr-3","max-h-[calc(100vh-180px)]"],[1,"flex-1","flex","items-center","justify-center","text-gray-500","min-h-[50vh]"],[1,"navbar","cart-bar","bg-base-100","border-t","border-base-300","fixed","bottom-0","left-0","right-0","px-6","justify-between"],["variant","sidebar",3,"cartItems","clearing"],[1,"text-lg","font-semibold"],[1,"flex","items-center","gap-2","ml-auto"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"btn","btn-primary","btn-sm",3,"click"]],template:function(t,n){if(t&1&&(a(0,"div",0),x(1,zo,3,4,"div",1),V(2,"async"),cn(3,jo,2,0,"div",2),r(),x(4,qo,10,5,"div",3),V(5,"async")),t&2){let o,c;G("clearing",n.clearing()),l(),_(((o=H(2,4,n.cartItems$))==null?null:o.length)>0?1:3),l(3),_(((c=H(5,6,n.cartItems$))==null?null:c.length)>0?4:-1)}},dependencies:[Z,Ye,Lt,ve],encapsulation:2})};function $o(i,e){i&1&&f(0,"user-sidebar-options")}function Uo(i,e){i&1&&f(0,"login")}function Qo(i,e){i&1&&f(0,"app-register")}function Go(i,e){i&1&&f(0,"cart-sidebar")}function Wo(i,e){i&1&&(a(0,"p",6),s(1,"Selecciona una opci\xF3n"),r())}var li=class i{authService=g(Y);configurationService=g(X);open=this.configurationService.sidebarPageStatus;routeName=this.configurationService.sidebarPageRouteName;getTitle=re(()=>{switch(this.routeName()){case"auth":return"Iniciar sesi\xF3n";case"register":return"Crear cuenta";case"userOptions":return"Hola, "+(this.authService.user()?.fullName??"");case"cartSidebar":return"Mi carrito";default:return""}});close(){this.configurationService.closeSidebar()}handleEscape(e){e.key==="Escape"&&this.open()==="open"&&this.close()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["sidebar-page"]],hostBindings:function(t,n){t&1&&h("keydown",function(c){return n.handleEscape(c)},je)},decls:13,vars:12,consts:[[1,"fixed","inset-0","bg-black/50","z-40","transition-opacity","duration-300","opacity-0","pointer-events-none",3,"click"],[1,"fixed","top-0","right-0","h-full","w-full","sm:w-[480px]","bg-base-100","shadow-lg","z-50","transform","transition-transform","duration-300","translate-x-full"],[1,"flex","justify-between","items-center","p-4","border-b","border-base-300"],[1,"text-lg","font-bold"],[1,"pr-2",3,"click"],[1,"p-4","overflow-y-auto","h-[calc(100%-4rem)]"],[1,"text-center","text-gray-500"]],template:function(t,n){if(t&1&&(a(0,"div",0),h("click",function(){return n.close()}),r(),a(1,"div",1)(2,"div",2)(3,"h2",3),s(4),r(),a(5,"button",4),h("click",function(){return n.close()}),f(6,"x-circle"),r()(),a(7,"div",5),x(8,$o,1,0,"user-sidebar-options")(9,Uo,1,0,"login")(10,Qo,1,0,"app-register")(11,Go,1,0,"cart-sidebar")(12,Wo,2,0,"p",6),r()()),t&2){let o;G("opacity-0",n.open()==="closed")("opacity-100",n.open()==="open")("pointer-events-none",n.open()==="closed"),l(),G("translate-x-0",n.open()==="open")("translate-x-full",n.open()==="closed"),l(3),D(" ",n.getTitle()," "),l(4),_((o=n.routeName())==="userOptions"?8:o==="auth"?9:o==="register"?10:o==="cartSidebar"?11:12)}},dependencies:[Z,ai,xn,_n,si,ke],styles:["[_nghost-%COMP%]{display:block}"]})};function Zo(i,e){i&1&&f(0,"toast",3)}var ci=class i{configurationService=g(X);router=g(B);toastService=g(Gt);showToast=C(!0);routerEventsSubscription;constructor(){this.configurationService.toggleSidebarItemsStatus("closed"),this.updateToastVisibility(this.router.url),this.routerEventsSubscription=this.router.events.subscribe(e=>{e instanceof un&&(this.showToast.set(!0),this.toastService.activateLoading()),e instanceof Qe&&(this.toastService.deactivateLoading(),this.updateToastVisibility(e.urlAfterRedirects||e.url)),(e instanceof gn||e instanceof fn)&&(this.toastService.deactivateLoading(),this.updateToastVisibility(this.router.url))})}updateToastVisibility(e){this.showToast.set(!e.startsWith("/cart"))}ngOnDestroy(){this.routerEventsSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-store-front-layout"]],decls:8,vars:1,consts:[[1,"min-h-screen","flex","flex-col"],[1,"grow","container","mx-auto","px-5","mb-10","flex","flex-col"],[1,"flex-1"],["positionClass","bottom-24 right-6"]],template:function(t,n){t&1&&(a(0,"div",0),f(1,"front-menu"),a(2,"main",1)(3,"div",2),f(4,"router-outlet"),r(),f(5,"sidebar-page"),r(),x(6,Zo,1,0,"toast",3),f(7,"app-footer"),r()),t&2&&(l(6),_(n.showToast()?6:-1))},dependencies:[Z,hn,ni,li,oi,En],encapsulation:2})};function zi(i,e){i.indexOf(e)===-1&&i.push(e)}var ct=(i,e,t)=>Math.min(Math.max(t,i),e);var J={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"};var me=i=>typeof i=="number";var be=i=>Array.isArray(i)&&!me(i[0]);var Dn=(i,e,t)=>{let n=e-i;return((t-i)%n+n)%n+i};function Rn(i,e){return be(i)?i[Dn(0,i.length,e)]:i}var di=(i,e,t)=>-t*i+t*e+i;var dt=()=>{},ee=i=>i;var xe=(i,e,t)=>e-i===0?1:(t-i)/(e-i);function mi(i,e){let t=i[i.length-1];for(let n=1;n<=e;n++){let o=xe(0,e,n);i.push(di(t,1,o))}}function mt(i){let e=[0];return mi(e,i-1),e}function pt(i,e=mt(i.length),t=ee){let n=i.length,o=n-e.length;return o>0&&mi(e,o),c=>{let u=0;for(;u<n-2&&!(c<e[u+1]);u++);let w=ct(0,1,xe(e[u],e[u+1],c));return w=Rn(t,u)(w),di(i[u],i[u+1],w)}}var ut=i=>Array.isArray(i)&&me(i[0]);var Xe=i=>typeof i=="object"&&!!i.createAnimation;var ce=i=>typeof i=="function";var Ae=i=>typeof i=="string";var Te={ms:i=>i*1e3,s:i=>i/1e3};function ji(i,e){return e?i*(1e3/e):0}var Nn=(i,e,t)=>(((1-3*t+3*e)*i+(3*t-6*e))*i+3*e)*i,Ko=1e-7,Yo=12;function Xo(i,e,t,n,o){let c,u,w=0;do u=e+(t-e)/2,c=Nn(u,n,o)-i,c>0?t=u:e=u;while(Math.abs(c)>Ko&&++w<Yo);return u}function Le(i,e,t,n){if(i===e&&t===n)return ee;let o=c=>Xo(c,0,1,i,t);return c=>c===0||c===1?c:Nn(o(c),e,n)}var qi=(i,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);let n=t*i,o=e==="end"?Math.floor(n):Math.ceil(n);return ct(0,1,o/i)};var Jo={ease:Le(.25,.1,.25,1),"ease-in":Le(.42,0,1,1),"ease-in-out":Le(.42,0,.58,1),"ease-out":Le(0,0,.58,1)},er=/\((.*?)\)/;function $i(i){if(ce(i))return i;if(ut(i))return Le(...i);let e=Jo[i];if(e)return e;if(i.startsWith("steps")){let t=er.exec(i);if(t){let n=t[1].split(",");return qi(parseFloat(n[0]),n[1].trim())}}return ee}var gt=class{constructor(e,t=[0,1],{easing:n,duration:o=J.duration,delay:c=J.delay,endDelay:u=J.endDelay,repeat:w=J.repeat,offset:R,direction:P="normal",autoplay:L=!0}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=ee,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((O,de)=>{this.resolve=O,this.reject=de}),n=n||J.easing,Xe(n)){let O=n.createAnimation(t);n=O.easing,t=O.keyframes||t,o=O.duration||o}this.repeat=w,this.easing=be(n)?ee:$i(n),this.updateDuration(o);let A=pt(t,R,be(n)?n.map($i):ee);this.tick=O=>{var de;c=c;let ae=0;this.pauseTime!==void 0?ae=this.pauseTime:ae=(O-this.startTime)*this.rate,this.t=ae,ae/=1e3,ae=Math.max(ae-c,0),this.playState==="finished"&&this.pauseTime===void 0&&(ae=this.totalDuration);let _e=ae/this.duration,wt=Math.floor(_e),ye=_e%1;!ye&&_e>=1&&(ye=1),ye===1&&wt--;let Et=wt%2;(P==="reverse"||P==="alternate"&&Et||P==="alternate-reverse"&&!Et)&&(ye=1-ye);let at=ae>=this.totalDuration?1:Math.min(ye,1),Be=A(this.easing(at));e(Be),this.pauseTime===void 0&&(this.playState==="finished"||ae>=this.totalDuration+u)?(this.playState="finished",(de=this.resolve)===null||de===void 0||de.call(this,Be)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},L&&this.play()}play(){let e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}};var Ui=function(){};var ft=class{setAnimation(e){this.animation=e,e?.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}};var Qi=new WeakMap;function pi(i){return Qi.has(i)||Qi.set(i,{transforms:[],values:new Map}),Qi.get(i)}function Vn(i,e){return i.has(e)||i.set(e,new ft),i.get(e)}var tr=["","X","Y","Z"],ir=["translate","scale","rotate","skew"],ht={x:"translateX",y:"translateY",z:"translateZ"},An={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:i=>i+"deg"},nr={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:i=>i+"px"},rotate:An,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:ee},skew:An},Me=new Map,gi=i=>`--motion-${i}`,ui=["x","y","z"];ir.forEach(i=>{tr.forEach(e=>{ui.push(i+e),Me.set(gi(i+e),nr[i])})});var or=(i,e)=>ui.indexOf(i)-ui.indexOf(e),rr=new Set(ui),fi=i=>rr.has(i),Ln=(i,e)=>{ht[e]&&(e=ht[e]);let{transforms:t}=pi(i);zi(t,e),i.style.transform=ar(t)},ar=i=>i.sort(or).reduce(sr,"").trim(),sr=(i,e)=>`${i} ${e}(var(${gi(e)}))`;var vt=i=>i.startsWith("--"),Bn=new Set;function Hn(i){if(!Bn.has(i)){Bn.add(i);try{let{syntax:e,initialValue:t}=Me.has(i)?Me.get(i):{};CSS.registerProperty({name:i,inherits:!1,syntax:e,initialValue:t})}catch{}}}var Gi=(i,e)=>document.createElement("div").animate(i,e),zn={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{Gi({opacity:[1]})}catch{return!1}return!0},finished:()=>!!Gi({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{Gi({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},Wi={},Oe={};for(let i in zn)Oe[i]=()=>(Wi[i]===void 0&&(Wi[i]=zn[i]()),Wi[i]);var lr=.015,cr=(i,e)=>{let t="",n=Math.round(e/lr);for(let o=0;o<n;o++)t+=i(xe(0,n-1,o))+", ";return t.substring(0,t.length-2)},Zi=(i,e)=>ce(i)?Oe.linearEasing()?`linear(${cr(i,e)})`:J.easing:ut(i)?dr(i):i,dr=([i,e,t,n])=>`cubic-bezier(${i}, ${e}, ${t}, ${n})`;function jn(i,e){for(let t=0;t<i.length;t++)i[t]===null&&(i[t]=t?i[t-1]:e());return i}var qn=i=>Array.isArray(i)?i:[i];function bt(i){return ht[i]&&(i=ht[i]),fi(i)?gi(i):i}var Ct={get:(i,e)=>{e=bt(e);let t=vt(e)?i.style.getPropertyValue(e):getComputedStyle(i)[e];if(!t&&t!==0){let n=Me.get(e);n&&(t=n.initialValue)}return t},set:(i,e,t)=>{e=bt(e),vt(e)?i.style.setProperty(e,t):i.style[e]=t}};function hi(i,e=!0){if(!(!i||i.playState==="finished"))try{i.stop?i.stop():(e&&i.commitStyles(),i.cancel())}catch{}}function $n(i,e){var t;let n=e?.toDefaultUnit||ee,o=i[i.length-1];if(Ae(o)){let c=((t=o.match(/(-?[\d.]+)([a-z%]*)/))===null||t===void 0?void 0:t[2])||"";c&&(n=u=>u+c)}return n}function mr(){return window.__MOTION_DEV_TOOLS_RECORD}function Un(i,e,t,n={},o){let c=mr(),u=n.record!==!1&&c,w,{duration:R=J.duration,delay:P=J.delay,endDelay:L=J.endDelay,repeat:A=J.repeat,easing:O=J.easing,persist:de=!1,direction:ae,offset:_e,allowWebkitAcceleration:wt=!1,autoplay:ye=!0}=n,Et=pi(i),at=fi(e),Be=Oe.waapi();at&&Ln(i,e);let pe=bt(e),It=Vn(Et.values,pe),Se=Me.get(pe);return hi(It.animation,!(Xe(O)&&It.generator)&&n.record!==!1),()=>{let kt=()=>{var z,st;return(st=(z=Ct.get(i,pe))!==null&&z!==void 0?z:Se?.initialValue)!==null&&st!==void 0?st:0},U=jn(qn(t),kt),en=$n(U,Se);if(Xe(O)){let z=O.createAnimation(U,e!=="opacity",kt,pe,It);O=z.easing,U=z.keyframes||U,R=z.duration||R}if(vt(pe)&&(Oe.cssRegisterProperty()?Hn(pe):Be=!1),at&&!Oe.linearEasing()&&(ce(O)||be(O)&&O.some(ce))&&(Be=!1),Be){Se&&(U=U.map(De=>me(De)?Se.toDefaultUnit(De):De)),U.length===1&&(!Oe.partialKeyframes()||u)&&U.unshift(kt());let z={delay:Te.ms(P),duration:Te.ms(R),endDelay:Te.ms(L),easing:be(O)?void 0:Zi(O,R),direction:ae,iterations:A+1,fill:"both"};w=i.animate({[pe]:U,offset:_e,easing:be(O)?O.map(De=>Zi(De,R)):void 0},z),w.finished||(w.finished=new Promise((De,fo)=>{w.onfinish=De,w.oncancel=fo}));let st=U[U.length-1];w.finished.then(()=>{de||(Ct.set(i,pe,st),w.cancel())}).catch(dt),wt||(w.playbackRate=1.000001)}else if(o&&at)U=U.map(z=>typeof z=="string"?parseFloat(z):z),U.length===1&&U.unshift(parseFloat(kt())),w=new o(z=>{Ct.set(i,pe,en?en(z):z)},U,Object.assign(Object.assign({},n),{duration:R,easing:O}));else{let z=U[U.length-1];Ct.set(i,pe,Se&&me(z)?Se.toDefaultUnit(z):z)}return u&&c(i,e,U,{duration:R,delay:P,easing:O,repeat:A,offset:_e},"motion-one"),It.setAnimation(w),w&&!ye&&w.pause(),w}}var Qn=(i,e)=>i[e]?Object.assign(Object.assign({},i),i[e]):Object.assign({},i);function vi(i,e){var t;return typeof i=="string"?e?((t=e[i])!==null&&t!==void 0||(e[i]=document.querySelectorAll(i)),i=e[i]):i=document.querySelectorAll(i):i instanceof Element&&(i=[i]),Array.from(i||[])}var pr=i=>i(),Gn=(i,e,t=J.duration)=>new Proxy({animations:i.map(pr).filter(Boolean),duration:t,options:e},gr),ur=i=>i.animations[0],gr={get:(i,e)=>{let t=ur(i);switch(e){case"duration":return i.duration;case"currentTime":return Te.s(t?.[e]||0);case"playbackRate":case"playState":return t?.[e];case"finished":return i.finished||(i.finished=Promise.all(i.animations.map(fr)).catch(dt)),i.finished;case"stop":return()=>{i.animations.forEach(n=>hi(n))};case"forEachNative":return n=>{i.animations.forEach(o=>n(o,i))};default:return typeof t?.[e]>"u"?void 0:()=>i.animations.forEach(n=>n[e]())}},set:(i,e,t)=>{switch(e){case"currentTime":t=Te.ms(t);case"playbackRate":for(let n=0;n<i.animations.length;n++)i.animations[n][e]=t;return!0}return!1}},fr=i=>i.finished;function Wn(i,e,t){return ce(i)?i(e,t):i}function Zn(i){return function(t,n,o={}){t=vi(t);let c=t.length;Ui(!!c,"No valid element provided."),Ui(!!n,"No keyframes defined.");let u=[];for(let w=0;w<c;w++){let R=t[w];for(let P in n){let L=Qn(o,P);L.delay=Wn(L.delay,w,c);let A=Un(R,P,n[P],L,i);u.push(A)}}return Gn(u,o,o.duration)}}var Je=Zn(gt);var bi=new WeakMap,Fe;function hr(i,e){if(e){let{inlineSize:t,blockSize:n}=e[0];return{width:t,height:n}}else return i instanceof SVGElement&&"getBBox"in i?i.getBBox():{width:i.offsetWidth,height:i.offsetHeight}}function vr({target:i,contentRect:e,borderBoxSize:t}){var n;(n=bi.get(i))===null||n===void 0||n.forEach(o=>{o({target:i,contentSize:e,get size(){return hr(i,t)}})})}function br(i){i.forEach(vr)}function Cr(){typeof ResizeObserver>"u"||(Fe=new ResizeObserver(br))}function Kn(i,e){Fe||Cr();let t=vi(i);return t.forEach(n=>{let o=bi.get(n);o||(o=new Set,bi.set(n,o)),o.add(e),Fe?.observe(n)}),()=>{t.forEach(n=>{let o=bi.get(n);o?.delete(e),o?.size||Fe?.unobserve(n)})}}var Ci=new Set,xt;function xr(){xt=()=>{let i={width:window.innerWidth,height:window.innerHeight},e={target:window,size:i,contentSize:i};Ci.forEach(t=>t(e))},window.addEventListener("resize",xt)}function Yn(i){return Ci.add(i),xt||xr(),()=>{Ci.delete(i),!Ci.size&&xt&&(xt=void 0)}}function Xn(i,e){return ce(i)?Yn(i):Kn(i,e)}var _r=50,Jn=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),to=()=>({time:0,x:Jn(),y:Jn()}),yr={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function eo(i,e,t,n){let o=t[e],{length:c,position:u}=yr[e],w=o.current,R=t.time;o.current=i[`scroll${u}`],o.scrollLength=i[`scroll${c}`]-i[`client${c}`],o.offset.length=0,o.offset[0]=0,o.offset[1]=o.scrollLength,o.progress=xe(0,o.scrollLength,o.current);let P=n-R;o.velocity=P>_r?0:ji(o.current-w,P)}function io(i,e,t){eo(i,"x",e,t),eo(i,"y",e,t),e.time=t}function no(i,e){let t={x:0,y:0},n=i;for(;n&&n!==e;)if(n instanceof HTMLElement)t.x+=n.offsetLeft,t.y+=n.offsetTop,n=n.offsetParent;else if(n instanceof SVGGraphicsElement&&"getBBox"in n){let{top:o,left:c}=n.getBBox();for(t.x+=c,t.y+=o;n&&n.tagName!=="svg";)n=n.parentNode}return t}var oo={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]};var xi={start:0,center:.5,end:1};function Ki(i,e,t=0){let n=0;if(xi[i]!==void 0&&(i=xi[i]),Ae(i)){let o=parseFloat(i);i.endsWith("px")?n=o:i.endsWith("%")?i=o/100:i.endsWith("vw")?n=o/100*document.documentElement.clientWidth:i.endsWith("vh")?n=o/100*document.documentElement.clientHeight:i=o}return me(i)&&(n=e*i),t+n}var Sr=[0,0];function ro(i,e,t,n){let o=Array.isArray(i)?i:Sr,c=0,u=0;return me(i)?o=[i,i]:Ae(i)&&(i=i.trim(),i.includes(" ")?o=i.split(" "):o=[i,xi[i]?i:"0"]),c=Ki(o[0],t,n),u=Ki(o[1],e),c-u}var wr={x:0,y:0};function ao(i,e,t){let{offset:n=oo.All}=t,{target:o=i,axis:c="y"}=t,u=c==="y"?"height":"width",w=o!==i?no(o,i):wr,R=o===i?{width:i.scrollWidth,height:i.scrollHeight}:{width:o.clientWidth,height:o.clientHeight},P={width:i.clientWidth,height:i.clientHeight};e[c].offset.length=0;let L=!e[c].interpolate,A=n.length;for(let O=0;O<A;O++){let de=ro(n[O],P[u],R[u],w[c]);!L&&de!==e[c].interpolatorOffsets[O]&&(L=!0),e[c].offset[O]=de}L&&(e[c].interpolate=pt(mt(A),e[c].offset),e[c].interpolatorOffsets=[...e[c].offset]),e[c].progress=e[c].interpolate(e[c].current)}function Er(i,e=i,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==i){let n=e;for(;n&&n!=i;)t.x.targetOffset+=n.offsetLeft,t.y.targetOffset+=n.offsetTop,n=n.offsetParent}t.x.targetLength=e===i?e.scrollWidth:e.clientWidth,t.y.targetLength=e===i?e.scrollHeight:e.clientHeight,t.x.containerLength=i.clientWidth,t.y.containerLength=i.clientHeight}function so(i,e,t,n={}){let o=n.axis||"y";return{measure:()=>Er(i,n.target,t),update:c=>{io(i,t,c),(n.offset||n.target)&&ao(i,t,n)},notify:ce(e)?()=>e(t):Ir(e,t[o])}}function Ir(i,e){return i.pause(),i.forEachNative((t,{easing:n})=>{var o,c;if(t.updateDuration)n||(t.easing=ee),t.updateDuration(1);else{let u={duration:1e3};n||(u.easing="linear"),(c=(o=t.effect)===null||o===void 0?void 0:o.updateTiming)===null||c===void 0||c.call(o,u)}}),()=>{i.currentTime=e.progress}}var _t=new WeakMap,lo=new WeakMap,Yi=new WeakMap,co=i=>i===document.documentElement?window:i;function Xi(i,e={}){var{container:t=document.documentElement}=e,n=nn(e,["container"]);let o=Yi.get(t);o||(o=new Set,Yi.set(t,o));let c=to(),u=so(t,i,c,n);if(o.add(u),!_t.has(t)){let P=()=>{let A=performance.now();for(let O of o)O.measure();for(let O of o)O.update(A);for(let O of o)O.notify()};_t.set(t,P);let L=co(t);window.addEventListener("resize",P,{passive:!0}),t!==document.documentElement&&lo.set(t,Xn(t,P)),L.addEventListener("scroll",P,{passive:!0})}let w=_t.get(t),R=requestAnimationFrame(w);return()=>{var P;typeof i!="function"&&i.stop(),cancelAnimationFrame(R);let L=Yi.get(t);if(!L||(L.delete(u),L.size))return;let A=_t.get(t);_t.delete(t),A&&(co(t).removeEventListener("scroll",A),(P=lo.get(t))===null||P===void 0||P(),window.removeEventListener("resize",A))}}var et=class i{contact=$.required();static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["contact-card"]],inputs:{contact:[1,"contact"]},decls:9,vars:4,consts:[[1,"card","bg-base-100","w-96","shadow-md","hover:shadow-lg","transition-shadow","duration-300"],[1,"card-body","items-center","text-center"],[1,"card-title","text-xl","mb-2"],[1,"text-sm","opacity-80"],["target","_blank","rel","noopener noreferrer",1,"text-primary",3,"href"]],template:function(t,n){t&1&&(m(0,"div",0)(1,"div",1)(2,"h3",2),s(3),p(),m(4,"p",3)(5,"a",4),s(6),p()(),m(7,"p",3),s(8),p()()()),t&2&&(l(3),D(" ",n.contact().title," "),l(2),Rt("href","https://wa.me/"+n.contact().phone,ze),l(),D(" \u{1F4DE} ",n.contact().phone," "),l(2),D(" \u2709\uFE0F ",n.contact().email," "))},styles:["[_nghost-%COMP%]{display:block}"]})};var _i=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["contact-skeleton"]],decls:5,vars:0,consts:[[1,"card","bg-base-100","w-96","shadow-md","rounded-xl","animate-pulse"],[1,"card-body","items-center","text-center","py-6"],[1,"skeletor-title","w-1/2","h-5","mb-4"],[1,"skeletor-line","w-3/4","h-4","mb-2"],[1,"skeletor-line","w-2/3","h-4"]],template:function(t,n){t&1&&(m(0,"div",0)(1,"div",1),N(2,"div",2)(3,"div",3)(4,"div",4),p()())},styles:["[_nghost-%COMP%]{display:block}"]})};var kr=()=>[1,2];function Pr(i,e){i&1&&f(0,"contact-skeleton")}function Tr(i,e){i&1&&(a(0,"div",2),E(1,Pr,1,0,"contact-skeleton",null,q),r()),i&2&&(l(),I(W(0,kr)))}function Mr(i,e){if(i&1&&f(0,"contact-card",5),i&2){let t=e.$implicit;b("contact",t)}}function Or(i,e){if(i&1&&(a(0,"div",3),E(1,Mr,1,1,"contact-card",5,te),r()),i&2){let t=d();l(),I(t.contacts())}}function Fr(i,e){i&1&&(a(0,"div",4)(1,"p",6),s(2,"No hay contactos disponibles."),r(),a(3,"button",7),s(4,"Ver informaci\xF3n de contacto"),r()())}var yi=class i{contactService=g(Zt);contacts=C([]);loading=C(!0);async ngOnInit(){try{let e=await this.contactService.getAll().toPromise();this.contacts.set((e??[]).slice(0,2))}finally{this.loading.set(!1)}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["home-contacts"]],decls:6,vars:1,consts:[[1,"mt-12","mb-20"],[1,"text-3xl","font-bold","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","justify-center","justify-items-center"],[1,"empty-state"],[3,"contact"],[1,"text-base-content/70"],["routerLink","/contact",1,"btn","btn-primary","btn-sm","mt-3"]],template:function(t,n){t&1&&(a(0,"section",0)(1,"h2",1),s(2,"\xBFNecesitas ayuda?"),r(),x(3,Tr,3,1,"div",2)(4,Or,3,0,"div",3)(5,Fr,5,0,"div",4),r()),t&2&&(l(3),_(n.loading()?3:n.contacts().length?4:5))},dependencies:[et,_i,K],styles:["[_nghost-%COMP%]{display:block}.empty-state[_ngcontent-%COMP%]{border:1px dashed rgba(148,163,184,.4);border-radius:14px;padding:24px 18px;text-align:center;background:#f1f5f980}"]})};function Dr(i,e){i&1&&s(0," Agregando... ")}function Rr(i,e){i&1&&s(0," Agregado ")}function Nr(i,e){i&1&&s(0," Agregar al carrito ")}var tt=class i{product=$.required();quantity=$(1);buttonClass=$("");disabled=$(!1);cartService=g(le);loading=C(!1);success=C(!1);buttonClasses(){return["btn btn-primary flex items-center justify-center min-w-[150px]",this.buttonClass()].filter(Boolean).join(" ")}addToCart(){if(this.disabled())return;let e=this.product();if(!e)return;let t=Math.max(1,Number(this.quantity())||1);this.loading.set(!0),this.success.set(!1),this.cartService.addItem(e,t,{showToast:!1}).subscribe({next:()=>{this.loading.set(!1),this.success.set(!0),setTimeout(()=>this.success.set(!1),800)},error:()=>{this.loading.set(!1)}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["add-to-cart-button"]],inputs:{product:[1,"product"],quantity:[1,"quantity"],buttonClass:[1,"buttonClass"],disabled:[1,"disabled"]},decls:4,vars:4,consts:[["type","button",3,"click","disabled"]],template:function(t,n){t&1&&(m(0,"button",0),qe("click",function(){return n.addToCart()}),x(1,Dr,1,0)(2,Rr,1,0)(3,Nr,1,0),p()),t&2&&(dn(n.buttonClasses()),Rt("disabled",n.loading()||n.disabled()),l(),_(n.loading()?1:n.success()?2:3))},styles:["[_nghost-%COMP%]{display:inline-block}button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}"]})};var Vr=()=>[],mo=i=>["/product",i],it=class i{product=$.required();static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["product-card"]],inputs:{product:[1,"product"]},decls:16,vars:27,consts:[[1,"product-appear","card","bg-base-100","shadow-none","hover:shadow-2xl","transition-shadow","duration-300","w-full","max-w-[260px]","sm:max-w-[280px]","md:max-w-[300px]","mx-auto"],[1,"w-full","h-48","flex","items-center","justify-center","bg-base-200","overflow-hidden"],[1,"cursor-pointer","w-full","h-full","object-cover","object-center",3,"src","alt","routerLink"],[1,"card-body","p-3","sm:p-4","md:p-5"],[1,"card-title","cursor-pointer","min-h-10","sm:min-h-12","md:min-h-14","text-sm","sm:text-base","md:text-lg","line-clamp-2","justify-center",3,"routerLink"],[1,"min-h-12","sm:min-h-16","md:min-h-18","text-xs","sm:text-sm","md:text-base","line-clamp-3"],[1,"mt-2","flex","flex-col","items-center"],[1,"font-bold","text-sm","sm:text-base","md:text-lg"],["buttonClass","card-actions btn-sm sm:btn-md mt-2 relative",3,"product"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"figure",1),f(2,"img",2),V(3,"productImage"),r(),a(4,"div",3)(5,"h2",4),s(6),V(7,"slice"),r(),a(8,"p",5),s(9),V(10,"slice"),r(),a(11,"div",6)(12,"p",7),s(13),V(14,"guaranies"),r(),f(15,"add-to-cart-button",8),r()()()),t&2&&(l(2),b("alt",Nt(n.product().title))("src",Vt(3,9,n.product().images??W(22,Vr),"medium"),ze)("routerLink",Ve(23,mo,n.product().slug)),l(3),b("routerLink",Ve(25,mo,n.product().slug)),l(),D(" ",$e(7,12,n.product().title,0,70)," "),l(3),D(" ",$e(10,16,n.product().description,0,100)," "),l(4),D(" ",H(14,20,n.product().price)," "),l(2),b("product",n.product()))},dependencies:[K,tt,Bt,Kt,ve],styles:["[_nghost-%COMP%]{display:block}.product-card[_ngcontent-%COMP%]{width:100%;max-width:280px;margin-inline:auto}.product-appear[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_productFadeIn .7s cubic-bezier(.2,.8,.35,1) forwards;will-change:transform,opacity;transform:translateZ(0)}@keyframes _ngcontent-%COMP%_productFadeIn{0%{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}"]})};var Ar=["swiper"];function Lr(i,e){if(i&1&&(a(0,"swiper-slide")(1,"div",2),f(2,"product-card",3),r()()),i&2){let t=e.$implicit;l(2),b("product",t)}}var Si=class i{products=$.required();swiperRef;initialized=!1;listenersAttached=!1;lastIndex=0;indexListenerAttached=!1;ngAfterViewInit(){this.configureSwiper()}onResize(){this.configureSwiper()}configureSwiper(){let e=this.swiperRef?.nativeElement;if(!e)return;let n=(this.products()??[]).length>1,o=e.swiper,c=o?.realIndex??this.lastIndex??0;n?(e.navigation=!0,e.rewind=!0,e.centeredSlides=!0,e.centeredSlidesBounds=!0,e.loop=!1,e.initialSlide=0,e.allowTouchMove=!0,e.autoplay={delay:4500,disableOnInteraction:!1,pauseOnMouseEnter:!0},e.speed=800,e.breakpoints={0:{slidesPerView:"auto",spaceBetween:18},640:{slidesPerView:"auto",spaceBetween:22},1024:{slidesPerView:"auto",spaceBetween:26},1280:{slidesPerView:"auto",spaceBetween:32}},o&&(o.params.allowTouchMove=!0,o.allowTouchMove=!0,o.params.autoplay=we(ge({},o.params.autoplay||{}),{delay:4500,pauseOnMouseEnter:!0,disableOnInteraction:!1}),this.attachHoverHandlers(e))):(e.navigation=!1,e.loop=!1,e.autoplay=!1,e.centeredSlides=!1,e.centeredSlidesBounds=!1,e.allowTouchMove=!1,e.breakpoints={0:{slidesPerView:"auto",spaceBetween:18},640:{slidesPerView:"auto",spaceBetween:22},1024:{slidesPerView:"auto",spaceBetween:28},1280:{slidesPerView:"auto",spaceBetween:32}},o&&(o.params.allowTouchMove=!1,o.allowTouchMove=!1,this.detachHoverHandlers(e))),this.initialized?(e.updateSwiper?.(),n?(this.lastIndex=c,e.swiper?.slideTo?.(this.lastIndex,0),this.attachIndexListener(e),e.swiper?.autoplay?.stop?.(),e.swiper?.autoplay?.start?.()):(this.lastIndex=0,e.swiper?.autoplay?.stop?.())):(e.initialize(),n&&(this.resetToFirstSlide(e),this.attachIndexListener(e),e.swiper?.autoplay?.stop?.(),e.swiper?.autoplay?.start?.()),this.initialized=!0)}attachHoverHandlers(e){this.listenersAttached||(e.addEventListener("mouseenter",()=>{e.swiper?.autoplay?.stop?.()}),e.addEventListener("mouseleave",()=>{e.swiper?.autoplay?.start?.()}),this.listenersAttached=!0)}detachHoverHandlers(e){e.swiper?.autoplay?.stop?.()}resetToFirstSlide(e){this.lastIndex=0,e.swiper?.slideTo?.(0,0),e.swiper?.updateSlides?.()}attachIndexListener(e){this.indexListenerAttached||(e.addEventListener("slidechange",()=>{let t=e.swiper?.realIndex??e.swiper?.activeIndex??0;this.lastIndex=t}),this.indexListenerAttached=!0)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["product-carrusel"]],viewQuery:function(t,n){if(t&1&&ie(Ar,5),t&2){let o;ne(o=oe())&&(n.swiperRef=o.first)}},hostBindings:function(t,n){t&1&&h("resize",function(){return n.onResize()},je)},inputs:{products:[1,"products"]},decls:4,vars:0,consts:[["swiper",""],["slides-per-view","auto","space-between","12","navigation","true","rewind","true","dir","ltr",1,"w-full","overflow-hidden","sm:overflow-visible"],[1,"w-[260px]","sm:w-[280px]","md:w-[300px]"],[3,"product"]],template:function(t,n){t&1&&(a(0,"swiper-container",1,0),E(2,Lr,3,1,"swiper-slide",null,te),r()),t&2&&(l(2),I(n.products()))},dependencies:[Z,it],styles:["[_nghost-%COMP%]{display:block;width:100%;max-width:100vw;overflow:hidden}swiper-container[_ngcontent-%COMP%]{--swiper-navigation-color: #9ca3af;--swiper-navigation-size: 24px;--swiper-navigation-sides-offset: 14px;width:100%;max-width:100%;margin-inline:auto;padding-inline:8px;box-sizing:border-box}swiper-slide[_ngcontent-%COMP%]{width:auto!important}"]})};var nt=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["product-card-skeleton"]],decls:12,vars:0,consts:[[1,"card","bg-base-100","shadow-none","w-full","max-w-[260px]","sm:max-w-[280px]","md:max-w-[300px]","mx-auto","animate-pulse","rounded-2xl","overflow-hidden"],[1,"w-full","h-48","bg-base-200","overflow-hidden","flex","items-center","justify-center"],[1,"skeletor-thumb"],[1,"p-3","sm:p-4","md:p-5"],[1,"skeletor-title","mb-3"],[1,"space-y-2","mb-4"],[1,"skeletor-line"],[1,"skeletor-line","w-11/12"],[1,"skeletor-line","w-3/4"],[1,"mt-2","flex","flex-col","items-center","gap-3"],[1,"skeletor-title","h-4","w-20"],[1,"skeletor-pill","w-28"]],template:function(t,n){t&1&&(m(0,"div",0)(1,"figure",1),N(2,"div",2),p(),m(3,"div",3),N(4,"div",4),m(5,"div",5),N(6,"div",6)(7,"div",7)(8,"div",8),p(),m(9,"div",9),N(10,"div",10)(11,"div",11),p()()())},styles:["[_nghost-%COMP%]{display:block}"]})};var Br=()=>[1,2,3,4],Hr=()=>[];function zr(i,e){i&1&&f(0,"product-card-skeleton")}function jr(i,e){i&1&&(a(0,"div",4),E(1,zr,1,0,"product-card-skeleton",null,q),r()),i&2&&(l(),I(W(0,Br)))}function qr(i,e){if(i&1&&f(0,"product-carrusel",5),i&2){let t,n=d();b("products",((t=n.productResponse())==null?null:t.products)??W(1,Hr))}}function $r(i,e){i&1&&(a(0,"div",6)(1,"p",7),s(2,"No hay productos destacados por ahora."),r(),a(3,"button",8),s(4,"Explorar productos"),r()())}var wi=class i{productResponse;loading;error;constructor(){let{productResponse:e,loading:t,error:n,loadProducts:o}=Yt();this.productResponse=e,this.loading=t,this.error=n,Ce(()=>{o({isFeatured:!0,limit:12})})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["home-featured-products"]],decls:9,vars:1,consts:[[1,"mt-12","overflow-hidden"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-3xl","font-bold"],["routerLink","/products",1,"btn","btn-link"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-4","mt-6","gap-4","sm:gap-6","md:gap-8"],[3,"products"],[1,"empty-state"],[1,"text-base-content/70"],["routerLink","/products",1,"btn","btn-primary","btn-sm","mt-3"]],template:function(t,n){if(t&1&&(a(0,"section",0)(1,"div",1)(2,"h2",2),s(3,"Productos destacados"),r(),a(4,"button",3),s(5,"Ver todo"),r()(),x(6,jr,3,1,"div",4)(7,qr,1,2,"product-carrusel",5)(8,$r,5,0,"div",6),r()),t&2){let o;l(6),_(n.loading()?6:!((o=n.productResponse())==null||o.products==null)&&o.products.length?7:8)}},dependencies:[K,Si,nt],styles:["[_nghost-%COMP%]{display:block}.empty-state[_ngcontent-%COMP%]{border:1px dashed rgba(148,163,184,.4);border-radius:14px;padding:24px 18px;text-align:center;background:#f1f5f980}"]})};var Ur=["heroBg"],Qr=()=>[1,2,3,4],Gr=i=>({categoryId:i}),Wr=(i,e)=>e.id;function Zr(i,e){i&1&&(a(0,"div",10),f(1,"div",11)(2,"div",12),r())}function Kr(i,e){i&1&&E(0,Zr,3,0,"div",10,q),i&2&&I(W(0,Qr))}function Yr(i,e){if(i&1&&(a(0,"a",13)(1,"div",14)(2,"span",15),s(3),r(),a(4,"span",16),s(5),r()()()),i&2){let t=e.$implicit;b("queryParams",Ve(3,Gr,t.id)),l(3),F(t.name),l(2),F(t.description||"Productos seleccionados")}}function Xr(i,e){if(i&1&&E(0,Yr,6,5,"a",13,Wr),i&2){let t=d();I(t.topCategories())}}var Ei=class i{heroBg;categoryService=g(Wt);productService=g(We);topCategories=C([]);loading=C(!1);ngOnInit(){this.loadTopCategories()}ngAfterViewInit(){Je(".hero-title",{opacity:[0,1],y:["40px","0px"]},{duration:.7}),Je(".hero-sub",{opacity:[0,1]},{duration:1}),Xi(({y:e})=>{let t=e.progress;this.heroBg.nativeElement.style.transform=`translateY(${t*60}px)`},{target:this.heroBg.nativeElement})}loadTopCategories(){this.loading.set(!0),this.categoryService.getAll().pipe(fe(e=>{if(!e.length)return j([]);let t=e.map(n=>this.productService.getProducts({limit:1,offset:0,categoryId:n.id}).pipe(Q(o=>({id:n.id,name:n.name,description:n.description,count:o.count??o.products?.length??0}))));return Pt(t)}),Q(e=>e.sort((t,n)=>n.count-t.count).slice(0,4)),Mt(()=>j([]))).subscribe(e=>{this.topCategories.set(e),this.loading.set(!1)})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["home-hero"]],viewQuery:function(t,n){if(t&1&&ie(Ur,5),t&2){let o;ne(o=oe())&&(n.heroBg=o.first)}},decls:16,vars:1,consts:[["heroBg",""],[1,"hero","w-screen","mx-[calc(50%-50vw)]","flex","items-center","justify-center","relative","overflow-hidden","py-4","md:py-6"],[1,"hero-bg","absolute","inset-0"],[1,"absolute","inset-0","bg-linear-to-br","from-amber-800/85","via-orange-600/60","to-amber-400/35"],[1,"relative","text-center","text-white","px-4","max-w-4xl","mx-auto"],[1,"hero-title","text-4xl","md:text-6xl","font-extrabold","leading-tight","sm:whitespace-nowrap"],[1,"text-yellow-300"],[1,"mt-5","md:mt-4","grid","grid-cols-2","md:grid-cols-4","gap-2","md:gap-3","justify-items-center"],[1,"hero-sub","opacity-80","mt-3","text-sm","md:text-base"],["routerLink","/products",1,"btn","btn-secondary","mt-3"],[1,"w-full","h-28","rounded-xl","border","border-white/10","bg-white/10","backdrop-blur"],[1,"h-4","w-3/4","mt-4","mx-auto","rounded-full","bg-white/30","skeletor"],[1,"h-3","w-1/2","mt-2","mx-auto","rounded-full","bg-white/20","skeletor"],["routerLink","/products",1,"top-cat",3,"queryParams"],[1,"top-cat__card","rounded-xl","border","border-white/10","bg-white/10","hover:bg-white/20","backdrop-blur","p-3","transition-colors"],[1,"block","text-base","md:text-lg","font-semibold"],[1,"block","text-xs","opacity-80"]],template:function(t,n){t&1&&(a(0,"section",1),f(1,"div",2,0)(3,"div",3),a(4,"div",4)(5,"h1",5),s(6," Sabores aut\xE9nticos, "),a(7,"span",6),s(8,"sin gluten"),r()(),a(9,"div",7),x(10,Kr,2,1)(11,Xr,2,0),r(),a(12,"p",8),s(13," Eleg\xED tu favorito, sin renunciar al sabor. "),r(),a(14,"button",9),s(15," Todos los productos "),r()()()),t&2&&(l(10),_(n.loading()?10:n.topCategories().length?11:-1))},dependencies:[K],styles:['[_nghost-%COMP%]{display:block}.hero-bg[_ngcontent-%COMP%]{background-image:"assets/hero-bg.jpg";background-size:cover;background-position:center;will-change:transform}.top-cat[_ngcontent-%COMP%]{width:100%;max-width:180px;display:block}.top-cat__card[_ngcontent-%COMP%]{min-height:120px;display:flex;flex-direction:column;justify-content:center;text-align:center}']})};var Ii=class i{images=["assets/images/gluten-free.jpg","assets/images/gluten-free-450.jpg"];static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["home-promos"]],decls:3,vars:2,consts:[[1,"w-screen","mx-[calc(50%-50vw)]","overflow-hidden","relative"],[1,"promo-aspect","relative","w-full"],[1,"absolute","inset-0","w-full","h-full","block",3,"images","autoplay"]],template:function(t,n){t&1&&(a(0,"section",0)(1,"div",1),f(2,"image-carrusel",2),r()()),t&2&&(l(2),b("images",n.images)("autoplay",!0))},dependencies:[kn],styles:['[_nghost-%COMP%]{display:block}.promo-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.promo-aspect[_ngcontent-%COMP%]{position:relative;aspect-ratio:1920 / 450}.promo-aspect[_ngcontent-%COMP%]:before{content:"";display:block;padding-top:23.4375%}@supports (aspect-ratio: 1 / 1){.promo-aspect[_ngcontent-%COMP%]:before{display:none}}']})};function Jr(i,e){if(i&1&&(m(0,"span",3),s(1),p()),i&2){let t=d();l(),D("",t.recipe().matchCount," ingredientes coinciden")}}function ea(i,e){if(i&1&&(m(0,"span",10),s(1),p()),i&2){let t=e.$implicit,n=d(2);G("card__chip--match",n.isIngredientSearched(t)),l(),F(t)}}function ta(i,e){if(i&1&&(N(0,"div",5),m(1,"div",6)(2,"p",7),s(3,"Ingredientes"),p(),m(4,"div",8),E(5,ea,2,3,"span",9,q),p()()),i&2){let t=d();l(5),I(t.ingredients())}}var ot=class i{ingredientState=g(Pe);recipe=$.required();ingredients=re(()=>(this.recipe().recipeIngredients??[]).map(e=>e?.ingredient?.name).filter(e=>!!e));ingredientFilterSet=re(()=>{let e=this.ingredientState.ingredients()??[],t=this.ingredientState.queryIngredients()??[],n=[...e,...t];return new Set(n.map(o=>o.trim().toLowerCase()).filter(Boolean))});matchedIngredientSet=re(()=>{let e=this.recipe().matchedIngredientNames??[];return new Set(e.map(t=>t.trim().toLowerCase()).filter(Boolean))});isIngredientSearched(e){let t=e.trim().toLowerCase();return this.matchedIngredientSet().has(t)||this.ingredientFilterSet().has(t)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["recipe-card"]],inputs:{recipe:[1,"recipe"]},decls:8,vars:4,consts:[[1,"card"],[1,"card__header"],[1,"card__title"],[1,"card__badge"],[1,"card__text"],["aria-hidden","true",1,"h-px","bg-base-200/60"],[1,"card__ingredients-wrap"],[1,"card__ingredients-title"],[1,"card__ingredients"],[1,"card__chip",3,"card__chip--match"],[1,"card__chip"]],template:function(t,n){t&1&&(m(0,"article",0)(1,"header",1)(2,"h3",2),s(3),p(),x(4,Jr,2,1,"span",3),p(),m(5,"p",4),s(6),p(),x(7,ta,7,0),p()),t&2&&(l(3),F(n.recipe().title),l(),_(n.recipe().matchCount?4:-1),l(2),D(" ",n.recipe().text||n.recipe().description||"Receta sin descripci\xF3n."," "),l(),_(n.ingredients().length?7:-1))},styles:["[_nghost-%COMP%]{display:block}.card[_ngcontent-%COMP%]{background:hsl(var(--b1));border:1px solid hsl(var(--b3));border-radius:.9rem;padding:1rem;box-shadow:0 10px 30px #0000000f;transition:transform .15s ease,box-shadow .15s ease;height:100%;display:flex;flex-direction:column;gap:.75rem}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 14px 36px #00000014}.card__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:.75rem}.card__title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:hsl(var(--bc));margin:0}.card__badge[_ngcontent-%COMP%]{font-size:.8rem;padding:.25rem .5rem;border-radius:999px;background:hsl(var(--p) / .12);color:hsl(var(--p));border:1px solid hsl(var(--p) / .3);white-space:nowrap}.card__text[_ngcontent-%COMP%]{color:hsl(var(--bc) / .78);line-height:1.5;font-size:.95rem}.card__ingredients[_ngcontent-%COMP%]{display:flex;gap:.4rem;flex-wrap:wrap;margin-top:auto}.card__chip[_ngcontent-%COMP%]{background:hsl(var(--b2));border:1px solid hsl(var(--b3));border-radius:999px;padding:.3rem .55rem;font-size:.82rem;color:hsl(var(--bc))}.card__chip--match[_ngcontent-%COMP%]{font-weight:700;background:hsl(var(--p) / .12);border-color:hsl(var(--p) / .45)}.card__ingredients-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.4rem}.card__ingredients-title[_ngcontent-%COMP%]{font-weight:700;font-size:.95rem;color:hsl(var(--bc));margin:0}"]})};var rt=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["recipe-skeleton"]],decls:16,vars:0,consts:[[1,"card","p-4","sm:p-5","md:p-6","bg-base-100","animate-pulse","rounded-2xl","shadow-none"],[1,"flex","flex-col","gap-2","mb-3"],[1,"skeletor-title","w-2/3"],[1,"skeletor-pill","w-40","h-6"],[1,"space-y-2","mb-4"],[1,"skeletor-line"],[1,"skeletor-line","w-11/12"],[1,"skeletor-line","w-3/4"],[1,"h-px","bg-base-200/60","my-3"],[1,"flex","flex-col","gap-2"],[1,"skeletor-title","w-32","h-4"],[1,"flex","flex-wrap","gap-2","mt-1"],[1,"skeletor-pill","w-20","h-7"],[1,"skeletor-pill","w-24","h-7"],[1,"skeletor-pill","w-16","h-7"],[1,"skeletor-pill","w-28","h-7"]],template:function(t,n){t&1&&(m(0,"article",0)(1,"header",1),N(2,"div",2)(3,"div",3),p(),m(4,"div",4),N(5,"div",5)(6,"div",6)(7,"div",7),p(),N(8,"div",8),m(9,"div",9),N(10,"div",10),m(11,"div",11),N(12,"div",12)(13,"div",13)(14,"div",14)(15,"div",15),p()()())},styles:["[_nghost-%COMP%]{display:block}"]})};var ia=()=>[1,2,3];function na(i,e){i&1&&f(0,"recipe-skeleton")}function oa(i,e){i&1&&(a(0,"div",4),E(1,na,1,0,"recipe-skeleton",null,q),r()),i&2&&(l(),I(W(0,ia)))}function ra(i,e){if(i&1&&f(0,"recipe-card",7),i&2){let t=e.$implicit;b("recipe",t)}}function aa(i,e){if(i&1&&(a(0,"div",5),E(1,ra,1,1,"recipe-card",7,te),r()),i&2){let t=d();l(),I(t.recipes())}}function sa(i,e){i&1&&(a(0,"div",6)(1,"p",8),s(2,"No hay recetas disponibles hoy."),r(),a(3,"button",9),s(4,"Explorar recetas"),r()())}var ki=class i{recipeService=g(Ze);recipes=C([]);loading=C(!0);async ngOnInit(){try{let e=await this.recipeService.getAll().toPromise();this.recipes.set((e??[]).slice(0,3))}finally{this.loading.set(!1)}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["home-recipes"]],decls:9,vars:1,consts:[[1,"mt-12"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-3xl","font-bold"],["routerLink","/recipes",1,"btn","btn-link"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mt-3"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","justify-center","justify-items-center"],[1,"empty-state"],[3,"recipe"],[1,"text-base-content/70"],["routerLink","/recipes",1,"btn","btn-primary","btn-sm","mt-3"]],template:function(t,n){t&1&&(a(0,"section",0)(1,"div",1)(2,"h2",2),s(3,"Recetas para hoy"),r(),a(4,"button",3),s(5,"Ver todo"),r()(),x(6,oa,3,1,"div",4)(7,aa,3,0,"div",5)(8,sa,5,0,"div",6),r()),t&2&&(l(6),_(n.loading()?6:n.recipes().length?7:8))},dependencies:[K,ot,rt],styles:["[_nghost-%COMP%]{display:block}.empty-state[_ngcontent-%COMP%]{border:1px dashed rgba(148,163,184,.4);border-radius:14px;padding:24px 18px;text-align:center;background:#f1f5f980}"]})};var Pi=class i{ngAfterViewInit(){let e=document.querySelectorAll(".reveal"),t=new IntersectionObserver(n=>{n.forEach(o=>{o.isIntersecting&&(Je(o.target,{opacity:[0,1],transform:["translateY(40px)","translateY(0px)"]},{duration:.7,easing:"ease-out"}),t.unobserve(o.target))})},{threshold:.1});e.forEach(n=>t.observe(n))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-home"]],decls:5,vars:0,consts:[[1,"reveal"]],template:function(t,n){t&1&&f(0,"home-promos",0)(1,"home-hero",0)(2,"home-featured-products",0)(3,"home-recipes",0)(4,"home-contacts",0)},dependencies:[Ei,Ii,wi,ki,yi],styles:["[_nghost-%COMP%]{display:block}.reveal[_ngcontent-%COMP%]{opacity:0}"]})};var Ti=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-not-found"]],decls:9,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center","min-h-[75vh]","text-center","px-6"],[1,"text-9xl","font-bold","text-primary"],[1,"text-2xl","md:text-3xl","font-semibold","mt-4"],[1,"text-gray-600","mt-2","mb-6","max-w-md"],["routerLink","/",1,"btn","btn-primary","shadow-md","hover:shadow-lg","transition","duration-300"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"h1",1),s(2,"404"),r(),a(3,"h2",2),s(4,"P\xE1gina no encontrada"),r(),a(5,"p",3),s(6," Lo sentimos, la p\xE1gina que est\xE1s buscando no existe o fue movida a otra URL. "),r(),a(7,"a",4),s(8," Volver al inicio "),r()())},dependencies:[K],styles:["[_nghost-%COMP%]{display:block}"]})};var Mi=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["product-skeleton"]],decls:33,vars:0,consts:[[1,"product-details-card","product-appear"],[1,"product-grid","animate-pulse"],[1,"image-wrap"],[1,"w-full","h-[420px]","md:h-[480px]","bg-base-300/70","rounded-xl"],[1,"flex","gap-2","mt-3"],[1,"w-20","h-20","bg-base-300/70","rounded-lg"],[1,"info-wrap"],[1,"skeletor-title","h-7","w-2/3"],[1,"section"],[1,"w-28","h-4","bg-base-300/60","rounded-full"],[1,"space-y-2","mt-1"],[1,"skeletor-line"],[1,"skeletor-line","w-11/12"],[1,"skeletor-line","w-3/4"],[1,"section","meta","meta-compact"],[1,"w-24","h-4","bg-base-300/60","rounded-full"],[1,"skeletor-line","w-40","h-4","mt-1"],[1,"w-16","h-4","bg-base-300/60","rounded-full"],[1,"flex","flex-wrap","gap-2","mt-1"],[1,"skeletor-pill","w-20","h-7"],[1,"skeletor-pill","w-24","h-7"],[1,"skeletor-pill","w-16","h-7"],[1,"section","add-cart","add-cart-bottom","w-full"],[1,"flex","items-center","gap-3","justify-center"],[1,"quantity-group","inline-flex","items-center","border","border-base-200","bg-base-200/60","rounded-md","overflow-hidden","shrink-0"],[1,"w-9","h-9","bg-base-300/70"],[1,"w-10","h-9","bg-base-300/50"],[1,"skeletor-pill","h-10","w-full","md:w-40"]],template:function(t,n){t&1&&(m(0,"section",0)(1,"div",1)(2,"div",2),N(3,"div",3),m(4,"div",4),N(5,"div",5)(6,"div",5)(7,"div",5),p()(),m(8,"div",6),N(9,"div",7),m(10,"div",8),N(11,"div",9),m(12,"div",10),N(13,"div",11)(14,"div",12)(15,"div",13),p()(),m(16,"div",14)(17,"div"),N(18,"div",15)(19,"div",16),p(),m(20,"div"),N(21,"div",17),m(22,"div",18),N(23,"div",19)(24,"div",20)(25,"div",21),p()()(),m(26,"div",22)(27,"div",23)(28,"div",24),N(29,"div",25)(30,"div",26)(31,"div",25),p(),N(32,"div",27),p()()()()())},styles:["[_nghost-%COMP%]{display:block;color:hsl(var(--bc))}.product-details-card[_ngcontent-%COMP%]{padding:.5rem 0;max-width:1240px;margin:0 auto}.product-appear[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_productFadeIn .7s cubic-bezier(.2,.8,.35,1) forwards;will-change:opacity}@keyframes _ngcontent-%COMP%_productFadeIn{0%{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1.75rem}@media (min-width: 768px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:1.05fr 1fr;align-items:start}}.image-wrap[_ngcontent-%COMP%]{padding:0;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;gap:.75rem;max-width:1536px;width:100%;overflow:hidden}.info-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem;height:100%}.meta-compact[_ngcontent-%COMP%]{gap:.65rem}.image-wrap[_ngcontent-%COMP%]   image-gallery[_ngcontent-%COMP%]{width:100%;height:100%}.image-wrap[_ngcontent-%COMP%]   swiper-container[_ngcontent-%COMP%], .image-wrap[_ngcontent-%COMP%]   swiper-slide[_ngcontent-%COMP%]{width:100%;height:100%}.image-wrap[_ngcontent-%COMP%]   swiper-slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain}.section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.section.meta[_ngcontent-%COMP%]{gap:1rem}.section-title[_ngcontent-%COMP%]{font-weight:700;font-size:.95rem;color:hsl(var(--bc))}.body-text[_ngcontent-%COMP%]{color:hsl(var(--bc) / .85)}.text-subtle[_ngcontent-%COMP%]{color:hsl(var(--bc) / .6)}.tag-chip[_ngcontent-%COMP%]{background:hsl(var(--b2));color:hsl(var(--bc) / .9);padding:.35rem .65rem;border-radius:999px;font-size:.85rem;border:1px solid hsl(var(--b3))}.add-cart-bottom[_ngcontent-%COMP%]{margin-top:auto;align-self:flex-end}.add-cart[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield;appearance:textfield}.add-cart[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, .add-cart[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}"]})};function la(i,e){i&1&&f(0,"product-skeleton")}function ca(i,e){if(i&1&&(a(0,"span",21),s(1),r()),i&2){let t=e.$implicit,n=d(3);l(),F(n.toTagName(t))}}function da(i,e){if(i&1&&E(0,ca,2,1,"span",21,te),i&2){let t,n=d(2);I((t=n.product())==null?null:t.tags)}}function ma(i,e){i&1&&(a(0,"span",14),s(1,"Sin tags"),r())}function pa(i,e){if(i&1){let t=k();a(0,"section",0)(1,"div",2)(2,"div",3),f(3,"image-gallery",4),r(),a(4,"div",5)(5,"header",6)(6,"h1",7),s(7),r()(),a(8,"div",8)(9,"h3",9),s(10,"Descripci\xF3n"),r(),a(11,"p",10),s(12),r()(),a(13,"div",11)(14,"div")(15,"h3",9),s(16,"Categor\xEDa"),r(),a(17,"p",12),s(18),r()(),a(19,"div")(20,"h3",9),s(21,"Tags"),r(),a(22,"div",13),x(23,da,2,0)(24,ma,2,0,"span",14),r()()(),a(25,"div",15)(26,"div",16)(27,"div",17)(28,"button",18),h("click",function(){y(t);let o=d();return S(o.decrement())}),s(29," - "),r(),a(30,"input",19),h("input",function(o){y(t);let c=d();return S(c.onQuantityInput(o))}),r(),a(31,"button",18),h("click",function(){y(t);let o=d();return S(o.increment())}),s(32," + "),r()(),f(33,"add-to-cart-button",20),r()()()()()}if(i&2){let t,n,o,c,u,w=d();l(3),b("images",w.galleryImages())("removable",!1)("autoplay",!1)("loop",!1)("effect","fade"),l(4),F((t=w.product())==null?null:t.title),l(5),D(" ",((n=w.product())==null?null:n.description)||"Sin descripci\xF3n disponible."," "),l(6),D(" ",w.categoryName()||"Sin categor\xEDa"," "),l(5),_(!((o=w.product())==null||o.tags==null)&&o.tags.length?23:24),l(7),b("value",w.quantity())("max",((c=w.product())==null?null:c.stock)||void 0),l(3),b("product",w.product())("quantity",w.quantity())("disabled",(((u=w.product())==null?null:u.stock)||0)<=0)}}function ua(i,e){i&1&&(a(0,"p",1),s(1,"No se encontr\xF3 el producto."),r())}var yt=class i{activatedRoute=g(Ht);productService=g(We);baseUrl=zt.baseUrl;productSlug=this.activatedRoute.snapshot.params.slug;product=C(null);loading=C(!0);error=C(null);quantity=C(1);constructor(){}ngOnInit(){this.resetScrollTop(),this.loadProduct()}async loadProduct(){this.loading.set(!0),this.error.set(null);try{let e=await ue(this.productService.getProductByIdSlug(this.productSlug));this.product.set(e),this.resetScrollTop()}catch{this.error.set("Error al cargar el producto")}finally{this.loading.set(!1)}}galleryImages=re(()=>{let e=this.product();if(!e)return[];let n=(Array.isArray(e.images)?e.images:[]).map((c,u)=>{let w=Bi(c,"original");if(!w)return null;let R=Bi(c,"small"),P={src:this.mapToImageUrl(w),identifier:`${u}-${w}`,alt:e.title??`Imagen ${u+1}`};return R&&(P.thumb=this.mapToImageUrl(R)),P}).filter(c=>c!==null);if(n.length)return n;let o="assets/images/default-image.jpg";return[{src:o,identifier:"fallback",alt:e.title??"Imagen",thumb:o}]});mapToImageUrl(e){return e?/^https?:\/\//.test(e)||e.startsWith("assets/")?e:`${this.baseUrl}/files/product/${e}`:"assets/images/default-image.jpg"}toTagName(e){return e?typeof e=="string"?e:typeof e=="object"&&"name"in e&&typeof e.name=="string"?e.name:"":""}categoryName(){let e=this.product()?.category;return e?typeof e=="string"?e:typeof e=="object"&&"name"in e&&typeof e.name=="string"?e.name:"":""}increment(){let e=Math.min(this.product()?.stock??99,this.quantity()+1);this.quantity.set(e)}decrement(){this.quantity.update(e=>Math.max(1,e-1))}onQuantityInput(e){let t=e.target;if(!t)return;let n=this.product()?.stock,o=parseInt(t.value,10);(isNaN(o)||o<1)&&(o=1),typeof n=="number"&&n>0&&o>n&&(o=n),this.quantity.set(o)}resetScrollTop(){typeof window>"u"||requestAnimationFrame(()=>window.scrollTo({top:0,behavior:"auto"}))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-product"]],decls:3,vars:3,consts:[[1,"product-details-card","product-appear","text-base-content"],[1,"text-center","text-subtle","mt-10"],[1,"product-grid"],[1,"image-wrap"],[3,"images","removable","autoplay","loop","effect"],[1,"info-wrap"],[1,"space-y-2"],[1,"text-3xl","font-bold","leading-tight","text-base-content"],[1,"section"],[1,"section-title"],[1,"leading-relaxed","body-text"],[1,"section","meta","meta-compact"],[1,"font-medium"],[1,"flex","flex-wrap","gap-2"],[1,"text-sm","text-subtle"],[1,"section","add-cart","add-cart-bottom","w-full"],[1,"add-row","flex","items-center","gap-3","w-full","justify-center"],[1,"quantity-group","inline-flex","items-center","border","border-base-200","bg-base-200/60","rounded-md","overflow-hidden","shrink-0"],["type","button",1,"w-9","h-9","flex","items-center","justify-center","text-lg","font-semibold","text-base-content","hover:bg-base-300/80","active:bg-base-300","focus:outline-none","cursor-pointer",3,"click"],["type","number","min","1",1,"w-10","h-9","text-center","bg-base-100/90","text-sm","font-semibold","text-base-content","border-none","focus:outline-none",3,"input","value","max"],["buttonClass","btn-md w-full md:w-auto",1,"shrink-0",3,"product","quantity","disabled"],[1,"tag-chip"]],template:function(t,n){t&1&&(x(0,la,1,0,"product-skeleton"),x(1,pa,34,14,"section",0),x(2,ua,2,0,"p",1)),t&2&&(_(n.loading()?0:-1),l(),_(!n.loading()&&n.product()?1:-1),l(),_(!n.loading()&&!n.product()?2:-1))},dependencies:[Z,Pn,tt,Mi],styles:["[_nghost-%COMP%]{display:block;color:hsl(var(--bc))}.product-details-card[_ngcontent-%COMP%]{padding:.5rem 0;max-width:1240px;margin:0 auto}.product-appear[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_productFadeIn .7s cubic-bezier(.2,.8,.35,1) forwards;will-change:opacity}@keyframes _ngcontent-%COMP%_productFadeIn{0%{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1.75rem}@media (min-width: 768px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:1.05fr 1fr;align-items:start}}.image-wrap[_ngcontent-%COMP%]{padding:0;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;gap:.75rem;max-width:1536px;width:100%;overflow:hidden}.info-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem;height:100%}.meta-compact[_ngcontent-%COMP%]{gap:.65rem}.image-wrap[_ngcontent-%COMP%]   image-gallery[_ngcontent-%COMP%]{width:100%;height:100%}.image-wrap[_ngcontent-%COMP%]   swiper-container[_ngcontent-%COMP%], .image-wrap[_ngcontent-%COMP%]   swiper-slide[_ngcontent-%COMP%]{width:100%;height:100%}.image-wrap[_ngcontent-%COMP%]   swiper-slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain}.section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.section.meta[_ngcontent-%COMP%]{gap:1rem}.section-title[_ngcontent-%COMP%]{font-weight:700;font-size:.95rem;color:hsl(var(--bc))}.body-text[_ngcontent-%COMP%]{color:hsl(var(--bc) / .85)}.text-subtle[_ngcontent-%COMP%]{color:hsl(var(--bc) / .6)}.tag-chip[_ngcontent-%COMP%]{background:hsl(var(--b2));color:hsl(var(--bc) / .9);padding:.35rem .65rem;border-radius:999px;font-size:.85rem;border:1px solid hsl(var(--b3))}.add-cart-bottom[_ngcontent-%COMP%]{margin-top:auto;align-self:flex-end}.add-cart[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield;appearance:textfield}.add-cart[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, .add-cart[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}"]})};var ga=()=>[1,2,3,4,5,6,7,8],po=(i,e)=>e.id,fa=(i,e)=>e.__viewKey;function ha(i,e){if(i&1){let t=k();a(0,"li")(1,"button",8),h("click",function(){let o=y(t).$implicit,c=d();return S(c.selectCategory(o.id))}),s(2),r()()}if(i&2){let t=e.$implicit,n=d();l(),G("bg-base-200",n.pendingCategory()===t.id)("font-semibold",n.pendingCategory()===t.id),l(),D(" ",t.name," ")}}function va(i,e){if(i&1){let t=k();a(0,"button",38),h("click",function(){let o=y(t).$implicit,c=d();return S(c.toggleTag(o.id))}),s(1),r()}if(i&2){let t=e.$implicit,n=d();b("ngClass",n.pendingTags().has(t.id)?"btn-outline border-base-200 bg-base-200 text-base-content font-semibold":"btn-outline border-base-200 text-base-content"),l(),D(" ",t.name," ")}}function ba(i,e){i&1&&f(0,"product-card-skeleton")}function Ca(i,e){i&1&&(a(0,"div",36),E(1,ba,1,0,"product-card-skeleton",null,q),r()),i&2&&(l(),I(W(0,ga)))}function xa(i,e){if(i&1&&(a(0,"p",37),s(1),r()),i&2){let t=d();l(),F(t.error())}}function _a(i,e){if(i&1&&f(0,"product-card",39),i&2){let t=e.$implicit;b("product",t)}}function ya(i,e){if(i&1&&(a(0,"div",36),E(1,_a,1,1,"product-card",39,fa),r(),a(3,"div",40),f(4,"pagination",41),r()),i&2){let t,n=d();l(),I(n.viewProducts()),l(3),b("pages",((t=n.productResponse())==null?null:t.pages)??0)("currentPage",n.paginationService.currentPage())}}function Sa(i,e){i&1&&(a(0,"p"),s(1,"No se encontraron productos"),r())}var St=class i{route=g(Ht);router=g(B);paginationService=g(In);categoryService=g(Wt);tagService=g(Sn);productResponse;loading;error;loadProducts;searchControl=new Ge("");lastQuery="";productPerPage=C(8);categories=C([]);tags=C([]);selectedCategory=C("all");pendingCategory=C("all");selectedTags=C(new Set);pendingTags=C(new Set);sortOption=C("relevance");viewProducts=C([]);hasPendingChanges=re(()=>{if(this.selectedCategory()!==this.pendingCategory())return!0;let e=this.selectedTags(),t=this.pendingTags();if(e.size!==t.size)return!0;for(let n of t)if(!e.has(n))return!0;return!1});constructor(){let{productResponse:e,loading:t,error:n,loadProducts:o}=Yt();this.productResponse=e,this.loading=t,this.error=n,this.loadProducts=o,this.loadFilters(),this.route.queryParamMap.subscribe(c=>{let u=c.get("q")??"";this.lastQuery=u;let w=c.get("categoryId")??"all",R=c.get("tagIds")??"",P=R?R.split(",").filter(Boolean):[],L=["relevance","price-asc","price-desc","title-asc","title-desc","featured"],A=c.get("sort")??"relevance",O=L.includes(A)?A:"relevance";this.searchControl.value!==u&&this.searchControl.setValue(u,{emitEvent:!1}),this.selectedCategory.set(w),this.pendingCategory.set(w);let de=new Set(P);this.selectedTags.set(de),this.pendingTags.set(new Set(de)),this.sortOption.set(O);let ae=this.productPerPage(),_e=(this.paginationService.currentPage()-1)*ae;this.runLoad(ge({query:u,offset:_e,limit:ae,categoryId:this.categoryIdForRequest(),tagIds:this.tagIdsForRequest()},this.sortParams())),this.loadTagsForCategory(this.pendingCategoryForRequest(),{resetSelection:!1})}),this.searchControl.valueChanges.pipe(He(400),sn()).subscribe(c=>{let u=c?.trim()??"";this.router.navigate([],{relativeTo:this.route,queryParams:{q:u||null},queryParamsHandling:"merge"}),this.paginationService.resetPage()})}updateProductsPerPage(e){this.productPerPage.set(e),this.paginationService.setCurrentPage(1),this.runLoad(ge({query:this.lastQuery,offset:0,limit:this.productPerPage(),categoryId:this.categoryIdForRequest(),tagIds:this.tagIdsForRequest()},this.sortParams()))}async loadFilters(){this.categoryService.getAll().subscribe(e=>this.categories.set(e)),this.loadTagsForCategory(this.categoryIdForRequest(),{resetSelection:!1})}selectCategory(e){let t=this.pendingCategory()===e?"all":e;this.pendingCategory.set(t),this.pendingTags.set(new Set),this.loadTagsForCategory(this.pendingCategoryForRequest(),{resetSelection:!0}),this.isDesktop()&&this.applyFilters()}resetTags(){this.selectedTags.set(new Set),this.pendingTags.set(new Set),this.paginationService.setCurrentPage(1),this.updateQueryParams()}toggleTag(e){let t=new Set(this.pendingTags());t.has(e)?t.delete(e):t.add(e),this.pendingTags.set(t)}applyFilters(){this.selectedCategory.set(this.pendingCategory()),this.selectedTags.set(new Set(this.pendingTags())),this.paginationService.setCurrentPage(1),this.updateQueryParams()}updateQueryParams(){let e=Array.from(this.selectedTags());this.router.navigate(["/products"],{queryParams:{q:this.lastQuery||null,categoryId:this.selectedCategory()==="all"?null:this.selectedCategory(),tagIds:e.length?e.join(","):null,sort:this.sortOption()==="relevance"?null:this.sortOption()},queryParamsHandling:"merge"})}loadTagsForCategory(e,t={}){let{resetSelection:n=!0}=t;this.tagService.getAll(e).subscribe(o=>{this.tags.set(o),n&&(this.selectedTags.set(new Set),this.pendingTags.set(new Set))})}categoryIdForRequest(){return this.selectedCategory()==="all"?void 0:this.selectedCategory()}pendingCategoryForRequest(){return this.pendingCategory()==="all"?void 0:this.pendingCategory()}tagIdsForRequest(){let e=Array.from(this.selectedTags());return e.length?e:void 0}isDesktop(){return typeof window<"u"&&window.matchMedia("(min-width: 1024px)").matches}onSortChange(e){this.sortOption.set(e),this.paginationService.setCurrentPage(1),this.updateQueryParams()}sortParams(){switch(this.sortOption()){case"price-asc":return{sortBy:"price",sortOrder:"ASC"};case"price-desc":return{sortBy:"price",sortOrder:"DESC"};case"title-asc":return{sortBy:"title",sortOrder:"ASC"};case"title-desc":return{sortBy:"title",sortOrder:"DESC"};case"featured":return{sortBy:"isFeatured",sortOrder:"DESC"};default:return{}}}async runLoad(e){await this.loadProducts(e);let n=(this.productResponse()?.products??[]).map((o,c)=>we(ge({},o),{__viewKey:`${this.sortOption()}-${this.paginationService.currentPage()}-${Date.now()}-${c}-${o.id}`}));this.viewProducts.set(n)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-products"]],decls:67,vars:23,consts:[["sortSelect",""],["selectPerPage",""],[1,"text-3xl","font-bold","mb-2","mt-6"],[1,"grid","grid-cols-1","lg:grid-cols-[18%_1fr]","gap-4","lg:gap-6","items-start"],[1,"hidden","lg:block","rounded-xl","border","border-base-200","bg-base-100/60","p-3","shadow-sm","backdrop-blur-sm"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-lg","font-semibold","text-base-content"],[1,"flex","flex-col","gap-2","max-h-[60vh]","overflow-auto","pr-1"],["type","button",1,"w-full","text-left","p-2","rounded-md","cursor-pointer","text-base-content","transition-colors","duration-200","hover:bg-base-200","hover:text-base-content",3,"click"],[1,"mt-6","space-y-2"],[1,"flex","items-center","justify-between"],[1,"font-semibold","text-base-content"],["type","button",1,"text-primary","text-xs","cursor-pointer",3,"click","disabled"],[1,"flex","flex-wrap","gap-2"],["type","button",1,"filter-tag","btn","btn-sm","rounded-md","min-h-9","px-4",3,"ngClass"],[1,"flex","gap-2"],["type","button",1,"btn","btn-sm","flex-1",3,"click","disabled"],[1,"flex","flex-col","gap-4"],[1,"flex","flex-wrap","gap-3","items-center","justify-between"],[1,"inline-flex","items-center","gap-2"],[1,"font-bold"],[1,"flex","flex-wrap","items-center","justify-end","gap-3"],[1,"flex","items-center","gap-2"],[1,"opacity-70"],[1,"select","select-bordered","select-sm","w-40","focus-within:outline-none","cursor-pointer",3,"change"],["value","relevance",3,"selected"],["value","price-asc",3,"selected"],["value","price-desc",3,"selected"],["value","title-asc",3,"selected"],["value","title-desc",3,"selected"],["value","featured",3,"selected"],[1,"select","select-bordered","select-sm","w-16","focus-within:outline-none","cursor-pointer",3,"change"],["value","8",3,"selected"],["value","20",3,"selected"],["value","50",3,"selected"],["value","100",3,"selected"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-4","mt-6","gap-4","sm:gap-6","md:gap-8"],[1,"text-red-500"],["type","button",1,"filter-tag","btn","btn-sm","rounded-md","min-h-9","px-4",3,"click","ngClass"],[3,"product"],[1,"flex","justify-center","mt-10"],[3,"pages","currentPage"]],template:function(t,n){if(t&1){let o=k();a(0,"h1",2),s(1,"Productos"),r(),a(2,"div",3)(3,"aside",4)(4,"div",5)(5,"h3",6),s(6,"Categor\xEDas"),r()(),a(7,"ul",7)(8,"li")(9,"button",8),h("click",function(){return y(o),S(n.selectCategory("all"))}),s(10," Todos "),r()(),E(11,ha,3,5,"li",null,po),r(),a(13,"div",9)(14,"div",10)(15,"h4",11),s(16,"Tags"),r(),a(17,"button",12),h("click",function(){return y(o),S(n.resetTags())}),s(18," Limpiar "),r()(),a(19,"div",13),E(20,va,2,2,"button",14,po),r(),a(22,"div",15)(23,"button",16),h("click",function(){return y(o),S(n.applyFilters())}),s(24," Aplicar "),r()()()(),a(25,"section",17)(26,"div",18)(27,"span",19),s(28," Total de productos "),a(29,"span",20),s(30),r()(),a(31,"div",21)(32,"div",22)(33,"label",23),s(34,"Ordenar"),r(),a(35,"select",24,0),h("change",function(){y(o);let u=Ai(36);return S(n.onSortChange(u.value))}),a(37,"option",25),s(38,"Relevancia"),r(),a(39,"option",26),s(40,"Precio: menor a mayor"),r(),a(41,"option",27),s(42,"Precio: mayor a menor"),r(),a(43,"option",28),s(44,"Nombre A-Z"),r(),a(45,"option",29),s(46,"Nombre Z-A"),r(),a(47,"option",30),s(48,"Destacados"),r()()(),a(49,"div",22)(50,"label",23),s(51,"Mostrar"),r(),a(52,"span",19)(53,"select",31,1),h("change",function(){y(o);let u=Ai(54);return S(n.updateProductsPerPage(+u.value))}),a(55,"option",32),s(56,"8"),r(),a(57,"option",33),s(58,"20"),r(),a(59,"option",34),s(60,"50"),r(),a(61,"option",35),s(62,"100"),r()()()()()(),x(63,Ca,3,1,"div",36),x(64,xa,2,1,"p",37),x(65,ya,5,2),x(66,Sa,2,0,"p"),r()()}if(t&2){let o,c,u;l(9),G("bg-base-200",n.pendingCategory()==="all")("font-semibold",n.pendingCategory()==="all"),l(2),I(n.categories()),l(6),G("opacity-50",!n.selectedTags().size&&!n.pendingTags().size),b("disabled",!n.selectedTags().size&&!n.pendingTags().size),l(3),I(n.tags()),l(3),b("disabled",!n.hasPendingChanges()),l(7),D(" ",((o=n.productResponse())==null?null:o.count)===null?0:(o=n.productResponse())==null?null:o.count," "),l(7),b("selected",n.sortOption()==="relevance"),l(2),b("selected",n.sortOption()==="price-asc"),l(2),b("selected",n.sortOption()==="price-desc"),l(2),b("selected",n.sortOption()==="title-asc"),l(2),b("selected",n.sortOption()==="title-desc"),l(2),b("selected",n.sortOption()==="featured"),l(8),b("selected",n.productPerPage()===8),l(2),b("selected",n.productPerPage()===20),l(2),b("selected",n.productPerPage()===50),l(2),b("selected",n.productPerPage()===100),l(2),_(n.loading()?63:-1),l(),_(n.error()?64:-1),l(),_(!n.loading()&&!n.error()&&(!((c=n.productResponse())==null||c.products==null)&&c.products.length)?65:-1),l(),_(!n.loading()&&!n.error()&&((u=n.productResponse())==null||u.products==null?null:u.products.length)===0?66:-1)}},dependencies:[Z,At,it,Tn,Ie,vn,bn,nt],styles:["[_nghost-%COMP%]{display:block}"]})};var wa=()=>[1,2,3];function Ea(i,e){if(i&1){let t=k();a(0,"div")(1,"p",9),s(2,"Texto buscado"),r(),a(3,"div",10)(4,"button",11),h("click",function(){y(t);let o=d(2);return S(o.clearSearchTextOnly())}),a(5,"span",12),s(6),r(),a(7,"span",13),f(8,"x-circle"),r()()()()}if(i&2){let t=d(2);l(6),F(t.searchTextRaw())}}function Ia(i,e){if(i&1){let t=k();a(0,"button",18),h("click",function(){y(t);let o=d(3);return S(o.clearIngredients())}),s(1," Limpiar "),r()}}function ka(i,e){if(i&1){let t=k();a(0,"button",11),h("click",function(){let o=y(t).$implicit,c=d(3);return S(c.removeIngredient(o))}),a(1,"span",12),s(2),r(),a(3,"span",13),f(4,"x-circle"),r()()}if(i&2){let t=e.$implicit;l(2),F(t)}}function Pa(i,e){if(i&1&&(a(0,"span",17),s(1),r()),i&2){let t=e.$implicit;l(),F(t)}}function Ta(i,e){if(i&1&&(a(0,"div")(1,"div",14)(2,"p",9),s(3,"Ingredientes"),r(),x(4,Ia,2,0,"button",15),r(),a(5,"div",10),E(6,ka,5,1,"button",16,q),E(8,Pa,2,1,"span",17,q),r()()),i&2){let t=d(2);l(4),_(t.queryIngredients().length?4:-1),l(2),I(t.queryIngredients()),l(2),I(t.extraMatchedIngredients())}}function Ma(i,e){if(i&1&&(a(0,"div",5),x(1,Ea,9,1,"div"),x(2,Ta,10,1,"div"),r()),i&2){let t=d();l(),_(t.searchTextRaw()?1:-1),l(),_(t.matchedIngredients().length||t.queryIngredients().length?2:-1)}}function Oa(i,e){i&1&&f(0,"recipe-skeleton")}function Fa(i,e){i&1&&(a(0,"div",6),E(1,Oa,1,0,"recipe-skeleton",null,q),r()),i&2&&(l(),I(W(0,wa)))}function Da(i,e){if(i&1&&(a(0,"p",7),s(1),r()),i&2){let t=d();l(),F(t.error())}}function Ra(i,e){if(i&1&&f(0,"recipe-card",19),i&2){let t=e.$implicit;b("recipe",t)}}function Na(i,e){if(i&1&&(a(0,"div",8),E(1,Ra,1,1,"recipe-card",19,te),r()),i&2){let t=d();l(),I(t.recipes())}}function Va(i,e){i&1&&(a(0,"p"),s(1,"No se encontraron recetas"),r())}var Oi=class i{recipeService=g(Ze);ingredientState=g(Pe);cdr=g(Ue);recipes=C(null);allRecipes=C([]);loading=C(!0);searching=C(!1);error=C(null);total=C(0);queryIngredients=C([]);matchedIngredients=re(()=>{let t=this.ingredientState.results()?.recipes??[],n=new Set;return t.forEach(o=>{(o.matchedIngredientNames??[]).forEach(c=>{let u=c?.trim();u&&n.add(u)})}),Array.from(n)});extraMatchedIngredients=re(()=>{let e=new Set(this.queryIngredients().map(t=>t.trim().toLowerCase()).filter(Boolean));return this.matchedIngredients().filter(t=>{let n=t.trim().toLowerCase();return n&&!e.has(n)})});searchTextRaw=re(()=>this.ingredientState.searchTextRaw());readyToShowEmpty=C(!1);constructor(){Ce(()=>{let e=this.ingredientState.results();if(e){this.recipes.set(e.recipes??[]),this.total.set(e.count??e.recipes?.length??0),this.loading.set(!1),this.searching.set(!1);return}this.readyToShowEmpty()&&(this.queryIngredients().length?(this.loading.set(!1),this.searching.set(!1)):(this.loading.set(!1),this.searching.set(!1),this.recipes.set(this.allRecipes()),this.total.set(this.allRecipes().length)))}),Ce(()=>{let e=this.ingredientState.ingredients();if(this.queryIngredients.set(e??[]),!e||!e.length){this.readyToShowEmpty()&&(this.loading.set(!1),this.searching.set(!1),this.recipes.set(this.allRecipes()),this.total.set(this.allRecipes().length));return}this.searching.set(!0),this.loading.set(!0)})}ngOnInit(){this.getRecipes()}async getRecipes(){this.loading.set(!0),this.error.set(null),this.readyToShowEmpty.set(!1);try{let e=await ue(this.recipeService.getAll());this.recipes.set(e),this.allRecipes.set(e??[]),this.total.set(e?.length??0),this.cdr.markForCheck()}catch{this.error.set("Error al cargar las recetas"),this.cdr.markForCheck()}finally{this.loading.set(!1),this.cdr.markForCheck(),this.readyToShowEmpty.set(!0)}}removeIngredient(e){let t=this.ingredientState.ingredients().filter(n=>n!==e);if(this.ingredientState.setIngredients(t),this.queryIngredients.set(t),!t.length){this.recipes.set(this.allRecipes()),this.total.set(this.allRecipes().length),this.searching.set(!1),this.loading.set(!1),this.ingredientState.setResults(null),this.cdr.markForCheck();return}this.fetchByIngredients(t)}clearIngredients(){this.ingredientState.setIngredients([]),this.ingredientState.setResults(null),this.ingredientState.setSearchTextSegments([]),this.ingredientState.setSearchTextRaw(""),this.queryIngredients.set([]),this.recipes.set(this.allRecipes()),this.total.set(this.allRecipes().length),this.searching.set(!1),this.loading.set(!1),this.cdr.markForCheck()}clearSearchTextOnly(){this.ingredientState.setSearchTextSegments([]),this.ingredientState.setSearchTextRaw("")}async fetchByIngredients(e){this.loading.set(!0),this.error.set(null),this.readyToShowEmpty.set(!1);try{let t=await ue(this.recipeService.searchByIngredients(e,{limit:10,offset:0}));this.recipes.set(t.recipes??[]),this.total.set(t.count??t.recipes?.length??0),this.ingredientState.setResults(t)}catch{this.error.set("Error al buscar recetas"),this.recipes.set([])}finally{this.loading.set(!1),this.searching.set(!1),this.cdr.markForCheck(),this.readyToShowEmpty.set(!0)}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-recipe"]],decls:13,vars:6,consts:[[1,"text-3xl","font-bold","mb-2","mt-6"],[1,"recipes-layout"],[1,"inline-flex","items-center","gap-3","text-base-content"],[1,"inline-flex","items-center","gap-2"],[1,"font-bold"],[1,"mt-4","space-y-4","border","border-base-200","bg-base-100/50","rounded-2xl","p-4","shadow-sm"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-5","mt-6"],[1,"text-red-500"],[1,"grid","grid-cols-1","mt-6","gap-4","sm:gap-5","md:gap-6"],[1,"text-xs","font-semibold","uppercase","tracking-wide","text-base-content/60","mb-2"],[1,"flex","flex-wrap","gap-2"],["type","button",1,"chip-pill",3,"click"],[1,"truncate"],[1,"inline-flex","items-center","justify-center","shrink-0"],[1,"flex","items-center","justify-between","gap-4"],["type","button",1,"text-xs","cursor-pointer","text-primary","font-semibold","underline","hover:text-primary-focus"],["type","button",1,"chip-pill"],[1,"chip-small","chip-small--disabled","text-base-content/70","border-base-200/70","truncate"],["type","button",1,"text-xs","cursor-pointer","text-primary","font-semibold","underline","hover:text-primary-focus",3,"click"],[3,"recipe"]],template:function(t,n){if(t&1&&(a(0,"h1",0),s(1,"Recetas"),r(),a(2,"section",1)(3,"div",2)(4,"span",3),s(5," Total de recetas "),a(6,"span",4),s(7),r()()(),x(8,Ma,3,2,"div",5),x(9,Fa,3,1,"div",6),x(10,Da,2,1,"p",7),x(11,Na,3,0,"div",8),x(12,Va,2,0,"p"),r()),t&2){let o,c;l(7),F(n.total()),l(),_(n.searchTextRaw()||n.queryIngredients().length?8:-1),l(),_(n.loading()?9:-1),l(),_(n.error()?10:-1),l(),_(!n.loading()&&!n.error()&&((o=n.recipes())!=null&&o.length)?11:-1),l(),_(!n.loading()&&n.readyToShowEmpty()&&!n.error()&&(!((c=n.recipes())!=null&&c.length)||((c=n.recipes())==null?null:c.length)===0)?12:-1)}},dependencies:[ot,rt,ke],styles:["[_nghost-%COMP%]{display:block}.recipes-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.recipes-bar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;align-items:center;justify-content:space-between}",".chips[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.chips--header[_ngcontent-%COMP%]{margin-top:.25rem}.chip-pill[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;padding:.35rem .65rem;border-radius:999px;background:hsl(var(--b2));border:1px solid hsl(var(--b3));color:hsl(var(--bc));font-size:.9rem;line-height:1.1;cursor:pointer;transition:background .15s ease,border-color .15s ease}.chip-small[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.3rem .65rem;border-radius:999px;background:hsl(var(--b2));border:1px solid hsl(var(--b3));color:hsl(var(--bc));font-size:.85rem}.chip-small--disabled[_ngcontent-%COMP%]{cursor:default}"]})};var Aa=()=>[1,2,3],La=(i,e)=>e.id;function Ba(i,e){i&1&&(a(0,"div",5),f(1,"div",6)(2,"div",7)(3,"div",8),a(4,"div",9),f(5,"div",10)(6,"div",11),r()())}function Ha(i,e){i&1&&(a(0,"div",1),E(1,Ba,7,0,"div",5,q),r()),i&2&&(l(),I(W(0,Aa)))}function za(i,e){if(i&1&&(a(0,"p",2),s(1),r()),i&2){let t=d();l(),F(t.error())}}function ja(i,e){if(i&1&&f(0,"contact-card",13),i&2){let t=e.$implicit;b("contact",t)}}function qa(i,e){if(i&1&&(a(0,"div",12),E(1,ja,1,1,"contact-card",13,La),r()),i&2){let t=e.$implicit;l(),I(t)}}function $a(i,e){if(i&1&&(a(0,"div",4),E(1,qa,3,0,"div",12,te),r()),i&2){let t=d();l(),I(t.rowsFormatted())}}function Ua(i,e){i&1&&(a(0,"p"),s(1,"No hay contactos para mostrar"),r())}var Fi=class i{contactService=g(Zt);contacts=C(null);loading=C(!0);error=C(null);async getContacts(){this.loading.set(!0),this.error.set(null);try{let e=await ue(this.contactService.getAll());this.contacts.set(e)}catch{this.error.set("Error al cargar los contactos")}finally{this.loading.set(!1)}}ngOnInit(){this.getContacts()}rowsFormatted(){let e=this.contacts()||[],t=[];for(let n=0;n<e.length;)(e.length-n)%2===1?(t.push([e[n]]),n+=1):(t.push(e.slice(n,n+2)),n+=2);return t}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-contact"]],decls:7,vars:4,consts:[[1,"text-3xl","font-bold","mb-6","mt-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mt-6"],[1,"text-red-500"],[1,"flex","flex-col","items-center","justify-center","min-h-[50vh]"],[1,"flex","flex-col","gap-12","mt-6","w-full"],[1,"skeletor-card","p-5","space-y-4"],[1,"skeletor-title"],[1,"skeletor-line","w-5/6"],[1,"skeletor-line","w-2/3"],[1,"flex","items-center","gap-3"],[1,"skeletor-pill"],[1,"skeletor-pill","w-16"],[1,"flex","justify-center","gap-8","flex-wrap"],[3,"contact"]],template:function(t,n){if(t&1&&(a(0,"h1",0),s(1,"Contactos"),r(),x(2,Ha,3,1,"div",1),x(3,za,2,1,"p",2),a(4,"div",3),x(5,$a,3,0,"div",4),r(),x(6,Ua,2,0,"p")),t&2){let o,c;l(2),_(n.loading()?2:-1),l(),_(n.error()?3:-1),l(2),_(!n.loading()&&!n.error()&&((o=n.contacts())!=null&&o.length)?5:-1),l(),_(!n.loading()&&!n.error()&&((c=n.contacts())==null?null:c.length)===0?6:-1)}},dependencies:[et],styles:["[_nghost-%COMP%]{display:block}"]})};var Di=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["terms-conditions"]],decls:53,vars:0,consts:[[1,"text-3xl","font-bold","mb-6","mt-6"],[1,"max-w-4xl","mx-auto","p-6","sm:p-8","lg:p-12"],[1,"text-gray-700","mb-4"],[1,"font-semibold"],[1,"text-2xl","font-semibold","mt-6","mb-3"],[1,"list-disc","list-inside","text-gray-700","mb-4","space-y-1"]],template:function(t,n){t&1&&(m(0,"h1",0),s(1,"T\xE9rminos y Condiciones"),p(),m(2,"section",1)(3,"p",2),s(4,"\xDAltima actualizaci\xF3n: 23 de octubre de 2025"),p(),m(5,"p",2),s(6," Al usar "),m(7,"span",3),s(8,"Gluten Free"),p(),s(9,", aceptas estos T\xE9rminos y Condiciones. Si no est\xE1s de acuerdo, por favor, no uses nuestro sitio. "),p(),m(10,"h2",4),s(11,"1. Uso del sitio"),p(),m(12,"p",2),s(13," El contenido de este sitio es solo para fines informativos y comerciales. No se permite copiar, reproducir o distribuir nuestro contenido sin autorizaci\xF3n. "),p(),m(14,"h2",4),s(15,"2. Registro y cuenta"),p(),m(16,"ul",5)(17,"li"),s(18,"Para realizar compras, debes crear una cuenta con datos v\xE1lidos y actualizados."),p(),m(19,"li"),s(20,"Eres responsable de mantener la confidencialidad de tu cuenta y contrase\xF1a."),p()(),m(21,"h2",4),s(22,"3. Pedidos y pagos"),p(),m(23,"ul",5)(24,"li"),s(25,"Todos los pedidos est\xE1n sujetos a disponibilidad de stock."),p(),m(26,"li"),s(27,"Los pagos se procesan mediante plataformas seguras de terceros."),p(),m(28,"li"),s(29,"Nos reservamos el derecho de cancelar pedidos por fraude, error o incumplimiento de estos T\xE9rminos."),p()(),m(30,"h2",4),s(31,"4. Env\xEDos y devoluciones"),p(),m(32,"p",2),s(33," Los env\xEDos se realizan seg\xFAn la informaci\xF3n proporcionada al momento de la compra. Las devoluciones y cambios est\xE1n sujetos a nuestra "),m(34,"span",3),s(35,"Pol\xEDtica de Devoluciones"),p(),s(36,", disponible en el sitio. "),p(),m(37,"h2",4),s(38,"5. Responsabilidad"),p(),m(39,"p",2),s(40," Hacemos todo lo posible para que la informaci\xF3n del sitio sea precisa, pero no garantizamos que sea completa o libre de errores. Gluten Free no ser\xE1 responsable por da\xF1os indirectos, p\xE9rdida de datos o lucro cesante derivados del uso del sitio. "),p(),m(41,"h2",4),s(42,"6. Propiedad intelectual"),p(),m(43,"p",2),s(44," Todos los contenidos (textos, im\xE1genes, logos, marcas) son propiedad de Gluten Free o de terceros con autorizaci\xF3n. No puedes usar nuestros contenidos sin permiso expl\xEDcito. "),p(),m(45,"h2",4),s(46,"7. Modificaciones"),p(),m(47,"p",2),s(48," Nos reservamos el derecho de actualizar estos T\xE9rminos en cualquier momento. La versi\xF3n m\xE1s reciente estar\xE1 publicada en el sitio con la fecha de actualizaci\xF3n. "),p(),m(49,"h2",4),s(50,"8. Ley aplicable"),p(),m(51,"p",2),s(52," Estos T\xE9rminos se rigen por las leyes de Paraguay. Cualquier disputa se resolver\xE1 ante los tribunales competentes de Paraguay. "),p()())},styles:["[_nghost-%COMP%]{display:block}"]})};var Ri=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["privacy-policies"]],decls:75,vars:0,consts:[[1,"text-3xl","font-bold","mb-6","mt-6"],[1,"max-w-4xl","mx-auto","p-6","sm:p-8","lg:p-12"],[1,"text-gray-700","mb-4"],[1,"font-semibold"],[1,"text-2xl","font-semibold","mt-6","mb-3"],[1,"list-disc","list-inside","text-gray-700","mb-4","space-y-1"],["href","mailto:contacto@egf.com",1,"text-blue-600","underline"]],template:function(t,n){t&1&&(m(0,"h1",0),s(1,"Pol\xEDtica de Privacidad"),p(),m(2,"section",1)(3,"p",2),s(4,"\xDAltima actualizaci\xF3n: 23 de octubre de 2025"),p(),m(5,"p",2),s(6," En "),m(7,"span",3),s(8,"Gluten Free"),p(),s(9,", respetamos tu privacidad y nos comprometemos a proteger tus datos personales. Esta Pol\xEDtica de Privacidad explica c\xF3mo recopilamos, usamos y protegemos la informaci\xF3n que nos proporcionas al visitar nuestro sitio web o realizar compras. "),p(),m(10,"h2",4),s(11,"1. Informaci\xF3n que recopilamos"),p(),m(12,"ul",5)(13,"li")(14,"strong"),s(15,"Datos personales:"),p(),s(16," nombre, correo electr\xF3nico, direcci\xF3n de env\xEDo y facturaci\xF3n, n\xFAmero de tel\xE9fono."),p(),m(17,"li")(18,"strong"),s(19,"Informaci\xF3n de pago:"),p(),s(20," datos de tarjeta de cr\xE9dito/d\xE9bito o plataformas de pago (procesadas por terceros seguros)."),p(),m(21,"li")(22,"strong"),s(23,"Informaci\xF3n de uso:"),p(),s(24," historial de compras, productos favoritos, preferencias de navegaci\xF3n y comportamiento en el sitio."),p()(),m(25,"h2",4),s(26,"2. C\xF3mo usamos tu informaci\xF3n"),p(),m(27,"ul",5)(28,"li"),s(29,"Procesar y gestionar tus pedidos."),p(),m(30,"li"),s(31,"Mejorar tu experiencia en el sitio y personalizar recomendaciones."),p(),m(32,"li"),s(33,"Enviarte actualizaciones sobre tus pedidos o promociones, si has dado tu consentimiento."),p(),m(34,"li"),s(35,"Cumplir con obligaciones legales y fiscales."),p()(),m(36,"h2",4),s(37,"3. C\xF3mo compartimos tu informaci\xF3n"),p(),m(38,"p",2),s(39," No vendemos ni alquilamos tus datos personales. Solo compartimos informaci\xF3n cuando: "),p(),m(40,"ul",5)(41,"li"),s(42,"Es necesario para procesar tu pago y env\xEDo con terceros confiables."),p(),m(43,"li"),s(44,"La ley nos obliga a divulgar informaci\xF3n."),p(),m(45,"li"),s(46,"Protegemos nuestros derechos legales o la seguridad de los usuarios."),p()(),m(47,"h2",4),s(48,"4. Seguridad de los datos"),p(),m(49,"p",2),s(50," Implementamos medidas t\xE9cnicas y organizativas para proteger tus datos contra acceso no autorizado, p\xE9rdida o alteraci\xF3n. Sin embargo, ning\xFAn sistema es 100% seguro, y no podemos garantizar seguridad absoluta. "),p(),m(51,"h2",4),s(52,"5. Tus derechos"),p(),m(53,"p",2),s(54," Puedes solicitar: "),p(),m(55,"ul",5)(56,"li"),s(57,"Acceder, corregir o eliminar tus datos personales."),p(),m(58,"li"),s(59,"Retirar tu consentimiento para recibir comunicaciones de marketing."),p(),m(60,"li"),s(61,"Oponerte al tratamiento de tus datos en ciertos casos."),p()(),m(62,"p",2),s(63,"Para ejercer tus derechos, cont\xE1ctanos en "),m(64,"a",6),s(65,"contacto@egf.com"),p(),s(66,"."),p(),m(67,"h2",4),s(68,"6. Cookies"),p(),m(69,"p",2),s(70," Usamos cookies y tecnolog\xEDas similares para mejorar la funcionalidad del sitio, analizar tr\xE1fico y personalizar contenido. Puedes configurar tu navegador para rechazar cookies, aunque algunas funcionalidades pueden verse afectadas. "),p(),m(71,"h2",4),s(72,"7. Cambios en la Pol\xEDtica"),p(),m(73,"p",2),s(74," Podemos actualizar esta pol\xEDtica peri\xF3dicamente. Te recomendamos revisarla ocasionalmente. La fecha de \u201C\xDAltima actualizaci\xF3n\u201D indica la versi\xF3n vigente. "),p()())},styles:["[_nghost-%COMP%]{display:block}"]})};var uo=async()=>{let i=g(Y),e=g(B);return await ue(i.checkStatus())?!0:e.createUrlTree(["/"])};function Qa(i,e){if(i&1&&f(0,"cart-items",13),i&2){let t=d();b("cartItems",t)}}function Ga(i,e){i&1&&(a(0,"div",14)(1,"p",15),s(2,"Tu carrito est\xE1 vac\xEDo"),r(),a(3,"p",16),s(4," A\xFAn no agregaste productos. Explora nuestro cat\xE1logo y comienza tu compra. "),r(),a(5,"a",17),s(6,"Ver productos"),r()())}function Wa(i,e){i&1&&x(0,Qa,1,1,"cart-items",13)(1,Ga,7,0,"div",14),i&2&&_(e.length>0?0:1)}var Ni=class i{cartService=g(le);authService=g(Y);configurationService=g(X);router=g(B);cartItems$=this.cartService.cart$;subtotal$=this.cartItems$.pipe(Q(e=>e.reduce((t,n)=>t+(n.product?.price??0)*n.quantity,0)));shipping$=this.subtotal$.pipe(Q(e=>(e>0,0)));total$=rn([this.subtotal$,this.shipping$]).pipe(Q(([e,t])=>e+t));goToBuy(){if(!this.authService.isAuthenticated()){this.configurationService.openSidebar("auth");return}this.router.navigateByUrl("/checkout")}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-cart"]],decls:36,vars:21,consts:[[1,"text-3xl","font-bold"],[1,"grid","gap-6","items-start","lg:grid-cols-[minmax(0,2.4fr)_minmax(0,1.2fr)]"],[1,"bg-base-100","border","border-base-300/50","rounded-2xl","shadow-sm","p-4","md:p-6"],[1,"w-full","bg-base-100","border","border-base-300/60","rounded-2xl","shadow-md","p-4","md:p-6","h-fit","lg:sticky","lg:top-24","space-y-4"],[1,"flex","items-center","justify-between"],[1,"text-xl","font-semibold"],[1,"space-y-3"],[1,"flex","items-center","justify-between","text-base"],[1,"text-base-content/70"],[1,"font-semibold"],[1,"divider","my-2"],[1,"flex","items-center","justify-between","text-lg","font-bold"],["type","button",1,"btn","btn-primary","w-full","mt-4",3,"click","disabled"],[3,"cartItems"],[1,"flex","flex-col","items-center","justify-center","text-center","py-12","space-y-4"],[1,"text-lg","font-semibold"],[1,"text-base-content/70","max-w-md"],["routerLink","/products",1,"btn","btn-primary"]],template:function(t,n){if(t&1&&(a(0,"h1",0),s(1,"Carrito de compras"),r(),a(2,"div",1)(3,"div",2),x(4,Wa,2,1),V(5,"async"),r(),a(6,"aside",3)(7,"div",4)(8,"h2",5),s(9,"Resumen"),r()(),a(10,"div",6)(11,"div",7)(12,"span",8),s(13,"Subtotal"),r(),a(14,"span",9),s(15),V(16,"async"),V(17,"guaranies"),r()(),a(18,"div",7)(19,"span",8),s(20,"Env\xEDo"),r(),a(21,"span",9),s(22),V(23,"async"),V(24,"guaranies"),r()(),f(25,"div",10),a(26,"div",11)(27,"span"),s(28,"Total"),r(),a(29,"span"),s(30),V(31,"async"),V(32,"guaranies"),r()()(),a(33,"button",12),V(34,"async"),h("click",function(){return n.goToBuy()}),s(35," Ir a comprar "),r()()()),t&2){let o,c;l(4),_((o=H(5,5,n.cartItems$))?4:-1,o),l(11),F(H(17,9,H(16,7,n.subtotal$)??0)),l(7),F(H(24,13,H(23,11,n.shipping$)??0)),l(8),F(H(32,17,H(31,15,n.total$)??0)),l(3),b("disabled",(((c=H(34,19,n.cartItems$))==null?null:c.length)??0)===0)}},dependencies:[Z,Ye,K,Lt,ve],styles:["[_nghost-%COMP%]{display:block}"]})};var Ji=(i,e)=>e.id;function Za(i,e){i&1&&f(0,"div",11)}function Ka(i,e){if(i&1){let t=k();a(0,"div",4)(1,"button",8),h("click",function(){let o=y(t).$implicit,c=d();return S(c.selectStep(o.id))}),a(2,"span",9),s(3),r(),a(4,"span",10),s(5),r()(),x(6,Za,1,0,"div",11),r()}if(i&2){let t=e.$implicit,n=d();l(),b("disabled",n.orderResponse()&&n.currentStep()===4&&t.id<4),l(),b("ngClass",n.currentStep()>=t.id?"bg-primary text-primary-content border-primary":"border-base-300 text-base-content/70 bg-base-100"),l(),D(" ",t.id," "),l(),b("ngClass",n.currentStep()>=t.id?"text-base-content":"text-base-content/60"),l(),D(" ",t.label," "),l(),_(t.id<n.steps.length?6:-1)}}function Ya(i,e){i&1&&(a(0,"span",21),s(1,"Predeterminado"),r())}function Xa(i,e){if(i&1){let t=k();a(0,"label",15)(1,"input",18),h("change",function(){let o=y(t).$implicit,c=d(3);return S(c.selectedShippingId.set(o.id))}),r(),a(2,"div",19)(3,"p",20),s(4),x(5,Ya,2,0,"span",21),r(),a(6,"p",22),s(7),r(),a(8,"p",22),s(9),r()()()}if(i&2){let t=e.$implicit,n=d(3);b("ngClass",n.selectedShippingId()===t.id?"border-primary bg-primary/5":"border-base-300"),l(),b("value",t.id)("checked",n.selectedShippingId()===t.id),l(3),D(" ",t.label," "),l(),_(t.isDefault?5:-1),l(2),Li("",t.fullName," \xB7 ",t.phone),l(2),mn("",t.street,", ",t.city,", ",t.state)}}function Ja(i,e){if(i&1){let t=k();a(0,"div",14),E(1,Xa,10,10,"label",15,Ji),r(),a(3,"div",16)(4,"button",17),h("click",function(){y(t);let o=d(2);return S(o.goToShippingData())}),s(5," Ir a Datos de entrega "),r()()}if(i&2){let t=d(2);l(),I(t.shippingAddresses())}}function es(i,e){if(i&1){let t=k();a(0,"div",13)(1,"p",23),s(2,"No hay direcciones de entrega por ahora."),r(),a(3,"button",24),h("click",function(){y(t);let o=d(2);return S(o.goToShippingData())}),s(4," Ir a Datos de entrega "),r()()}}function ts(i,e){if(i&1&&(a(0,"div",6)(1,"h2",12),s(2,"1. Datos de entrega"),r(),x(3,Ja,6,0)(4,es,5,0,"div",13),r()),i&2){let t=d();l(3),_(t.shippingAddresses().length>0?3:4)}}function is(i,e){if(i&1){let t=k();a(0,"label",15)(1,"input",25),h("change",function(){let o=y(t).$implicit,c=d(3);return S(c.chooseBilling(o.id))}),r(),a(2,"div",19)(3,"p",26),s(4),r(),a(5,"p",22),s(6),r(),a(7,"p",22),s(8),r()()()}if(i&2){let t=e.$implicit,n=d(3);b("ngClass",n.selectedBillingId()===t.id?"border-primary bg-primary/5":"border-base-300"),l(),b("value",t.id)("checked",n.selectedBillingId()===t.id),l(3),F(t.legalName),l(2),F(t.taxId),l(2),Li("",t.addressLine1," \xB7 ",t.city)}}function ns(i,e){if(i&1&&(a(0,"div",14),E(1,is,9,7,"label",15,Ji),r()),i&2){let t=d(2);l(),I(t.billingOptions())}}function os(i,e){if(i&1){let t=k();a(0,"div",13)(1,"p",23),s(2,"No hay datos de facturacion por ahora."),r(),a(3,"button",24),h("click",function(){y(t);let o=d(2);return S(o.goToBillingData())}),s(4," Ir a Datos de facturacion "),r()()}}function rs(i,e){if(i&1&&(a(0,"div",6)(1,"h2",12),s(2,"2. Facturacion"),r(),x(3,ns,3,0,"div",14)(4,os,5,0,"div",13),r()),i&2){let t=d();l(3),_(t.billingOptions().length>0?3:4)}}function as(i,e){if(i&1){let t=k();a(0,"div",31)(1,"button",34),h("click",function(){y(t);let o=d(2);return S(o.selectCod("cash"))}),s(2," Efectivo "),r(),a(3,"button",34),h("click",function(){y(t);let o=d(2);return S(o.selectCod("card"))}),s(4," Tarjeta "),r()()}if(i&2){let t=d(2);l(),b("ngClass",t.codOption()==="cash"?"btn-primary":"btn-outline"),l(2),b("ngClass",t.codOption()==="card"?"btn-primary":"btn-outline")}}function ss(i,e){i&1&&(a(0,"div",35)(1,"label",36)(2,"span",37),s(3,"Nombre en la tarjeta"),r(),f(4,"input",38),r(),a(5,"label",36)(6,"span",37),s(7,"Numero de tarjeta"),r(),f(8,"input",39),r(),a(9,"label",36)(10,"span",37),s(11,"Vencimiento"),r(),f(12,"input",40),r(),a(13,"label",36)(14,"span",37),s(15,"CVV"),r(),f(16,"input",41),r()(),a(17,"p",42),s(18," Este es solo un simulador para pruebas. No guardamos datos de tarjetas y no ingreses datos reales. "),r())}function ls(i,e){if(i&1){let t=k();a(0,"div",6)(1,"h2",12),s(2,"3. Pago"),r(),a(3,"div",27)(4,"label",28)(5,"input",29),h("change",function(){y(t);let o=d();return S(o.selectPayment("cod"))}),r(),a(6,"div")(7,"p",30),s(8,"Pago contra entrega"),r(),a(9,"p",22),s(10,"Pagas al recibir, en efectivo o con tarjeta."),r(),x(11,as,5,2,"div",31),r()(),a(12,"label",28)(13,"input",32),h("change",function(){y(t);let o=d();return S(o.selectPayment("online"))}),r(),a(14,"div",33)(15,"div")(16,"p",30),s(17,"Pago en linea"),r(),a(18,"p",22),s(19,"Simula un pago con tarjeta ingresando los datos."),r()(),x(20,ss,19,0),r()()()()}if(i&2){let t=d();l(5),b("checked",t.paymentMethod()==="cod"),l(6),_(t.paymentMethod()==="cod"?11:-1),l(2),b("checked",t.paymentMethod()==="online"),l(7),_(t.paymentMethod()==="online"?20:-1)}}function cs(i,e){if(i&1){let t=k();a(0,"div",6)(1,"h2",12),s(2,"4. Confirmacion"),r(),a(3,"div",43)(4,"p",23),s(5,"Tu pedido fue generado con el numero:"),r(),a(6,"p",44),s(7),r(),a(8,"p",22),s(9,"Revisa tu correo para mas detalles."),r()(),a(10,"div",45)(11,"button",46),h("click",function(){y(t);let o=d();return S(o.goToProducts())}),s(12,"Ver mas productos"),r(),a(13,"button",47),h("click",function(){y(t);let o=d();return S(o.goToOrders())}),s(14,"Ver mis pedidos"),r()()()}if(i&2){let t=d();l(7),F(t.orderNumber())}}function ds(i,e){if(i&1){let t=k();a(0,"button",48),h("click",function(){y(t);let o=d();return S(o.prevStep())}),s(1," Anterior "),r(),a(2,"button",49),h("click",function(){y(t);let o=d();return S(o.nextStep())}),s(3," Siguiente "),r()}if(i&2){let t=d();b("disabled",t.currentStep()===1||t.orderResponse()&&t.currentStep()===4),l(2),b("disabled",t.currentStep()===t.steps.length||t.currentStep()===3&&(t.submitting()||!t.selectedShippingId())||t.orderResponse()&&t.currentStep()===4)}}var Vi=class i{router=g(B);accountService=g(Mn);cartService=g(le);steps=[{id:1,label:"Entrega"},{id:2,label:"Facturacion"},{id:3,label:"Pago"},{id:4,label:"Confirmar"}];currentStep=C(1);shippingAddresses=C([]);billingOptions=C([]);selectedShippingId=C(null);selectedBillingId=C(null);paymentMethod=C("cod");codOption=C("cash");orderResponse=C(null);submitting=C(!1);ngOnInit(){this.loadShippingAddresses(),this.loadBillingProfiles()}selectStep(e){this.orderResponse()&&this.currentStep()===4&&e<4||e===4&&!this.orderResponse()||this.currentStep.set(e)}nextStep(){let e=this.currentStep();if(!(this.orderResponse()&&e===4)){if(e===3){this.submitCheckout();return}this.currentStep.update(t=>Math.min(t+1,this.steps.length))}}prevStep(){this.orderResponse()&&this.currentStep()===4||this.currentStep.update(e=>Math.max(e-1,1))}chooseBilling(e){this.selectedBillingId.set(e)}selectPayment(e){this.paymentMethod.set(e)}selectCod(e){this.codOption.set(e)}goToOrders(){this.router.navigateByUrl("/user/orders")}goToProducts(){this.router.navigateByUrl("/products")}goToBillingData(){this.router.navigateByUrl("/user/billing")}goToShippingData(){this.router.navigateByUrl("/user/directions")}loadShippingAddresses(){this.accountService.getAddresses().subscribe({next:e=>{this.shippingAddresses.set(e??[]);let t=e?.find(n=>n.isDefault)??e?.[0];this.selectedShippingId.set(t?.id??null)}})}loadBillingProfiles(){this.accountService.getBillingProfiles().subscribe({next:e=>{this.billingOptions.set(e??[]);let t=e?.find(n=>n.isDefault)??e?.[0];this.selectedBillingId.set(t?.id??null)}})}submitCheckout(){if(this.submitting())return;let e=this.selectedShippingId();if(!e){alert("Selecciona una direccion de entrega");return}let t={shippingAddressId:e,billingProfileId:this.selectedBillingId()??void 0};this.submitting.set(!0),this.accountService.checkoutOrder(t).subscribe({next:n=>{this.orderResponse.set(n),this.currentStep.set(4),this.cartService.clearCart().subscribe({error:()=>{}})},error:()=>{},complete:()=>this.submitting.set(!1)})}orderNumber(){let e=this.orderResponse();return e?.orderNumber??e?.id??""}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-checkout"]],decls:16,vars:2,consts:[[1,"max-w-5xl","mx-auto","px-4","py-10","space-y-8"],[1,"text-3xl","font-bold","mb-2","mt-6"],[1,"text-base-content/70"],[1,"flex","items-center","gap-3","flex-wrap"],[1,"flex","items-center","gap-3"],[1,"bg-base-100","border","border-base-300/60","rounded-2xl","shadow-sm","p-4","md:p-6","space-y-6"],[1,"space-y-4"],[1,"flex","items-center","justify-between"],["type","button",1,"flex","items-center","gap-2","cursor-pointer",3,"click","disabled"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center","border","text-sm","font-semibold","transition-colors",3,"ngClass"],[1,"font-semibold",3,"ngClass"],[1,"hidden","md:block","w-16","h-px","bg-base-300"],[1,"text-xl","font-semibold"],[1,"rounded-xl","border","border-dashed","border-base-300","bg-base-200/40","p-8","space-y-3","text-center","flex","flex-col","items-center","justify-center"],[1,"grid","gap-3"],[1,"flex","items-start","gap-3","p-3","rounded-xl","border","cursor-pointer","transition-colors",3,"ngClass"],[1,"flex","justify-end"],["type","button",1,"btn","btn-ghost","btn-sm",3,"click"],["type","radio","name","shippingAddress",1,"radio","radio-primary","mt-1",3,"change","value","checked"],[1,"space-y-1"],[1,"font-semibold","text-base","flex","items-center","gap-2"],[1,"badge","badge-primary","badge-sm"],[1,"text-sm","text-base-content/70"],[1,"text-base-content/80"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],["type","radio","name","billingOption",1,"radio","radio-primary","mt-1",3,"change","value","checked"],[1,"font-semibold","text-base"],[1,"space-y-3"],[1,"flex","items-start","gap-3","p-3","rounded-xl","border","border-base-300","cursor-pointer"],["type","radio","name","paymentMethod","value","cod",1,"radio","radio-primary","mt-1",3,"change","checked"],[1,"font-semibold"],[1,"mt-3","flex","flex-wrap","gap-2"],["type","radio","name","paymentMethod","value","online",1,"radio","radio-primary","mt-1",3,"change","checked"],[1,"flex-1","space-y-3"],["type","button",1,"btn","btn-sm",3,"click","ngClass"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-3"],[1,"form-control","w-full"],[1,"label-text","text-sm","text-base-content/70"],["type","text","placeholder","Nombre y apellido",1,"input","input-bordered","w-full"],["type","text","inputmode","numeric","placeholder","0000 0000 0000 0000",1,"input","input-bordered","w-full"],["type","text","placeholder","MM/AA",1,"input","input-bordered","w-full"],["type","password","inputmode","numeric","placeholder","***",1,"input","input-bordered","w-full"],[1,"text-sm","text-red-600"],[1,"rounded-xl","border","border-base-300","bg-base-200/40","p-4","space-y-2"],[1,"text-2xl","font-bold","text-primary"],[1,"flex","flex-wrap","gap-3"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-outline",3,"click","disabled"],["type","button",1,"btn","btn-primary",3,"click","disabled"]],template:function(t,n){if(t&1&&(a(0,"section",0)(1,"div")(2,"h1",1),s(3,"Proceso de compra"),r(),a(4,"p",2),s(5,"Segui los pasos para completar tu pedido."),r()(),a(6,"div",3),E(7,Ka,7,6,"div",4,Ji),r(),a(9,"div",5),x(10,ts,5,1,"div",6)(11,rs,5,1,"div",6)(12,ls,21,4,"div",6)(13,cs,15,1,"div",6),r(),a(14,"div",7),x(15,ds,4,2),r()()),t&2){let o;l(7),I(n.steps),l(3),_((o=n.currentStep())===1?10:o===2?11:o===3?12:o===4?13:-1),l(5),_(n.currentStep()<4?15:-1)}},dependencies:[Z,At,Cn],styles:["[_nghost-%COMP%]{display:block}"]})};var go=()=>{let i=g(Y),e=g(le),t=g(B);return on(i.checkStatus()).pipe(fe(n=>n?e.loadCart(!0).pipe(Q(o=>(Array.isArray(o)?o:[]).length>0?!0:t.createUrlTree(["/cart"])),Mt(()=>j(t.createUrlTree(["/cart"])))):j(t.createUrlTree(["/auth/login"]))))};var ms=[{path:"",component:ci,children:[{path:"",title:"E-commerce Gluten Free",component:Pi},{path:"products",title:"Productos",component:St},{path:"product/:slug",title:"Producto",component:yt},{path:"recipes",title:"Recetas",component:Oi},{path:"contact",title:"Contacto",component:Fi},{path:"terms-conditions",title:"T\xE9rminos y condiciones",component:Di},{path:"privacy-policies",title:"Pol\xEDtica de privacidad",component:Ri},{path:"cart",title:"Carrito",component:Ni},{path:"checkout",title:"Checkout",component:Vi,canMatch:[go]},{path:"user",canMatch:[uo],loadChildren:()=>import("./chunk-33YPGHQ7.js")},{path:"**",component:Ti}]}],Ug=ms;export{Ug as default,ms as storeFrontRoutes};
