import{p as Y}from"./chunk-ZFQKFX5O.js";import{$ as G,$a as d,C as _,Fa as T,H as ce,Ha as he,Ia as O,J as g,M as b,P as z,Pa as C,Ua as fe,W as pe,Wa as J,Xa as Q,Y as le,Z as me,_ as de,aa as Z,ab as ve,ba as S,bb as be,ca as l,da as h,ea as I,fa as $,g as c,ga as R,h as oe,ha as ue,i as se,ia as X,ka as y,la as ge,ma as L,n as o,p as r,s as m,sa as K,ta as k,v as n,va as W,w as H,x as B,y as x,ya as w,z as V,za as E}from"./chunk-HVAOKWIU.js";var Ce=class a{static \u0275fac=function(t){return new(t||a)};static \u0275cmp=b({type:a,selectors:[["app-logo"]],decls:5,vars:0,consts:[["id","logo"],["routerLink","/",1,"text-lg","md:text-2xl","font-bold"],[1,"text-amber-500"]],template:function(t,i){t&1&&(l(0,"div",0)(1,"a",1),k(2," Gluten "),l(3,"span",2),k(4," Free"),h()()())},dependencies:[Q],styles:["[_nghost-%COMP%]{display:block}"]})};function Oe(a,e){if(a&1){let t=X();$(0,"a",2),ge("click",function(){H(t);let s=L().$implicit,p=L();return B(p.handleOnClick(s.routerLink))}),k(1),R()}if(a&2){let t=L().$implicit;g(),W(" ",t.label," ")}}function $e(a,e){if(a&1&&pe(0,Oe,2,1,"a",1),a&2){let t=e.$implicit,i=L();le(!t.adminOnly||i.authService.isAdmin()?0:-1)}}var te=class a{menuItems=O.required();authService=n(be);configurationService=n(Y);router=n(J);handleOnClick(e){this.configurationService.toggleSidebarItemsStatus("closed"),this.configurationService.toggleSidebarPageStatus("closed"),typeof e=="string"?this.router.navigateByUrl(e):this.router.navigate([e])}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=b({type:a,selectors:[["menu-items"]],inputs:{menuItems:[1,"menuItems"]},decls:3,vars:0,consts:[[1,"flex","flex-col","gap-2","px-4"],[1,"p-2","cursor-pointer","rounded-md","text-base-content","hover:bg-base-200","hover:text-base-content","transition-colors","duration-200"],[1,"p-2","cursor-pointer","rounded-md","text-base-content","hover:bg-base-200","hover:text-base-content","transition-colors","duration-200",3,"click"]],template:function(t,i){t&1&&($(0,"nav",0),G(1,$e,1,1,null,null,me),R()),t&2&&(g(),Z(i.menuItems()))},styles:["[_nghost-%COMP%]{display:block}"]})};var ie=class a{static \u0275fac=function(t){return new(t||a)};static \u0275cmp=b({type:a,selectors:[["x-circle"]],decls:3,vars:0,consts:[[1,"x-circle-btn","cursor-pointer","inline-flex","items-center","justify-center","p-2","rounded-full","transition-colors","duration-200","hover:bg-base-200","text-base-content"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"]],template:function(t,i){t&1&&($(0,"div",0),x(),$(1,"svg",1),ue(2,"path",2),R()())},styles:["[_nghost-%COMP%]{display:inline-flex}"]})};var ye=class a{menuItems=O.required();configurationService=n(Y);isOpen(){return this.configurationService.sidebarItemsStatus()==="open"}close(){this.configurationService.toggleSidebarItemsStatus("closed")}handleEscape(e){e.key==="Escape"&&this.isOpen()&&this.close()}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=b({type:a,selectors:[["sidebar-items"]],hostBindings:function(t,i){t&1&&y("keydown",function(p){return i.handleEscape(p)},ce)},inputs:{menuItems:[1,"menuItems"]},decls:5,vars:3,consts:[[1,"fixed","inset-0","bg-base-100","z-50","transform","transition-transform","duration-500","flex","flex-col","-translate-x-full"],[1,"flex","justify-end"],[1,"btn","btn-ghost",3,"click"],[3,"menuItems"]],template:function(t,i){t&1&&(l(0,"div",0)(1,"div",1)(2,"button",2),y("click",function(){return i.configurationService.toggleSidebarItemsStatus("closed")}),I(3,"x-circle"),h()(),I(4,"menu-items",3),h()),t&2&&(K("translate-x-0",i.isOpen()),g(4),S("menuItems",i.menuItems()))},dependencies:[te,ie],styles:["[_nghost-%COMP%]{display:block}"]})};var f=class a{loading=_(!1);success=_(!1);activateLoading(){this.loading.set(!0),this.success.set(!1)}deactivateLoading(){this.loading.set(!1)}activateSuccess(){this.loading.set(!1),this.success.set(!0),setTimeout(()=>this.success.set(!1),800)}static \u0275fac=function(t){return new(t||a)};static \u0275prov=m({token:a,factory:a.\u0275fac,providedIn:"root"})};var D=`${d.baseUrl}/contacts`,Fe={id:"new",title:"",phone:"",email:""},Pe=class a{http=n(C);contactsCache=new Map;toastService=n(f);getAll(){return this.contactsCache.size?c(Array.from(this.contactsCache.values())):this.http.get(D).pipe(r(e=>e.forEach(t=>this.contactsCache.set(t.id,t))))}getById(e){return e==="new"?c(Fe):this.contactsCache.has(e)?c(this.contactsCache.get(e)):this.http.get(`${D}/${e}`).pipe(r(t=>this.contactsCache.set(e,t)))}create(e){return this.toastService.activateLoading(),this.http.post(D,e).pipe(r(t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),o(()=>this.toastService.deactivateLoading()))}update(e,t){return this.toastService.activateLoading(),this.http.patch(`${D}/${e}`,t).pipe(r(async i=>{this.insertOrUpdateCache(i),this.toastService.activateSuccess()}),o(()=>this.toastService.deactivateLoading()))}delete(e){return this.toastService.activateLoading(),this.http.delete(`${D}/${e}`).pipe(r(async()=>{this.contactsCache.delete(e),this.toastService.activateSuccess()}),o(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.contactsCache.set(e.id,e)}static \u0275fac=function(t){return new(t||a)};static \u0275prov=m({token:a,factory:a.\u0275fac,providedIn:"root"})};var Se=class a{activateRoute=n(fe);router=n(J);currentPage=ve(this.activateRoute.queryParamMap.pipe(se(e=>e.get("page")?+e.get("page"):1),se(e=>isNaN(e)?1:e)),{initialValue:1});setCurrentPage(e){this.router.navigate([],{queryParams:{page:e},queryParamsHandling:"merge"})}resetPage(){this.router.navigate([],{queryParams:{page:null},queryParamsHandling:"merge"})}static \u0275fac=function(t){return new(t||a)};static \u0275prov=m({token:a,factory:a.\u0275fac,providedIn:"root"})};var F=`${d.baseUrl}/products`,je={id:"new",title:"",price:0,description:"",slug:"",stock:0,isFeatured:!1,tags:[],deleteAt:null,images:[],imageIds:[],user:{}},ae=class a{constructor(){}http=n(C);productsCache=new Map;productCache=new Map;toastService=n(f);getProducts(e={}){let t=d.cantProducts,{limit:i=t,offset:s=0,isFeatured:p=!1,categoryId:v,tagIds:M,query:P}=e,ne=p?"isFeatured":`${i}-${s}-${v??"all"}-${(M??[]).join(",")}-${P??""}`;if(this.productsCache.has(ne))return c(this.productsCache.get(ne));let j={limit:i,offset:s};return p!==void 0&&(j.isFeatured=p),v&&(j.categoryId=v),M&&M.length&&(j.tagIds=M),P&&(j.query=P),this.http.get(F,{params:j,responseType:"json"}).pipe(r(Te=>this.productsCache.set(ne,Te)))}searchProducts(e={}){let{query:t="",limit:i=d.cantProducts,offset:s=0,categoryId:p,tagIds:v,isFeatured:M}=e,P={query:t,limit:i,offset:s};return p&&(P.categoryId=p),v&&v.length&&(P.tagIds=v),M!==void 0&&(P.isFeatured=M),this.http.get(`${F}/search`,{params:P,responseType:"json"})}getProductByIdSlug(e){return e==="new"?c(je):this.productCache.has(e)?c(this.productCache.get(e)):this.http.get(`${F}/${e}`,{responseType:"json"}).pipe(r(i=>this.productCache.set(e,i)))}createProduct(e){return this.toastService.activateLoading(),this.http.post(`${F}`,e).pipe(r(t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),o(()=>this.toastService.deactivateLoading()))}updateProduct(e,t){return this.toastService.activateLoading(),this.http.patch(`${F}/${e}`,t).pipe(r(i=>{this.insertOrUpdateCache(i),this.toastService.activateSuccess()}),o(()=>this.toastService.deactivateLoading()))}deleteProduct(e){return this.toastService.activateLoading(),this.http.delete(`${F}/${e}`).pipe(r(()=>{this.productCache.delete(e),this.productsCache.clear(),this.toastService.activateSuccess()}),o(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.productCache.get(e.id)?(this.productCache.set(e.id,e),this.productsCache.forEach(i=>{i.products=i.products.map(s=>s.id===e.id?e:s)})):(this.productCache.set(e.id,e),this.productsCache.clear())}static \u0275fac=function(t){return new(t||a)};static \u0275prov=m({token:a,factory:a.\u0275fac,providedIn:"root"})};var U=`${d.baseUrl}/categories`,Re={id:"new",name:""},Ie=class a{http=n(C);toastService=n(f);categoriesCache=new Map;getAll(){return this.categoriesCache.size?c(Array.from(this.categoriesCache.values())):this.http.get(U).pipe(r(e=>e.forEach(t=>this.categoriesCache.set(t.id,t))))}getById(e){return e==="new"?c(Re):this.categoriesCache.has(e)?c(this.categoriesCache.get(e)):this.http.get(`${U}/${e}`).pipe(r(t=>this.categoriesCache.set(e,t)))}create(e){return this.toastService.activateLoading(),this.http.post(U,e).pipe(r(t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),o(()=>this.toastService.deactivateLoading()))}update(e,t){return this.toastService.activateLoading(),this.http.patch(`${U}/${e}`,t).pipe(r(i=>{this.insertOrUpdateCache(i),this.toastService.activateSuccess()}),o(()=>this.toastService.deactivateLoading()))}delete(e){return this.toastService.activateLoading(),this.http.delete(`${U}/${e}`).pipe(r(()=>{this.categoriesCache.delete(e),this.toastService.activateSuccess()}),o(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.categoriesCache.set(e.id,e)}static \u0275fac=function(t){return new(t||a)};static \u0275prov=m({token:a,factory:a.\u0275fac,providedIn:"root"})};var N=`${d.baseUrl}/tags`,Ee={id:"new",name:""},Le=class a{http=n(C);toastService=n(f);tagsCache=new Map;getAll(e){let t=e??"all";return this.tagsCache.has(t)?c(this.tagsCache.get(t)):this.http.get(N,{params:e?{categoryId:e}:void 0,responseType:"json"}).pipe(r(i=>this.tagsCache.set(t,i)))}getById(e){return e==="new"?c(Ee):this.http.get(`${N}/${e}`).pipe(r(t=>{this.tagsCache.clear(),this.tagsCache.set(t.id,[t])}))}create(e){return this.toastService.activateLoading(),this.http.post(N,e).pipe(r(t=>{this.tagsCache.clear(),this.toastService.activateSuccess()}),o(()=>this.toastService.deactivateLoading()))}update(e,t){return this.toastService.activateLoading(),this.http.patch(`${N}/${e}`,t).pipe(r(i=>{this.tagsCache.clear(),this.toastService.activateSuccess()}),o(()=>this.toastService.deactivateLoading()))}delete(e){return this.toastService.activateLoading(),this.http.delete(`${N}/${e}`).pipe(r(()=>{this.tagsCache.clear(),this.toastService.activateSuccess()}),o(()=>this.toastService.deactivateLoading()))}static \u0275fac=function(t){return new(t||a)};static \u0275prov=m({token:a,factory:a.\u0275fac,providedIn:"root"})};function Yt(){let a=n(ae),e=_(null),t=_(!0),i=_(null);async function s(p){t.set(!0),i.set(null);try{let v=p.query?await oe(a.searchProducts(p)):await oe(a.getProducts(p));e.set(v)}catch{i.set("Error al cargar los productos")}finally{t.set(!1)}}return{productResponse:e,loading:t,error:i,loadProducts:s}}var q=()=>[],De=()=>({page:1}),re=a=>({page:a});function Ue(a,e){if(a&1){let t=X();l(0,"button",14),y("click",function(){let s=H(t).$implicit,p=L();return B(p.goToPage(s))}),k(1),h()}if(a&2){let t=e.$implicit,i=L();K("btn-primary",t===i.activePage()),S("routerLink",w(5,q))("queryParams",E(6,re,t)),g(),W(" ",t," ")}}function Ne(a,e){a&1&&(l(0,"button",8),k(1,"0"),h())}var ke=class a{pages=O(0);currentPage=O(1);activePage=he(this.currentPage);totalPages=T(()=>Math.max(0,this.pages()??0));getPagesList=T(()=>{let e=this.totalPages();return e?Array.from({length:e},(t,i)=>i+1):[]});isFirstPage=T(()=>this.activePage()<=1);isLastPage=T(()=>this.activePage()>=this.totalPages()&&this.totalPages()>0);previousPage=T(()=>Math.max(1,this.activePage()-1));nextPage=T(()=>Math.min(this.totalPages(),this.activePage()+1));goToPage(e){if(!this.totalPages())return;let t=Math.min(Math.max(e,1),this.totalPages());this.activePage.set(t)}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=b({type:a,selectors:[["pagination"]],inputs:{pages:[1,"pages"],currentPage:[1,"currentPage"]},decls:18,vars:24,consts:[[1,"join","flex","justify-center","items-center"],["type","button","aria-label","Primera p\xE1gina","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"click","disabled","routerLink","queryParams"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-4"],["fill-rule","evenodd","d","M10.72 11.47a.75.75 0 0 0 0 1.06l7.5 7.5a.75.75 0 1 0 1.06-1.06L12.31 12l6.97-6.97a.75.75 0 0 0-1.06-1.06l-7.5 7.5Z","clip-rule","evenodd"],["fill-rule","evenodd","d","M4.72 11.47a.75.75 0 0 0 0 1.06l7.5 7.5a.75.75 0 1 0 1.06-1.06L6.31 12l6.97-6.97a.75.75 0 0 0-1.06-1.06l-7.5 7.5Z","clip-rule","evenodd"],["type","button","aria-label","P\xE1gina anterior","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"click","disabled","routerLink","queryParams"],["fill-rule","evenodd","d","M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z","clip-rule","evenodd"],["type","button","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"btn-primary","routerLink","queryParams"],["type","button","disabled","",1,"join-item","btn"],["type","button","aria-label","P\xE1gina siguiente","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"click","disabled","routerLink","queryParams"],["fill-rule","evenodd","d","M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z","clip-rule","evenodd"],["type","button","aria-label","\xDAltima p\xE1gina","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"click","disabled","routerLink","queryParams"],["fill-rule","evenodd","d","M13.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L11.69 12 4.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z","clip-rule","evenodd"],["fill-rule","evenodd","d","M19.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06L17.69 12l-6.97-6.97a.75.75 0 0 1 1.06-1.06l7.5 7.5Z","clip-rule","evenodd"],["type","button","queryParamsHandling","merge",1,"join-item","btn","btn-sm","w-10",3,"click","routerLink","queryParams"]],template:function(t,i){t&1&&(l(0,"div",0)(1,"button",1),y("click",function(){return i.goToPage(1)}),x(),l(2,"svg",2),I(3,"path",3)(4,"path",4),h()(),V(),l(5,"button",5),y("click",function(){return i.goToPage(i.previousPage())}),x(),l(6,"svg",2),I(7,"path",6),h()(),G(8,Ue,2,8,"button",7,de,!1,Ne,2,0,"button",8),V(),l(11,"button",9),y("click",function(){return i.goToPage(i.nextPage())}),x(),l(12,"svg",2),I(13,"path",10),h()(),V(),l(14,"button",11),y("click",function(){return i.goToPage(i.totalPages())}),x(),l(15,"svg",2),I(16,"path",12)(17,"path",13),h()()()),t&2&&(g(),S("disabled",i.isFirstPage()||!i.totalPages())("routerLink",w(13,q))("queryParams",w(14,De)),g(4),S("disabled",i.isFirstPage()||!i.totalPages())("routerLink",w(15,q))("queryParams",E(16,re,i.previousPage())),g(3),Z(i.getPagesList()),g(3),S("disabled",i.isLastPage()||!i.totalPages())("routerLink",w(18,q))("queryParams",E(19,re,i.nextPage())),g(3),S("disabled",i.isLastPage()||!i.totalPages())("routerLink",w(21,q))("queryParams",E(22,re,i.totalPages()||1)))},dependencies:[Q],styles:["[_nghost-%COMP%]{display:block}"]})};var A=`${d.baseUrl}/recipes`,qe={id:"new",title:"",text:""},Me=class a{http=n(C);recipesCache=new Map;toastService=n(f);getAll(){return this.recipesCache.size?c(Array.from(this.recipesCache.values())):this.http.get(A).pipe(r(e=>e.forEach(t=>this.recipesCache.set(t.id,t))))}getById(e){return e==="new"?c(qe):this.recipesCache.has(e)?c(this.recipesCache.get(e)):this.http.get(`${A}/${e}`).pipe(r(t=>this.recipesCache.set(e,t)))}create(e){return this.toastService.activateLoading(),this.http.post(A,e).pipe(r(async t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),o(()=>this.toastService.deactivateLoading()))}update(e,t){return this.toastService.activateLoading(),this.http.patch(`${A}/${e}`,t).pipe(r(i=>{this.insertOrUpdateCache(i),this.toastService.activateSuccess()}),o(()=>this.toastService.deactivateLoading()))}delete(e){return this.toastService.activateLoading(),this.http.delete(`${A}/${e}`).pipe(r(async()=>{this.recipesCache.delete(e),this.toastService.activateSuccess()}),o(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.recipesCache.set(e.id,e)}static \u0275fac=function(t){return new(t||a)};static \u0275prov=m({token:a,factory:a.\u0275fac,providedIn:"root"})};var Ae=d.baseUrl,xe="assets/images/default-image.jpg",_e=class a{transform(e){if(!e||Array.isArray(e)&&e.length===0)return xe;let t=Array.isArray(e)?e[0]:e,i=this.resolveImageValue(t);return i?i.startsWith("assets/")||/^https?:\/\//.test(i)?i:`${Ae}/files/product/${i}`:xe}resolveImageValue(e){return e?typeof e=="string"?e:e.secureUrl||e.url||e.path||e.fileName||e.filename||e.name||e.id||null:null}static \u0275fac=function(t){return new(t||a)};static \u0275pipe=z({name:"productImage",type:a,pure:!0})};var we=class a{transform(e){return e==null?"0":"Gs. "+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}static \u0275fac=function(t){return new(t||a)};static \u0275pipe=z({name:"guaranies",type:a,pure:!0})};export{Ce as a,te as b,ie as c,ye as d,f as e,Pe as f,Se as g,ae as h,Ie as i,Le as j,_e as k,we as l,Yt as m,ke as n,Me as o};
