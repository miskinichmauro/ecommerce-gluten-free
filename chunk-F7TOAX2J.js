import{a as ye,b as Ce}from"./chunk-G6GKX4JE.js";import{a as Y,b as B,c as m,d as T,e as R,g as j,j as $,k as q,n as G,o as z}from"./chunk-ISPKCWPC.js";import{$ as ue,A as C,Aa as W,B as J,E as f,Ea as P,Fa as c,Ga as ae,Ha as pe,Ia as fe,L as a,O as g,Ta as A,Va as ge,Xa as x,Y as S,_ as w,_a as be,ba as U,ca as F,da as d,ea as n,eb as ve,fa as t,fb as X,ga as l,gb as k,hb as he,ka as K,kb as le,ma as h,nb as xe,oa as y,p as E,r as D,u as me,wa as o,x as p,xa as v,y as V,ya as Z,z as O,za as Q}from"./chunk-DDLIW6MR.js";var _e=()=>({exact:!0}),ee=class r{authService=p(xe);static \u0275fac=function(e){return new(e||r)};static \u0275cmp=g({type:r,selectors:[["app-user"]],decls:34,vars:4,consts:[[1,"space-y-4"],[1,"text-3xl","font-bold","mb-2","mt-6"],[1,"grid","grid-cols-1","lg:grid-cols-[18%_1fr]","gap-4","lg:gap-6","items-start"],[1,"hidden","lg:block","rounded-xl","border","border-base-200","bg-base-100/60","p-3","shadow-sm","backdrop-blur-sm"],[1,"flex","flex-col","gap-2"],["routerLink","/user/profile","routerLinkActive","bg-base-200 font-semibold",1,"w-full","text-left","p-2","rounded-md","cursor-pointer","text-base-content","transition-colors","duration-200","hover:bg-base-200","hover:text-base-content","block",3,"routerLinkActiveOptions"],["routerLink","/user/directions","routerLinkActive","bg-base-200 font-semibold",1,"w-full","text-left","p-2","rounded-md","cursor-pointer","text-base-content","transition-colors","duration-200","hover:bg-base-200","hover:text-base-content","block"],["routerLink","/user/billing","routerLinkActive","bg-base-200 font-semibold",1,"w-full","text-left","p-2","rounded-md","cursor-pointer","text-base-content","transition-colors","duration-200","hover:bg-base-200","hover:text-base-content","block"],["routerLink","/user/orders","routerLinkActive","bg-base-200 font-semibold",1,"w-full","text-left","p-2","rounded-md","cursor-pointer","text-base-content","transition-colors","duration-200","hover:bg-base-200","hover:text-base-content","block"],[1,"flex","flex-col","gap-4"],[1,"lg:hidden","rounded-xl","border","border-base-200","bg-base-100/60","p-3","shadow-sm","backdrop-blur-sm"]],template:function(e,s){e&1&&(n(0,"div",0)(1,"h1",1),o(2,"Mi Cuenta"),t(),n(3,"div",2)(4,"aside",3)(5,"ul",4)(6,"li")(7,"a",5),o(8," Mi perfil "),t()(),n(9,"li")(10,"a",6),o(11," Mis direcciones "),t()(),n(12,"li")(13,"a",7),o(14," Mis datos de facturaci\xF3n "),t()(),n(15,"li")(16,"a",8),o(17," Mis pedidos "),t()()()(),n(18,"main",9)(19,"div",10)(20,"ul",4)(21,"li")(22,"a",5),o(23," Mi perfil "),t()(),n(24,"li")(25,"a",6),o(26," Mis direcciones "),t()(),n(27,"li")(28,"a",7),o(29," Mis datos de facturaci\xF3n "),t()(),n(30,"li")(31,"a",8),o(32," Mis pedidos "),t()()()(),l(33,"router-outlet"),t()()()),e&2&&(a(7),d("routerLinkActiveOptions",P(2,_e)),a(15),d("routerLinkActiveOptions",P(3,_e)))},dependencies:[k,he,ve],styles:["[_nghost-%COMP%]{display:block}"]})};var _=`${le.baseUrl}/account`,Se=`${le.baseUrl}/orders`,b=class r{http=p(be);toast=p(ye);getProfile(){return this.http.get(`${_}/profile`)}updateProfile(i){return this.toast.activateLoading(),this.http.patch(`${_}/profile`,i).pipe(D(()=>this.toast.activateSuccess()),E(()=>this.toast.deactivateLoading()))}getAddresses(){return this.http.get(`${_}/addresses`)}createAddress(i){return this.toast.activateLoading(),this.http.post(`${_}/addresses`,i).pipe(D(()=>this.toast.activateSuccess()),E(()=>this.toast.deactivateLoading()))}updateAddress(i,e){return this.toast.activateLoading(),this.http.patch(`${_}/addresses/${i}`,e).pipe(D(()=>this.toast.activateSuccess()),E(()=>this.toast.deactivateLoading()))}deleteAddress(i){return this.toast.activateLoading(),this.http.delete(`${_}/addresses/${i}`).pipe(D(()=>this.toast.activateSuccess()),E(()=>this.toast.deactivateLoading()))}getBillingProfiles(){return this.http.get(`${_}/billing`)}createBilling(i){return this.toast.activateLoading(),this.http.post(`${_}/billing`,i).pipe(D(()=>this.toast.activateSuccess()),E(()=>this.toast.deactivateLoading()))}updateBilling(i,e){return this.toast.activateLoading(),this.http.patch(`${_}/billing/${i}`,e).pipe(D(()=>this.toast.activateSuccess()),E(()=>this.toast.deactivateLoading()))}deleteBilling(i){return this.toast.activateLoading(),this.http.delete(`${_}/billing/${i}`).pipe(D(()=>this.toast.activateSuccess()),E(()=>this.toast.deactivateLoading()))}getOrders(i=10,e=0){return this.http.get(`${Se}?limit=${i}&offset=${e}`)}getOrder(i){return this.http.get(`${Se}/${i}`)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=me({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ee=()=>["/user/billing","new"],De=r=>({edit:r}),ke=(r,i)=>i.id;function Ne(r,i){r&1&&(n(0,"p"),o(1,"Cargando datos de facturaci\xF3n..."),t())}function Ie(r,i){r&1&&(n(0,"p",6),o(1,"A\xFAn no agregaste datos de facturaci\xF3n."),t())}function Ue(r,i){r&1&&(C(),n(0,"svg",14),l(1,"path",21),t())}function Fe(r,i){r&1&&(C(),n(0,"svg",15),l(1,"path",22),t())}function Pe(r,i){if(r&1){let e=K();n(0,"article",7)(1,"div",8)(2,"h3",9),o(3),t()(),n(4,"p",10),o(5),t(),n(6,"p",10),o(7),t(),n(8,"p",11),o(9),t(),n(10,"div",12)(11,"button",13),h("click",function(){let u=V(e).$implicit,I=y(2);return O(I.toggleDefault(u))}),S(12,Ue,2,0,":svg:svg",14)(13,Fe,2,0,":svg:svg",15),t(),n(14,"a",16),C(),n(15,"svg",17),l(16,"path",18),t()(),J(),n(17,"button",19),h("click",function(){let u=V(e).$implicit,I=y(2);return O(I.remove(u))}),C(),n(18,"svg",17),l(19,"path",20),t()()()()}if(r&2){let e=i.$implicit;a(3),v(e.legalName),a(2),Z("RUC: ",e.taxId),a(2),Q("",e.email," \xB7 ",e.phone),a(2),W("",e.addressLine1,", ",e.city,", ",e.state," - ",e.country),a(3),w(e.isDefault?12:13),a(2),d("routerLink",P(11,Ee))("queryParams",c(12,De,e.id))}}function Le(r,i){if(r&1&&U(0,Pe,20,14,"article",7,ke),r&2){let e=y();F(e.profiles())}}var te=class r{accountService=p(b);profiles=f([]);loading=f(!0);ngOnInit(){this.load()}load(){this.loading.set(!0),this.accountService.getBillingProfiles().subscribe({next:i=>this.profiles.set(i??[]),error:()=>this.loading.set(!1),complete:()=>this.loading.set(!1)})}toggleDefault(i){this.loading.set(!0);let e=!(i.isDefault??!1);this.accountService.updateBilling(i.id,{isDefault:e}).subscribe({next:()=>this.load(),error:()=>this.loading.set(!1)})}remove(i){this.loading.set(!0),this.accountService.deleteBilling(i.id).subscribe({next:()=>this.load(),error:()=>this.loading.set(!1)})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=g({type:r,selectors:[["app-user-billings"]],decls:13,vars:1,consts:[[1,"space-y-4"],[1,"flex","items-center","justify-between","gap-3"],[1,"text-xl","font-bold"],[1,"text-sm","text-base-content/70"],["routerLink","/user/billing/new",1,"btn","btn-primary","btn-sm"],[1,"space-y-3"],[1,"text-base-content/70"],[1,"p-4","border","border-base-300","rounded-lg","bg-base-100","shadow-sm"],[1,"flex","flex-wrap","items-center","gap-2","justify-between"],[1,"font-semibold","text-lg"],[1,"text-sm","text-base-content/70","mt-1"],[1,"text-sm","text-base-content/80","mt-1"],[1,"flex","flex-wrap","items-center","gap-1","mt-3","justify-end"],["type","button","aria-label","Marcar como principal",1,"h-9","w-9","flex","items-center","justify-center","rounded-md","transition-colors","hover:bg-base-200",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-5","text-warning"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5","text-base-content"],["aria-label","Editar",1,"h-9","w-9","flex","items-center","justify-center","rounded-md","transition-colors","hover:bg-base-200",3,"routerLink","queryParams"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5"],["stroke-linecap","round","stroke-linejoin","round","d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"],["type","button","aria-label","Eliminar",1,"h-9","w-9","flex","items-center","justify-center","rounded-md","transition-colors","hover:bg-error/10","text-error",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"],["fill-rule","evenodd","d","M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z","clip-rule","evenodd"],["stroke-linecap","round","stroke-linejoin","round","d","M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"]],template:function(e,s){e&1&&(n(0,"section",0)(1,"div",1)(2,"div")(3,"h2",2),o(4,"Datos de facturaci\xF3n"),t(),n(5,"p",3),o(6,"Gestiona tus perfiles de factura."),t()(),n(7,"a",4),o(8,"Agregar nuevo"),t()(),n(9,"div",5),S(10,Ne,2,0,"p")(11,Ie,2,0,"p",6)(12,Le,2,0),t()()),e&2&&(a(10),w(s.loading()?10:s.profiles().length===0?11:12))},dependencies:[x,k],styles:["[_nghost-%COMP%]{display:block}"]})};var Me=()=>["/user/directions","new"],Ve=r=>({edit:r}),Oe=(r,i)=>i.id;function Ae(r,i){r&1&&(n(0,"p"),o(1,"Cargando direcciones..."),t())}function Be(r,i){r&1&&(n(0,"p",6),o(1,"A\xFAn no agregaste direcciones."),t())}function Te(r,i){r&1&&(C(),n(0,"svg",15),l(1,"path",22),t())}function Re(r,i){r&1&&(C(),n(0,"svg",16),l(1,"path",23),t())}function je(r,i){if(r&1){let e=K();n(0,"article",7)(1,"div",8)(2,"div",9)(3,"h3",10),o(4),t(),n(5,"p",11),o(6),t(),n(7,"p",12),o(8),t()(),n(9,"div",13)(10,"button",14),h("click",function(){let u=V(e).$implicit,I=y(2);return O(I.toggleDefault(u))}),S(11,Te,2,0,":svg:svg",15)(12,Re,2,0,":svg:svg",16),t(),n(13,"a",17),C(),n(14,"svg",18),l(15,"path",19),t()(),J(),n(16,"button",20),h("click",function(){let u=V(e).$implicit,I=y(2);return O(I.remove(u))}),C(),n(17,"svg",18),l(18,"path",21),t()()()()()}if(r&2){let e=i.$implicit;a(4),v(e.label),a(2),Q("",e.fullName," \xB7 ",e.phone),a(2),W("",e.street,", ",e.city,", ",e.state," - ",e.country),a(3),w(e.isDefault?11:12),a(2),d("routerLink",P(10,Me))("queryParams",c(11,Ve,e.id))}}function $e(r,i){if(r&1&&U(0,je,19,13,"article",7,Oe),r&2){let e=y();F(e.addresses())}}var ie=class r{accountService=p(b);addresses=f([]);loading=f(!0);ngOnInit(){this.load()}load(){this.loading.set(!0),this.accountService.getAddresses().subscribe({next:i=>this.addresses.set(i??[]),error:()=>this.loading.set(!1),complete:()=>this.loading.set(!1)})}toggleDefault(i){this.loading.set(!0);let e=!(i.isDefault??!1);this.accountService.updateAddress(i.id,{isDefault:e}).subscribe({next:()=>this.load(),error:()=>this.loading.set(!1)})}remove(i){this.loading.set(!0),this.accountService.deleteAddress(i.id).subscribe({next:()=>this.load(),error:()=>this.loading.set(!1)})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=g({type:r,selectors:[["app-user-directions"]],decls:13,vars:1,consts:[[1,"space-y-4"],[1,"flex","items-center","justify-between","gap-3"],[1,"text-xl","font-bold"],[1,"text-sm","text-base-content/70"],["routerLink","/user/directions/new",1,"btn","btn-primary","btn-sm"],[1,"space-y-3"],[1,"text-base-content/70"],[1,"p-4","border","border-base-300","rounded-lg","bg-base-100","shadow-sm"],[1,"flex","items-start","justify-between","gap-3"],[1,"space-y-1"],[1,"font-semibold","text-lg","leading-tight"],[1,"text-sm","text-base-content/70","leading-snug"],[1,"text-sm","text-base-content/80","leading-snug"],[1,"flex","items-center","gap-1"],["type","button","aria-label","Marcar como principal",1,"h-9","w-9","flex","items-center","justify-center","rounded-md","transition-colors","hover:bg-base-200",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"size-5","text-warning"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5","text-base-content"],["aria-label","Editar",1,"h-9","w-9","flex","items-center","justify-center","rounded-md","transition-colors","hover:bg-base-200",3,"routerLink","queryParams"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-5"],["stroke-linecap","round","stroke-linejoin","round","d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"],["type","button","aria-label","Eliminar",1,"h-9","w-9","flex","items-center","justify-center","rounded-md","transition-colors","hover:bg-error/10","text-error",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"],["fill-rule","evenodd","d","M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z","clip-rule","evenodd"],["stroke-linecap","round","stroke-linejoin","round","d","M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"]],template:function(e,s){e&1&&(n(0,"section",0)(1,"div",1)(2,"div")(3,"h2",2),o(4,"Mis direcciones"),t(),n(5,"p",3),o(6,"Revisa tus datos de env\xEDo."),t()(),n(7,"a",4),o(8,"Agregar nuevo"),t()(),n(9,"div",5),S(10,Ae,2,0,"p")(11,Be,2,0,"p",6)(12,$e,2,0),t()()),e&2&&(a(10),w(s.loading()?10:s.addresses().length===0?11:12))},dependencies:[x,k],styles:["[_nghost-%COMP%]{display:block}"]})};var M=r=>({"border-error focus:border-error":r}),ne=class r{fb=p(G);accountService=p(b);router=p(X);editingId=null;submitting=f(!1);form=this.fb.nonNullable.group({label:["",[m.required]],fullName:["",[m.required]],phone:["",[m.required]],street:["",[m.required]],city:["",[m.required]],state:["",[m.required]],country:["Paraguay",[m.required]],isDefault:[!1]});initialValue=this.form.getRawValue();ngOnInit(){let e=new URL(window.location.href).searchParams.get("edit");e&&(this.editingId=e,this.prefill(e))}prefill(i){this.submitting.set(!0),this.accountService.getAddresses().subscribe({next:e=>{let s=(e??[]).find(u=>u.id===i);s&&(this.form.patchValue(s),this.updateInitialValue())},complete:()=>this.submitting.set(!1),error:()=>this.submitting.set(!1)})}save(){if(this.form.invalid)return;this.submitting.set(!0);let i=this.form.getRawValue();(this.editingId?this.accountService.updateAddress(this.editingId,i):this.accountService.createAddress(i)).subscribe({next:()=>{this.updateInitialValue(),this.submitting.set(!1),this.router.navigate(["/user/directions"])},error:()=>this.submitting.set(!1)})}hasChanges(){return!this.isEqual(this.form.getRawValue(),this.initialValue)}updateInitialValue(){this.initialValue=this.form.getRawValue(),this.form.markAsPristine()}isEqual(i,e){let s=Object.keys(i);return s.length===Object.keys(e).length&&s.every(u=>i[u]===e[u])}isInvalid(i){let e=this.form.get(i);return!!e&&e.invalid&&(e.dirty||e.touched)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=g({type:r,selectors:[["app-user-directions-new"]],decls:43,vars:24,consts:[[1,"space-y-4"],[1,"flex","items-center","justify-between","gap-3"],[1,"text-xl","font-bold"],[1,"text-sm","text-base-content/70"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","bg-base-200/60","rounded-lg","p-5",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"font-semibold"],["formControlName","label","placeholder","Casa / Oficina",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","phone",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","fullName",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","state",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],[1,"md:col-span-2","flex","flex-col","gap-2"],["formControlName","street","placeholder","Calle y n\xFAmero",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","city",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","country",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],[1,"md:col-span-2","flex","items-center","gap-2","pt-1"],["type","checkbox","formControlName","isDefault",1,"checkbox","checkbox-primary"],[1,"md:col-span-2","flex","justify-end"],["type","submit",1,"btn","btn-primary","min-w-36",3,"disabled"]],template:function(e,s){e&1&&(n(0,"section",0)(1,"div",1)(2,"div")(3,"h2",2),o(4),t(),n(5,"p",3),o(6,"Completa los datos de env\xEDo."),t()()(),n(7,"form",4),h("ngSubmit",function(){return s.save()}),n(8,"div",5)(9,"span",6),o(10,"Etiqueta"),t(),l(11,"input",7),t(),n(12,"div",5)(13,"span",6),o(14,"Tel\xE9fono"),t(),l(15,"input",8),t(),n(16,"div",5)(17,"span",6),o(18,"Nombre completo"),t(),l(19,"input",9),t(),n(20,"div",5)(21,"span",6),o(22,"Departamento"),t(),l(23,"input",10),t(),n(24,"div",11)(25,"span",6),o(26,"Calle y n\xFAmero"),t(),l(27,"input",12),t(),n(28,"div",5)(29,"span",6),o(30,"Ciudad"),t(),l(31,"input",13),t(),n(32,"div",5)(33,"span",6),o(34,"Pa\xEDs"),t(),l(35,"input",14),t(),n(36,"label",15),l(37,"input",16),n(38,"span",6),o(39,"Usar como direcci\xF3n principal"),t()(),n(40,"div",17)(41,"button",18),o(42," Guardar "),t()()()()),e&2&&(a(4),v(s.editingId?"Editar direcci\xF3n":"Nueva direcci\xF3n"),a(3),d("formGroup",s.form),a(4),d("ngClass",c(10,M,s.isInvalid("label"))),a(4),d("ngClass",c(12,M,s.isInvalid("phone"))),a(4),d("ngClass",c(14,M,s.isInvalid("fullName"))),a(4),d("ngClass",c(16,M,s.isInvalid("state"))),a(4),d("ngClass",c(18,M,s.isInvalid("street"))),a(4),d("ngClass",c(20,M,s.isInvalid("city"))),a(4),d("ngClass",c(22,M,s.isInvalid("country"))),a(6),d("disabled",s.form.invalid||!s.hasChanges()||s.submitting()))},dependencies:[x,A,z,j,B,Y,T,R,$,q],styles:["[_nghost-%COMP%]{display:block}"]})};var N=r=>({"border-error focus:border-error":r}),re=class r{fb=p(G);accountService=p(b);router=p(X);editingId=null;submitting=f(!1);form=this.fb.nonNullable.group({legalName:["",[m.required]],taxId:["",[m.required]],email:["",[m.required,m.email]],phone:["",[m.required]],addressLine1:["",[m.required]],city:["",[m.required]],state:["",[m.required]],country:["Paraguay",[m.required]],isDefault:[!1]});initialValue=this.form.getRawValue();ngOnInit(){let e=new URL(window.location.href).searchParams.get("edit");e&&(this.editingId=e,this.prefill(e))}prefill(i){this.submitting.set(!0),this.accountService.getBillingProfiles().subscribe({next:e=>{let s=(e??[]).find(u=>u.id===i);s&&(this.form.patchValue(s),this.updateInitialValue())},complete:()=>this.submitting.set(!1),error:()=>this.submitting.set(!1)})}save(){if(this.form.invalid)return;this.submitting.set(!0);let i=this.form.getRawValue();(this.editingId?this.accountService.updateBilling(this.editingId,i):this.accountService.createBilling(i)).subscribe({next:()=>{this.updateInitialValue(),this.submitting.set(!1),this.router.navigate(["/user/billing"])},error:()=>this.submitting.set(!1)})}hasChanges(){return!this.isEqual(this.form.getRawValue(),this.initialValue)}updateInitialValue(){this.initialValue=this.form.getRawValue(),this.form.markAsPristine()}isEqual(i,e){let s=Object.keys(i);return s.length===Object.keys(e).length&&s.every(u=>i[u]===e[u])}isInvalid(i){let e=this.form.get(i);return!!e&&e.invalid&&(e.dirty||e.touched)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=g({type:r,selectors:[["app-user-billings-new"]],decls:48,vars:27,consts:[[1,"space-y-4"],[1,"flex","items-center","justify-between","gap-3"],[1,"text-xl","font-bold"],[1,"text-sm","text-base-content/70"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","bg-base-200/60","rounded-lg","p-5",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"font-semibold"],["formControlName","legalName",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["type","email","formControlName","email",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","taxId",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","phone",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","country",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","state",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],[1,"md:col-span-2","flex","flex-col","gap-2"],["formControlName","addressLine1",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["formControlName","city",1,"input","input-bordered","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],[1,"hidden","md:block"],[1,"md:col-span-2","flex","items-center","gap-2","pt-1"],["type","checkbox","formControlName","isDefault",1,"checkbox","checkbox-primary"],[1,"md:col-span-2","flex","justify-end","pt-1"],["type","submit",1,"btn","btn-primary","min-w-32",3,"disabled"]],template:function(e,s){e&1&&(n(0,"section",0)(1,"div",1)(2,"div")(3,"h2",2),o(4),t(),n(5,"p",3),o(6,"Completa los datos de facturaci\xF3n."),t()()(),n(7,"form",4),h("ngSubmit",function(){return s.save()}),n(8,"div",5)(9,"span",6),o(10,"Raz\xF3n social"),t(),l(11,"input",7),t(),n(12,"div",5)(13,"span",6),o(14,"Email"),t(),l(15,"input",8),t(),n(16,"div",5)(17,"span",6),o(18,"RUC"),t(),l(19,"input",9),t(),n(20,"div",5)(21,"span",6),o(22,"Tel\xE9fono"),t(),l(23,"input",10),t(),n(24,"div",5)(25,"span",6),o(26,"Pa\xEDs"),t(),l(27,"input",11),t(),n(28,"div",5)(29,"span",6),o(30,"Departamento"),t(),l(31,"input",12),t(),n(32,"div",13)(33,"span",6),o(34,"Direcci\xF3n"),t(),l(35,"input",14),t(),n(36,"div",5)(37,"span",6),o(38,"Ciudad"),t(),l(39,"input",15),t(),l(40,"div",16),n(41,"label",17),l(42,"input",18),n(43,"span",6),o(44,"Usar como perfil principal"),t()(),n(45,"div",19)(46,"button",20),o(47," Guardar "),t()()()()),e&2&&(a(4),v(s.editingId?"Editar facturaci\xF3n":"Nuevo perfil de facturaci\xF3n"),a(3),d("formGroup",s.form),a(4),d("ngClass",c(11,N,s.isInvalid("legalName"))),a(4),d("ngClass",c(13,N,s.isInvalid("email"))),a(4),d("ngClass",c(15,N,s.isInvalid("taxId"))),a(4),d("ngClass",c(17,N,s.isInvalid("phone"))),a(4),d("ngClass",c(19,N,s.isInvalid("country"))),a(4),d("ngClass",c(21,N,s.isInvalid("state"))),a(4),d("ngClass",c(23,N,s.isInvalid("addressLine1"))),a(4),d("ngClass",c(25,N,s.isInvalid("city"))),a(7),d("disabled",s.form.invalid||!s.hasChanges()||s.submitting()))},dependencies:[x,A,z,j,B,Y,T,R,$,q],styles:["[_nghost-%COMP%]{display:block}"]})};var ce=r=>({"border-error focus:border-error":r}),oe=class r{fb=p(G);accountService=p(b);submitting=f(!1);form=this.fb.nonNullable.group({fullName:["",[m.required,m.minLength(2)]],email:["",[m.required,m.email]],phone:["",[m.required]]});initialValue=this.form.getRawValue();ngOnInit(){this.fetchProfile()}fetchProfile(){this.submitting.set(!0),this.accountService.getProfile().subscribe({next:i=>{this.form.patchValue({fullName:i.fullName??"",email:i.email??"",phone:i.phone??""}),this.updateInitialValue()},error:()=>this.submitting.set(!1),complete:()=>this.submitting.set(!1)})}save(){this.form.invalid||(this.submitting.set(!0),this.accountService.updateProfile(this.form.getRawValue()).subscribe({next:()=>{this.updateInitialValue(),this.submitting.set(!1)},error:()=>this.submitting.set(!1)}))}hasChanges(){return!this.isEqual(this.form.getRawValue(),this.initialValue)}updateInitialValue(){this.initialValue=this.form.getRawValue(),this.form.markAsPristine()}isEqual(i,e){let s=Object.keys(i);return s.length===Object.keys(e).length&&s.every(u=>i[u]===e[u])}isInvalid(i){let e=this.form.get(i);return!!e&&e.invalid&&(e.dirty||e.touched)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=g({type:r,selectors:[["app-user-profile"]],decls:22,vars:11,consts:[[1,"space-y-4"],[1,"text-xl","font-bold"],[1,"text-sm","text-base-content/70"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","bg-base-200/60","rounded-lg","p-5","max-w-3xl",3,"ngSubmit","formGroup"],[1,"md:col-span-2","flex","flex-col","gap-2"],[1,"font-semibold"],["type","text","formControlName","fullName","placeholder","Tu nombre",1,"input","input-bordered","w-full","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],[1,"flex","flex-col","gap-2"],["type","email","formControlName","email","placeholder","tucorreo@mail.com",1,"input","input-bordered","w-full","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],["type","text","formControlName","phone","placeholder","+595...",1,"input","input-bordered","w-full","border","border-base-300","focus:outline-none","focus:ring-[1px]","focus:ring-base-300","focus:border-base-400",3,"ngClass"],[1,"md:col-span-2","flex","justify-end","pt-1"],["type","submit",1,"btn","btn-primary","min-w-32",3,"disabled"]],template:function(e,s){e&1&&(n(0,"section",0)(1,"div")(2,"h2",1),o(3,"Mi perfil"),t(),n(4,"p",2),o(5,"Actualiza tus datos personales."),t()(),n(6,"form",3),h("ngSubmit",function(){return s.save()}),n(7,"div",4)(8,"span",5),o(9,"Nombre completo"),t(),l(10,"input",6),t(),n(11,"div",7)(12,"span",5),o(13,"Email"),t(),l(14,"input",8),t(),n(15,"div",7)(16,"span",5),o(17,"Tel\xE9fono"),t(),l(18,"input",9),t(),n(19,"div",10)(20,"button",11),o(21," Guardar "),t()()()()),e&2&&(a(6),d("formGroup",s.form),a(4),d("ngClass",c(5,ce,s.isInvalid("fullName"))),a(4),d("ngClass",c(7,ce,s.isInvalid("email"))),a(4),d("ngClass",c(9,ce,s.isInvalid("phone"))),a(2),d("disabled",s.form.invalid||!s.hasChanges()||s.submitting()))},dependencies:[x,A,z,j,B,T,R,$,q],styles:["[_nghost-%COMP%]{display:block}"]})};var qe=(r,i)=>i.id;function Ge(r,i){r&1&&(n(0,"p"),o(1,"Cargando pedidos..."),t())}function ze(r,i){r&1&&(n(0,"div",3)(1,"p"),o(2,"A\xFAn no tienes pedidos."),t(),n(3,"a",5),o(4,"Ver productos"),t()())}function He(r,i){if(r&1&&(n(0,"li",13)(1,"span",14),o(2),t(),n(3,"span",15),o(4),t()()),r&2){let e=i.$implicit;a(2),v(e.name||"Producto"),a(2),Z("x",e.quantity||1)}}function Ze(r,i){if(r&1&&(n(0,"ul",12),U(1,He,5,2,"li",13,ue),t()),r&2){let e=y().$implicit;a(),F(e.items)}}function Je(r,i){if(r&1&&(n(0,"article",6)(1,"div",7)(2,"div")(3,"p",2),o(4),t(),n(5,"h3",8),o(6),t()(),n(7,"div",9)(8,"p",10),o(9),ae(10,"guaranies"),t(),n(11,"p",11),o(12),ae(13,"date"),t()()(),S(14,Ze,3,0,"ul",12),t()),r&2){let e=i.$implicit;a(4),Z("#",e.number||e.id),a(2),v(e.status||"Pendiente"),a(3),v(e.total?pe(10,5,e.total):"\u2014"),a(3),v(fe(13,7,e.createdAt,"short")),a(2),w(e.items!=null&&e.items.length?14:-1)}}function Ke(r,i){if(r&1&&(n(0,"div",4),U(1,Je,15,10,"article",6,qe),t()),r&2){let e=y();a(),F(e.orders())}}var se=class r{accountService=p(b);orders=f([]);loading=f(!0);ngOnInit(){this.loadOrders()}loadOrders(){this.loading.set(!0),this.accountService.getOrders(20,0).subscribe({next:i=>this.orders.set(i??[]),error:()=>this.orders.set([]),complete:()=>this.loading.set(!1)})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=g({type:r,selectors:[["app-user-recipes"]],decls:9,vars:1,consts:[[1,"space-y-4"],[1,"text-xl","font-bold"],[1,"text-sm","text-base-content/70"],[1,"text-base-content/70","space-y-3"],[1,"space-y-3"],["routerLink","/products",1,"btn","btn-primary","btn-sm"],[1,"p-4","border","border-base-300","rounded-lg","bg-base-100","shadow-sm"],[1,"flex","flex-wrap","items-center","justify-between","gap-2"],[1,"font-semibold","text-lg"],[1,"text-right"],[1,"font-semibold"],[1,"text-xs","text-base-content/70"],[1,"mt-3","space-y-2","text-sm","text-base-content/80"],[1,"flex","items-center","justify-between","gap-2"],[1,"truncate"],[1,"shrink-0","text-base-content/70"]],template:function(e,s){e&1&&(n(0,"section",0)(1,"div")(2,"h2",1),o(3,"Mis pedidos"),t(),n(4,"p",2),o(5,"Revisa tu historial de compras."),t()(),S(6,Ge,2,0,"p")(7,ze,5,0,"div",3)(8,Ke,3,0,"div",4),t()),e&2&&(a(6),w(s.loading()?6:s.orders().length===0?7:8))},dependencies:[x,k,ge,Ce],styles:["[_nghost-%COMP%]{display:block}"]})};var Qe=[{path:"",component:ee,children:[{path:"profile",component:oe},{path:"directions/new",component:ne},{path:"directions",component:ie},{path:"billing/new",component:re},{path:"billing",component:te},{path:"orders",component:se},{path:"**",redirectTo:"profile"}]}],li=Qe;export{li as default,Qe as userRoutes};
