import{k as N}from"./chunk-5XD2Q6YZ.js";import{a as h,b as se,c as ce}from"./chunk-6A3RBYYY.js";import{$ as H,Ba as oe,Ca as P,F as m,I as v,Ja as x,L as W,Na as ae,P as X,Pa as D,Qa as F,R as Y,S as Z,T as ee,U as O,V as L,W as R,X as l,Y as f,Z as B,_ as z,ba as $,da as j,ea as te,f as s,fa as b,g as K,h as q,k as p,l as o,la as I,ma as C,o as c,oa as T,r as n,s as _,sa as ie,t as w,ta as re,u as J,v as Q,y as d,za as ne}from"./chunk-XEIUSH7E.js";var U=class i{isDarkTheme=d(!1);static \u0275fac=function(t){return new(t||i)};static \u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})};var pe=class i{themeService=n(U);static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-logo"]],decls:5,vars:4,consts:[["id","logo"],["routerLink","/",1,"text-lg","md:text-2xl","font-bold"],[1,"text-blue-500"]],template:function(t,r){t&1&&(l(0,"div",0)(1,"a",1),C(2," Gluten "),l(3,"span",2),C(4," Free"),f()()()),t&2&&(m(),I("text-gray-800",r.themeService.isDarkTheme())("text-white",r.themeService.isDarkTheme()))},dependencies:[F],styles:["[_nghost-%COMP%]{display:block}"]})};function be(i,e){if(i&1){let t=$();z(0,"a",2),te("click",function(){_(t);let a=b().$implicit,g=b();return w(g.handleOnClick(a.routerLink))}),C(1),H()}if(i&2){let t=b().$implicit;m(),T(" ",t.label," ")}}function Ce(i,e){if(i&1&&X(0,be,2,1,"a",1),i&2){let t=e.$implicit,r=b();Y(!t.adminOnly||r.authService.isAdmin()?0:-1)}}var E=class i{menuItems=P.required();authService=n(ce);configurationService=n(N);router=n(D);handleOnClick(e){this.configurationService.toggleSidebarItemsStatus("closed"),this.configurationService.toggleSidebarPageStatus("closed"),typeof e=="string"?this.router.navigateByUrl(e):this.router.navigate([e])}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["menu-items"]],inputs:{menuItems:[1,"menuItems"]},decls:3,vars:0,consts:[[1,"flex","flex-col","gap-2","px-4"],[1,"p-2","cursor-pointer","rounded-md","hover:bg-gray-800","transition"],[1,"p-2","cursor-pointer","rounded-md","hover:bg-gray-800","transition",3,"click"]],template:function(t,r){t&1&&(z(0,"nav",0),O(1,Ce,1,1,null,null,Z),H()),t&2&&(m(),L(r.menuItems()))},styles:["[_nghost-%COMP%]{display:block}"]})};var me=class i{menuItems=P.required();configurationService=n(N);open(){return this.configurationService.sidebarItemsStatus()==="open"}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["sidebar-items"]],inputs:{menuItems:[1,"menuItems"]},decls:6,vars:5,consts:[[1,"fixed","inset-0","bg-base-100","z-50","transform","transition-transform","duration-500","flex","flex-col"],[1,"flex","justify-end"],[1,"btn","btn-ghost",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[3,"menuItems"]],template:function(t,r){t&1&&(l(0,"div",0)(1,"div",1)(2,"button",2),j("click",function(){return r.configurationService.toggleSidebarItemsStatus("closed")}),J(),l(3,"svg",3),B(4,"path",4),f()()(),Q(),B(5,"menu-items",5),f()),t&2&&(I("translate-x-0",r.open())("-translate-x-full",!r.open()),m(5),R("menuItems",r.menuItems()))},dependencies:[E],styles:["[_nghost-%COMP%]{display:block}"]})};var y=class i{loading=d(!1);success=d(!1);activateLoading(){this.loading.set(!0),this.success.set(!1)}deactivateLoading(){this.loading.set(!1)}activateSuccess(){this.loading.set(!1),this.success.set(!0),setTimeout(()=>this.success.set(!1),800)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})};var M=`${h.baseUrl}/contacts`,ye={id:"new",title:"",phone:"",email:""},le=class i{http=n(x);contactsCache=new Map;toastService=n(y);getAll(){return this.contactsCache.size?s(Array.from(this.contactsCache.values())):this.http.get(M).pipe(o(e=>e.forEach(t=>this.contactsCache.set(t.id,t))))}getById(e){return e==="new"?s(ye):this.contactsCache.has(e)?s(this.contactsCache.get(e)):this.http.get(`${M}/${e}`).pipe(o(t=>this.contactsCache.set(e,t)))}create(e){return this.toastService.activateLoading(),this.http.post(M,e).pipe(o(t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),p(()=>this.toastService.deactivateLoading()))}update(e,t){return this.toastService.activateLoading(),this.http.patch(`${M}/${e}`,t).pipe(o(async r=>{this.insertOrUpdateCache(r),this.toastService.activateSuccess()}),p(()=>this.toastService.deactivateLoading()))}delete(e){return this.toastService.activateLoading(),this.http.delete(`${M}/${e}`).pipe(o(async()=>{this.contactsCache.delete(e),this.toastService.activateSuccess()}),p(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.contactsCache.set(e.id,e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})};var ue=class i{activateRoute=n(ae);router=n(D);currentPage=se(this.activateRoute.queryParamMap.pipe(q(e=>e.get("page")?+e.get("page"):1),q(e=>isNaN(e)?1:e)),{initialValue:1});setPage(e){this.router.navigate([],{queryParams:{page:e},queryParamsHandling:"merge"})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})};var A=`${h.baseUrl}/products`,Pe={id:"new",title:"",price:0,unitOfMeasure:"",description:"",slug:"",stock:0,tags:[""],deleteAt:null,imagesName:[""],user:{}},V=class i{constructor(){}http=n(x);productsCache=new Map;productCache=new Map;toastService=n(y);getProducts(e={}){let t=h.cantProducts,{limit:r=t,offset:a=0,isFeatured:g=!1}=e,S=g?"isFeatured":`${r}-${a}`;return this.productsCache.has(S)?s(this.productsCache.get(S)):this.http.get(A,{params:{limit:r,offset:a,isFeatured:g},responseType:"json"}).pipe(o(ve=>this.productsCache.set(S,ve)))}getProductByIdSlug(e){return e==="new"?s(Pe):this.productCache.has(e)?s(this.productCache.get(e)):this.http.get(`${A}/${e}`,{responseType:"json"}).pipe(o(r=>this.productCache.set(e,r)))}createProduct(e){return this.toastService.activateLoading(),this.http.post(`${A}`,e).pipe(o(t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),p(()=>this.toastService.deactivateLoading()))}updateProduct(e,t){return this.toastService.activateLoading(),this.http.patch(`${A}/${e}`,t).pipe(o(async r=>{this.insertOrUpdateCache(r),this.toastService.activateSuccess()}),p(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.productCache.get(e.id)?(this.productCache.set(e.id,e),this.productsCache.forEach(r=>{r.products=r.products.map(a=>a.id===e.id?e:a)})):(this.productCache.set(e.id,e),this.productsCache.clear())}static \u0275fac=function(t){return new(t||i)};static \u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})};function Mt(){let i=n(V),e=d(null),t=d(!0),r=d(null);async function a(g){t.set(!0),r.set(null);try{let S=await K(i.getProducts(g));e.set(S)}catch{r.set("Error al cargar los productos")}finally{t.set(!1)}}return{productResponse:e,loading:t,error:r,loadProducts:a}}var Se=()=>[],Ie=i=>({page:i});function xe(i,e){if(i&1){let t=$();l(0,"button",3),j("click",function(){let a=_(t).$implicit,g=b();return w(g.activePage.set(a))}),C(1),f()}if(i&2){let t=e.$implicit,r=b();I("btn-primary",t===r.activePage()),R("routerLink",ie(5,Se))("queryParams",re(6,Ie,t)),m(),T(" ",t," ")}}function Me(i,e){i&1&&(l(0,"button",2),C(1,"0"),f())}var de=class i{pages=P(0);currentPage=P(1);activePage=oe(this.currentPage);getPagesList=ne(()=>Array.from({length:this.pages()},(e,t)=>t+1));static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["pagination"]],inputs:{pages:[1,"pages"],currentPage:[1,"currentPage"]},decls:4,vars:1,consts:[[1,"join","flex","justify-center","items-center"],[1,"join-item","btn",3,"btn-primary","routerLink","queryParams"],[1,"join-item","btn"],[1,"join-item","btn",3,"click","routerLink","queryParams"]],template:function(t,r){t&1&&(l(0,"div",0),O(1,xe,2,8,"button",1,ee,!1,Me,2,0,"button",2),f()),t&2&&(m(),L(r.getPagesList()))},dependencies:[F],styles:["[_nghost-%COMP%]{display:block}"]})};var k=`${h.baseUrl}/recipes`,ke={id:"new",title:"",text:""},fe=class i{http=n(x);recipesCache=new Map;toastService=n(y);getAll(){return this.recipesCache.size?s(Array.from(this.recipesCache.values())):this.http.get(k).pipe(o(e=>e.forEach(t=>this.recipesCache.set(t.id,t))))}getById(e){return e==="new"?s(ke):this.recipesCache.has(e)?s(this.recipesCache.get(e)):this.http.get(`${k}/${e}`).pipe(o(t=>this.recipesCache.set(e,t)))}create(e){return this.toastService.activateLoading(),this.http.post(k,e).pipe(o(async t=>{this.insertOrUpdateCache(t),this.toastService.activateSuccess()}),p(()=>this.toastService.deactivateLoading()))}update(e,t){return this.toastService.activateLoading(),this.http.patch(`${k}/${e}`,t).pipe(o(r=>{this.insertOrUpdateCache(r),this.toastService.activateSuccess()}),p(()=>this.toastService.deactivateLoading()))}delete(e){return this.toastService.activateLoading(),this.http.delete(`${k}/${e}`).pipe(o(async()=>{this.recipesCache.delete(e),this.toastService.activateSuccess()}),p(()=>this.toastService.deactivateLoading()))}insertOrUpdateCache(e){this.recipesCache.set(e.id,e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})};var he=h.baseUrl,ge=class i{transform(e){if(typeof e=="string")return`${he}/files/product/${e}`;let t=e[0];return t?`${he}/files/product/${t}`:"assets/images/default-image.jpg"}static \u0275fac=function(t){return new(t||i)};static \u0275pipe=W({name:"productImage",type:i,pure:!0})};export{U as a,pe as b,E as c,me as d,y as e,le as f,ue as g,V as h,ge as i,Mt as j,de as k,fe as l};
